(("undefined"!==typeof self?self:this)["webpackJsonpjfrog_ui_essentials"]=("undefined"!==typeof self?self:this)["webpackJsonpjfrog_ui_essentials"]||[]).push([[394],{"21aa":function(t,e,n){
/*!
 * Copyright (c) 2017 ~ present NAVER Corp.
 * billboard.js project is licensed under the MIT license
 * 
 * billboard.js, JavaScript chart library
 * http://naver.github.io/billboard.js/
 * 
 * @version 1.8.0
 */
(function(e,i){t.exports=i(n("70e1"),n("fd32"),n("b108"),n("4611"),n("5f8f"),n("ce24"),n("462d"),n("abe9"),n("f1df"),n("a43d"),n("482f"),n("d934"),n("fb77"))})(window,function(t,e,n,i,a,r,o,s,c,l,u,d,g){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=25)}([function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.exports=n},function(t,e,n){var i=n(2),a=n(3),r=n(4);function o(t,e){return i(t)||a(t,e)||r()}t.exports=o},function(t,e){function n(t){if(Array.isArray(t))return t}t.exports=n},function(t,e){function n(t,e){var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done);i=!0)if(n.push(o.value),e&&n.length===e)break}catch(c){a=!0,r=c}finally{try{i||null==s["return"]||s["return"]()}finally{if(a)throw r}}return n}t.exports=n},function(t,e){function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}t.exports=n},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}t.exports=i},function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e){t.exports=n},function(t,e){t.exports=i},function(t,e,n){var i=n(11),a=n(12),r=n(13);function o(t){return i(t)||a(t)||r()}t.exports=o},function(t,e){function n(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}t.exports=n},function(t,e){function n(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}t.exports=n},function(t,e){function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}t.exports=n},function(t,e){function n(t){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(e){return"function"===typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=i=function(t){return n(t)}:t.exports=i=function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},i(e)}t.exports=i},function(t,e){t.exports=a},function(t,e){t.exports=r},function(t,e){t.exports=o},function(t,e){t.exports=s},function(t,e){t.exports=c},function(t,e){t.exports=l},function(t,e){t.exports=u},function(t,e){t.exports=d},function(t,e){t.exports=g},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var i=n(0),a=n.n(i),r=n(1),o=n.n(r),s=n(5),c=n.n(s),l=n(6),u=n(7),d=n(8),g=n(9),h={arc:"bb-arc",arcs:"bb-arcs",area:"bb-area",areas:"bb-areas",axis:"bb-axis",axisX:"bb-axis-x",axisXLabel:"bb-axis-x-label",axisY:"bb-axis-y",axisY2:"bb-axis-y2",axisY2Label:"bb-axis-y2-label",axisYLabel:"bb-axis-y-label",bar:"bb-bar",bars:"bb-bars",brush:"bb-brush",button:"bb-button",buttonZoomReset:"bb-zoom-reset",chart:"bb-chart",chartArc:"bb-chart-arc",chartArcs:"bb-chart-arcs",chartArcsBackground:"bb-chart-arcs-background",chartArcsGaugeMax:"bb-chart-arcs-gauge-max",chartArcsGaugeMin:"bb-chart-arcs-gauge-min",chartArcsGaugeUnit:"bb-chart-arcs-gauge-unit",chartArcsTitle:"bb-chart-arcs-title",chartBar:"bb-chart-bar",chartBars:"bb-chart-bars",chartLine:"bb-chart-line",chartLines:"bb-chart-lines",chartRadar:"bb-chart-radar",chartRadars:"bb-chart-radars",chartText:"bb-chart-text",chartTexts:"bb-chart-texts",circle:"bb-circle",circles:"bb-circles",colorPattern:"bb-color-pattern",defocused:"bb-defocused",dragarea:"bb-dragarea",empty:"bb-empty",eventRect:"bb-event-rect",eventRects:"bb-event-rects",eventRectsMultiple:"bb-event-rects-multiple",eventRectsSingle:"bb-event-rects-single",focused:"bb-focused",gaugeValue:"bb-gauge-value",grid:"bb-grid",gridLines:"bb-grid-lines",legendBackground:"bb-legend-background",legendItem:"bb-legend-item",legendItemEvent:"bb-legend-item-event",legendItemFocused:"bb-legend-item-focused",legendItemHidden:"bb-legend-item-hidden",legendItemPoint:"bb-legend-item-point",legendItemTile:"bb-legend-item-tile",level:"bb-level",levels:"bb-levels",line:"bb-line",lines:"bb-lines",region:"bb-region",regions:"bb-regions",selectedCircle:"bb-selected-circle",selectedCircles:"bb-selected-circles",shape:"bb-shape",shapes:"bb-shapes",target:"bb-target",text:"bb-text",texts:"bb-texts",title:"bb-title",tooltip:"bb-tooltip",tooltipContainer:"bb-tooltip-container",tooltipName:"bb-tooltip-name",xgrid:"bb-xgrid",xgridFocus:"bb-xgrid-focus",xgridLine:"bb-xgrid-line",xgridLines:"bb-xgrid-lines",xgrids:"bb-xgrids",ygrid:"bb-ygrid",ygridLine:"bb-ygrid-line",ygridLines:"bb-ygrid-lines",ygrids:"bb-ygrids",zoomBrush:"bb-zoom-brush",zoomRect:"bb-zoom-rect",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"},f=n(10),p=n.n(f),x=n(14),v=n.n(x),m=n(15),_=function(t){return t||0===t},y=function(t){return"function"===typeof t},b=function(t){return"string"===typeof t},T=function(t){return"number"===typeof t},w=function(t){return"undefined"===typeof t},A=function(t){return"undefined"!==typeof t},k=function(t){return"boolean"===typeof t},S=function(t){return 10*Math.ceil(t/10)},L=function(t){return Math.ceil(t)+.5},C=function(t){return t[1]-t[0]},O=function(t){return"object"===v()(t)},X=function(t){return w(t)||null===t||b(t)&&0===t.length||O(t)&&!(t instanceof Date)&&0===Object.keys(t).length||T(t)&&isNaN(t)},D=function(t){return!X(t)},R=function(t){return t&&t.constructor===Array},F=function(t){return t&&!t.nodeType&&O(t)&&!R(t)},z=function(t,e,n){return A(t[e])?t[e]:n},E=function(t,e){var n=!1;return Object.keys(t).forEach(function(i){return t[i]===e&&(n=!0)}),n},I=function(t){for(var e=y(t),n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return e&&t.call.apply(t,i),e},M=function(t){return b(t)?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t},B=function(t){var e=t.getBBox(),n=e.x,i=e.y,a=e.width,r=e.height;return[{x:n,y:i+r},{x:n,y:i},{x:n+a,y:i},{x:n+a,y:i+r}]},P=function(t){var e=t.getBoundingClientRect(),n=e.width,i=e.height,a=B(t),r=a[0].x,o=Math.min(a[0].y,a[1].y);return{x:r,y:o,width:n,height:i}},Y=function(t){var e=null,n=u["event"],i=t.context||t.main;return n&&"BrushEvent"===n.constructor.name?e=n.selection:i&&(e=i.select(".".concat(h.brush)).node())&&(e=Object(m["brushSelection"])(e)),e},j=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Math.random()+(t?"":0)},V=function(t){var e=Y(t);return!e||e[0]===e[1]},N=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;for(var n in e)t[n]=e[n];return t},G=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},H=function(t){return[].slice.call(t)},W=function(t){var e=[];return t.forEach(function(t){try{t.cssRules&&t.cssRules.length&&(e=e.concat(H(t.cssRules)))}catch(n){console.error("Error while reading rules from ".concat(t.href,": ").concat(n.toString()))}}),e},U=function(t){return t.filter(function(t,e,n){return n.indexOf(t)===e})},Z=function(t){return t&&t.length?t.reduce(function(t,e){return t.concat(e)}):[]},$=function(t){var e,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t[0]instanceof Date?e=n?function(t,e){return t-e}:function(t,e){return e-t}:!n&&(e=function(t,e){return(t>e?-1:t<e&&1)||t===e&&0}),t.concat().sort(e)},q=function(t,e){var n=e.filter(function(t){return D(t)});return n.length?T(n[0])?n=Math[t].apply(Math,p()(n)):n[0]instanceof Date&&(n=$(n,"min"===t)[0]):n=void 0,n},K=function(t,e){for(var n=[],i=t;i<e;i++)n.push(i);return n},J={mouse:function(){var t=function(){return{bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0}};try{return new MouseEvent("t"),function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t();e.dispatchEvent(new MouseEvent(n,i))}}catch(e){return function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t(),a=document.createEvent("MouseEvent");a.initMouseEvent(n,i.bubbles,i.cancelable,window,0,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),e.dispatchEvent(a)}}}(),touch:function(t,e,n){var i=new Touch(Object.assign({identifier:Date.now(),target:t,radiusX:2.5,radiusY:2.5,rotationAngle:10,force:.5},n));t.dispatchEvent(new TouchEvent(e,{cancelable:!0,bubbles:!0,shiftKey:!0,touches:[i],targetTouches:[],changedTouches:[i]}))}},Q=n(16),tt=function(){function t(e,n){a()(this,t);var i=Object(Q["scaleLinear"])();this.config=e,this.scale=i,(e.noTransition||!n.config.transition_duration)&&(e.withoutTransition=!0),e.range=i.rangeExtent?i.rangeExtent():this.scaleExtent((n.orgXScale||i).range())}return c()(t,[{key:"axisX",value:function(t,e){var n=this.config.tickOffset;t.attr("transform",function(t){return"translate(".concat(Math.ceil(e(t)+n),", 0)")})}},{key:"axisY",value:function(t,e){t.attr("transform",function(t){return"translate(0,".concat(Math.ceil(e(t)),")")})}},{key:"scaleExtent",value:function(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}},{key:"generateTicks",value:function(t){var e=[];if(t.ticks)return t.ticks.apply(t,p()(this.config.tickArguments||[])).map(function(t){return b(t)&&T(t)&&!isNaN(t)&&Math.round(10*t)/10||t});for(var n=t.domain(),i=Math.ceil(n[0]);i<n[1];i++)e.push(i);return e.length>0&&e[0]>0&&e.unshift(e[0]-(e[1]-e[0])),e}},{key:"copyScale",value:function(){var t=this.scale.copy();return t.domain().length||t.domain(this.scale.domain()),t}},{key:"textFormatted",value:function(t){var e=this.config.tickFormat,n=/\d+\.\d+0{5,}\d$/.test(t)?+(t+"").replace(/0+\d$/,""):t,i=e?e(n):n;return A(i)?i:""}},{key:"transitionise",value:function(t){var e=this.config;return e.withoutTransition?t.interrupt():t.transition(e.transition)}}],[{key:"getSizeFor1Char",value:function(t){var e={w:5.5,h:11.5};return t.empty()||t.select("text").text("0").call(function(t){try{var n=t.node().getBBox(),i=n.width,a=n.height;i&&a&&(e.w=i,e.h=a),t.text("")}catch(r){}}),this.getSizeFor1Char=function(){return e},e}}]),t}(),et=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a()(this,t);var n={innerTickSize:6,outerTickSize:e.outerTick?6:0,orient:"bottom",range:[],tickArguments:null,tickCentered:null,tickCulling:!0,tickFormat:null,tickLength:9,tickOffset:0,tickPadding:3,tickValues:null,transition:null,noTransition:e.noTransition};n.tickLength=Math.max(n.innerTickSize,0)+n.tickPadding,this.helper=new tt(n,e),this.config=n,this.params=e}return c()(t,[{key:"create",value:function(t){var e=this,n=this.config,i=this.params,a=this.helper,r=a.scale,o=n.orient,s=this.splitTickText.bind(this),c=/^(left|right)$/.test(o),l=/^(top|bottom)$/.test(o),d=a[l?"axisX":"axisY"],g=d===a.axisX?"y":"x",h=/^(top|left)$/.test(o)?-1:1,f=i.tickTextRotate;this.config.range=r.rangeExtent?r.rangeExtent():a.scaleExtent((i.orgXScale||r).range());var p=n,x=p.innerTickSize,v=p.tickLength,m=p.range,_=i.name,y=_&&/^(x|y|y2)$/.test(_)?i.config["axis_".concat(_,"_tick_text_position")]:{x:0,y:0},b="subX"===_?"subchart_axis_x":"axis_".concat(_),w=i.config["".concat(b,"_show")],A={tick:!!w&&i.config["".concat(b,"_tick_show")],text:!!w&&i.config["".concat(b,"_tick_text_show")]},k=null;t.each(function(){var t=Object(u["select"])(this),p=this.__chart__||r,_=a.copyScale();k=t,this.__chart__=_,n.tickOffset=i.isCategory?Math.ceil((_(1)-_(0))/2):0;var b=t.selectAll(".domain").data([0]);if(b.enter().append("path").attr("class","domain").merge(a.transitionise(b)).attr("d",function(){var t=n.outerTickSize*h;return l?"M".concat(m[0],",").concat(t,"V0H").concat(m[1],"V").concat(t):"M".concat(t,",").concat(m[0],"H0V").concat(m[1],"H").concat(t)}),A.tick||A.text){var w=n.tickValues||a.generateTicks(_),S=t.selectAll(".tick").data(w,_),L=S.enter().insert("g",".domain").attr("class","tick").style("opacity","1"),C=S.exit().remove();S=L.merge(S),A.tick&&L.append("line"),A.text&&L.append("text");var O=tt.getSizeFor1Char(S),X=[],D=S.select("text").selectAll("tspan").data(function(t,e){var n=i.tickMultiline?s(t,_,w,c,O.w):R(a.textFormatted(t))?a.textFormatted(t).concat():[a.textFormatted(t)];return X[e]=n.length,n.map(function(t){return{index:e,splitted:t}})});D.exit().remove(),D=D.enter().append("tspan").merge(D).text(function(t){return t.splitted}),D.attr("x",l?0:v*h).attr("dx",function(){var t=0;return"bottom"===o&&f&&(t=8*Math.sin(Math.PI*(f/180))),t+(y.x||0)}()).attr("dy",function(t,e){var n=0;return"top"!==o&&(n=O.h,0===e&&(n=c?-((X[t.index]-1)*(O.h/2)-3):0===y.y?".71em":0)),T(n)&&y.y?n+y.y:n||".71em"});var F=S.select("line"),z=S.select("text");if(L.select("line").attr("".concat(g,"2"),x*h),L.select("text").attr("".concat(g),v*h),e.setTickLineTextPosition(F,z),i.tickTitle&&z.append&&z.append("title").each(function(t){Object(u["select"])(this).text(i.tickTitle[t])}),_.bandwidth){var E=_,I=E.bandwidth()/2;p=function(t){return E(t)+I},_=p}else p.bandwidth?p=_:d.call(a,C,_);d.call(a,L,p),d.call(a,a.transitionise(S).style("opacity",1),_)}}),this.g=k}},{key:"getTickXY",value:function(){var t=this.config,e={x:0,y:0};return this.params.isCategory&&(e.x=t.tickCentered?0:t.tickOffset,e.y=t.tickCentered?t.tickOffset:0),e}},{key:"getTickSize",value:function(t){var e=this.helper.scale,n=this.config,i=n.innerTickSize,a=n.range,r=e(t)+(n.tickCentered?0:n.tickOffset);return a[0]<r&&r<a[1]?i:0}},{key:"setTickLineTextPosition",value:function(t,e){var n=this.getTickXY(),i=this.config,a=i.innerTickSize,r=i.orient,o=i.tickLength,s=i.tickOffset,c=this.params.tickTextRotate;"bottom"===r?(t.attr("x1",n.x).attr("x2",n.x).attr("y2",this.getTickSize.bind(this)),e.attr("x",0).attr("y",function(t){return t?11.5-t/15*2.5*(t>0?1:-1):o}(c)).style("text-anchor",function(t){return t?t>0?"start":"end":"middle"}(c)).attr("transform",function(t){return t?"rotate(".concat(t,")"):null}(c))):"top"===r?(t.attr("x2",0).attr("y2",-a),e.attr("x",0).attr("y",2*-o).style("text-anchor","middle")):"left"===r?(t.attr("x2",-a).attr("y1",n.y).attr("y2",n.y),e.attr("x",-o).attr("y",s).style("text-anchor","end")):"right"===r&&(t.attr("x2",a).attr("y2",0),e.attr("x",o).attr("y",0).style("text-anchor","start"))}},{key:"splitTickText",value:function(t,e,n,i,a){function r(t,e){for(var n,i,o,s=1;s<e.length;s++)if(" "===e.charAt(s)&&(i=s),n=e.substr(0,s+1),o=a*n.length,l<o)return r(t.concat(e.substr(0,i||s)),e.slice(i?i+1:s));return t.concat(e)}var o=this.params,s=this.helper.textFormatted(t),c=b(s)&&s.indexOf("\n")>-1?s.split("\n"):[];if(c.length)return c;if(R(s))return s;var l=o.tickWidth;return(!l||l<=0)&&(l=i?95:o.isCategory?Math.ceil(e(n[1])-e(n[0]))-12:110),r(c,s+"")}},{key:"scale",value:function(t){return arguments.length?(this.helper.scale=t,this):this.helper.scale}},{key:"orient",value:function(t){return arguments.length?(this.config.orient=t in{top:1,right:1,bottom:1,left:1}?t+"":"bottom",this):this.config.orient}},{key:"tickFormat",value:function(t){return arguments.length?(this.config.tickFormat=t,this):this.config.tickFormat}},{key:"tickCentered",value:function(t){var e=this.config;return arguments.length?(e.tickCentered=t,this):e.tickCentered}},{key:"tickOffset",value:function(){return this.config.tickOffset}},{key:"tickInterval",value:function(t){var e;if(this.params.isCategory)e=2*this.config.tickOffset;else{var n=this.g.select("path.domain").node().getTotalLength()-2*this.config.outerTickSize;e=n/(t||this.g.selectAll("line").size())}return e===1/0?0:e}},{key:"ticks",value:function(){for(var t=this.config,e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.length?(t.tickArguments=H(n),this):t.tickArguments}},{key:"tickCulling",value:function(t){var e=this.config;return arguments.length?(e.tickCulling=t,this):e.tickCulling}},{key:"tickValues",value:function(t){var e=this,n=this.config;if(y(t))n.tickValues=function(){return t(e.helper.scale.domain())};else{if(!arguments.length)return n.tickValues;n.tickValues=t}return this}},{key:"setTransition",value:function(t){return this.config.transition=t,this}}]),t}(),nt=function(t,e){var n=t.config.axis_rotated;return e?n:!n},it=function(t){return"".concat(h.axis," ").concat(h["axis".concat(G(t))])},at=function(){function t(e){a()(this,t),this.owner=e,this.setOrient()}return c()(t,[{key:"init",value:function(){var t=this,e=this.owner,n=e.config,i=n.axis_rotated,a=e.main,r=["x","y"];n.axis_y2_show&&r.push("y2"),e.axesList={},r.forEach(function(r){var o=it(r),s=h["axis".concat(G(r),"Label")];e.axes[r]=a.append("g").attr("class",o).attr("clip-path",function(){var t=null;return"x"===r?t=e.clipPathForXAxis:"y"===r&&n.axis_y_inner&&(t=e.clipPathForYAxis),t}).attr("transform",e.getTranslate(r)).style("visibility",n["axis_".concat(r,"_show")]?"visible":"hidden"),e.axes[r].append("text").attr("class",s).attr("transform",["rotate(-90)",null]["x"===r?+!i:+i]).style("text-anchor",t.textAnchorForXAxisLabel.bind(t)),t.generateAxes(r)})}},{key:"setOrient",value:function(){var t=this.owner,e=t.config,n=e.axis_rotated,i=e.axis_y_inner,a=e.axis_y2_inner;t.xOrient=n?"left":"bottom",t.yOrient=n?i?"top":"bottom":i?"right":"left",t.y2Orient=n?a?"bottom":"top":a?"left":"right",t.subXOrient=n?"left":"bottom"}},{key:"generateAxes",value:function(t){var e,n=this.owner,i=n.config,a=[],r=i["axis_".concat(t,"_axes")],o=i.axis_rotated;"x"===t?e=o?g["axisLeft"]:g["axisBottom"]:"y"===t?e=o?g["axisBottom"]:g["axisLeft"]:"y2"===t&&(e=o?g["axisTop"]:g["axisRight"]),r.length&&r.forEach(function(i){var r=i.tick;a.push(e(n[t]).ticks(r.count).tickFormat(r.format||function(t){return t}).tickValues(r.values).tickSizeOuter(!1===r.outer?0:6))}),n.axesList[t]=a}},{key:"updateAxes",value:function(){var t=this.owner,e=t.config;Object.keys(t.axesList).forEach(function(n){t.axesList[n].forEach(function(i,a){var r="".concat(it(n),"-").concat(a+1),o=t.main.select(".".concat(r.replace(/\s/,".")));o.empty()?o=t.main.append("g").attr("class",r).style("visibility",e["axis_".concat(n,"_show")]?"visible":"hidden").call(i):t.xAxis.helper.transitionise(o).call(i.scale(t[n])),o.attr("transform",t.getTranslate(n,a+1))})})}},{key:"getXAxis",value:function(t,e,n,i,a){var r=this.owner,o=r.config,s=r.isCategorized(),c=r["".concat(t,"Orient")],l=r.xAxisTickFormat,u=r.xAxisTickValues,d={isCategory:s,outerTick:n,noTransition:i,config:o,name:t,tickMultiline:o.axis_x_tick_multiline,tickWidth:o.axis_x_tick_width,tickTextRotate:a?0:o.axis_x_tick_rotate,tickTitle:s&&o.axis_x_tick_tooltip&&r.api.categories(),orgXScale:r.x},g=new et(d).scale(r.zoomScale||e).orient(c),h=u;return r.isTimeSeries()&&u&&!y(u)&&(h=u.map(function(t){return r.parseDate(t)})),g.tickFormat(l).tickValues(h),s&&(g.tickCentered(o.axis_x_tick_centered),X(o.axis_x_tick_culling)&&(o.axis_x_tick_culling=!1)),o.axis_x_tick_count&&g.ticks(o.axis_x_tick_count),g}},{key:"getYAxis",value:function(t,e,n,i,a){var r=this.owner,o=r.config,s=r["".concat(t,"Orient")],c=o["axis_".concat(t,"_tick_format")],l=r["".concat(t,"AxisTickValues")],u={outerTick:n,noTransition:i,config:o,name:t,tickTextRotate:a?0:o.axis_y_tick_rotate},d=new et(u).scale(e).orient(s).tickFormat(c||r.isStackNormalized()&&function(t){return"".concat(t,"%")});return r.isTimeSeriesY()?d.ticks(o.axis_y_tick_time_value):d.tickValues(l),d}},{key:"updateXAxisTickValues",value:function(t,e){var n,i=this.owner,a=i.config,r=a.axis_x_tick_fit,o=a.axis_x_tick_count;return(r||o&&r)&&(n=this.generateTickValues(i.mapTargetsToUniqueXs(t),o,i.isTimeSeries())),e?e.tickValues(n):i.xAxis&&(i.xAxis.tickValues(n),i.subXAxis.tickValues(n)),n}},{key:"getId",value:function(t){var e=this.owner.config;return t in e.data_axes?e.data_axes[t]:"y"}},{key:"getXAxisTickFormat",value:function(){var t,e=this.owner,n=e.config,i=n.axis_x_tick_format,a=e.isTimeSeries(),r=e.isCategorized();return i?y(i)?t=i:a&&(t=function(t){return t?e.axisTimeFormat(i)(t):""}):t=a?e.defaultAxisTimeFormat:r?e.categoryName:function(t){return t<0?t.toFixed(0):t},y(t)?function(n){return t.apply(e,r?[n,e.categoryName(n)]:[n])}:t}},{key:"getTickValues",value:function(t){var e=this.owner,n=e.config["axis_".concat(t,"_tick_values")],i=e["".concat(t,"Axis")];return n||(i?i.tickValues():void 0)}},{key:"getXAxisTickValues",value:function(){return this.getTickValues("x")}},{key:"getYAxisTickValues",value:function(){return this.getTickValues("y")}},{key:"getY2AxisTickValues",value:function(){return this.getTickValues("y2")}},{key:"getLabelOptionByAxisId",value:function(t){return this.owner.config["axis_".concat(t,"_label")]}},{key:"getLabelText",value:function(t){var e=this.getLabelOptionByAxisId(t);return b(e)?e:e?e.text:null}},{key:"setLabelText",value:function(t,e){var n=this.owner,i=n.config,a=this.getLabelOptionByAxisId(t);b(a)?i["axis_".concat(t,"_label")]=e:a&&(a.text=e)}},{key:"getLabelPosition",value:function(t,e){var n=this.owner.config.axis_rotated,i=this.getLabelOptionByAxisId(t),a=O(i)&&i.position?i.position:e[+!n],r=function(t){return!!~a.indexOf(t)};return{isInner:r("inner"),isOuter:r("outer"),isLeft:r("left"),isCenter:r("center"),isRight:r("right"),isTop:r("top"),isMiddle:r("middle"),isBottom:r("bottom")}}},{key:"getXAxisLabelPosition",value:function(){return this.getLabelPosition("x",["inner-top","inner-right"])}},{key:"getYAxisLabelPosition",value:function(){return this.getLabelPosition("y",["inner-right","inner-top"])}},{key:"getY2AxisLabelPosition",value:function(){return this.getLabelPosition("y2",["inner-right","inner-top"])}},{key:"getLabelPositionById",value:function(t){return this["get".concat(t.toUpperCase(),"AxisLabelPosition")]()}},{key:"textForXAxisLabel",value:function(){return this.getLabelText("x")}},{key:"textForYAxisLabel",value:function(){return this.getLabelText("y")}},{key:"textForY2AxisLabel",value:function(){return this.getLabelText("y2")}},{key:"xForAxisLabel",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.owner,i=t.isMiddle?-n.height/2:0;return nt(n,e)?i=t.isLeft?0:t.isCenter?n.width/2:n.width:t.isBottom&&(i=-n.height),i}},{key:"dxForAxisLabel",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.owner,i=t.isBottom?"0.5em":"0";return nt(n,e)?i=t.isLeft?"0.5em":t.isRight?"-0.5em":"0":t.isTop&&(i="-0.5em"),i}},{key:"textAnchorForAxisLabel",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.owner,i=t.isMiddle?"middle":"end";return nt(n,e)?i=t.isLeft?"start":t.isCenter?"middle":"end":t.isBottom&&(i="start"),i}},{key:"xForXAxisLabel",value:function(){return this.xForAxisLabel(this.getXAxisLabelPosition(),!1)}},{key:"xForYAxisLabel",value:function(){return this.xForAxisLabel(this.getYAxisLabelPosition())}},{key:"xForY2AxisLabel",value:function(){return this.xForAxisLabel(this.getY2AxisLabelPosition())}},{key:"dxForXAxisLabel",value:function(){return this.dxForAxisLabel(this.getXAxisLabelPosition(),!1)}},{key:"dxForYAxisLabel",value:function(){return this.dxForAxisLabel(this.getYAxisLabelPosition())}},{key:"dxForY2AxisLabel",value:function(){return this.dxForAxisLabel(this.getY2AxisLabelPosition())}},{key:"dyForXAxisLabel",value:function(){var t=this.owner,e=t.config,n=this.getXAxisLabelPosition().isInner,i=e.axis_x_height;return e.axis_rotated?n?"1.2em":-25-this.getMaxTickWidth("x"):n?"-0.5em":i?i-10:"3em"}},{key:"dyForYAxisLabel",value:function(){var t=this.owner,e=this.getYAxisLabelPosition().isInner;return t.config.axis_rotated?e?"-0.5em":"3em":e?"1.2em":-10-(t.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)}},{key:"dyForY2AxisLabel",value:function(){var t=this.owner,e=this.getY2AxisLabelPosition().isInner;return t.config.axis_rotated?e?"1.2em":"-2.2em":e?"-0.5em":15+(t.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)}},{key:"textAnchorForXAxisLabel",value:function(){return this.textAnchorForAxisLabel(this.getXAxisLabelPosition(),!1)}},{key:"textAnchorForYAxisLabel",value:function(){return this.textAnchorForAxisLabel(this.getYAxisLabelPosition())}},{key:"textAnchorForY2AxisLabel",value:function(){return this.textAnchorForAxisLabel(this.getY2AxisLabelPosition())}},{key:"getMaxTickWidth",value:function(t,e){var n=this.owner,i=n.config,a=n.currentMaxTickWidths[t],r=0;if(e||!i["axis_".concat(t,"_show")])return a.size;if(n.svg){var o=/^y2?$/.test(t),s=n.filterTargetsToShow(n.data.targets),c=o?"getY":"getX",l=n[t].copy().domain(n["".concat(c,"Domain")](s,t)),u=l.domain().toString();if(a.domain===u)return a.size;a.domain=u;var d=this["".concat(c,"Axis")](t,l,!1,!1,!0);o||this.updateXAxisTickValues(s,d);var g=n.selectChart.append("svg").style("visibility","hidden").style("position","fixed").style("top","0px").style("left","0px");d.create(g),g.selectAll("text").each(function(){r=Math.max(r,this.getBoundingClientRect().width)}),g.remove()}return r>0&&(a.size=r),a.size}},{key:"updateLabels",value:function(t){var e=this,n=this.owner,i={X:n.main.select(".".concat(h.axisX," .").concat(h.axisXLabel)),Y:n.main.select(".".concat(h.axisY," .").concat(h.axisYLabel)),Y2:n.main.select(".".concat(h.axisY2," .").concat(h.axisY2Label))};Object.keys(i).filter(function(t){return!i[t].empty()}).forEach(function(n){var a=i[n],r="".concat(n,"AxisLabel");(t?a.transition():a).attr("x",e["xFor".concat(r)].bind(e)).attr("dx",e["dxFor".concat(r)].bind(e)).attr("dy",e["dyFor".concat(r)].bind(e)).text(e["textFor".concat(r)].bind(e))})}},{key:"getPadding",value:function(t,e,n,i){var a=T(t)?t:t[e];return _(a)?"ratio"===t.unit?t[e]*i:this.convertPixelsToAxisPadding(a,i):n}},{key:"convertPixelsToAxisPadding",value:function(t,e){var n=this.owner,i=n.config.axis_rotated?n.width:n.height;return e*(t/i)}},{key:"generateTickValues",value:function(t,e,n){var i,a,r,o,s,c,l=t;if(e){var u=y(e)?e():e;if(1===u)l=[t[0]];else if(2===u)l=[t[0],t[t.length-1]];else if(u>2){for(r=u-2,i=t[0],a=t[t.length-1],o=(a-i)/(r+1),l=[i],s=0;s<r;s++)c=+i+o*(s+1),l.push(n?new Date(c):c);l.push(a)}}return n||(l=l.sort(function(t,e){return t-e})),l}},{key:"generateTransitions",value:function(t){var e=this.owner,n=e.axes,i=["x","y","y2","subx"].map(function(e){var i=n[e];return i&&t&&(i=i.transition().duration(t)),i}),a=o()(i,4),r=a[0],s=a[1],c=a[2],l=a[3];return{axisX:r,axisY:s,axisY2:c,axisSubX:l}}},{key:"redraw",value:function(t,e,n){var i=this.owner,a=e?"0":"1";["x","y","y2","subX"].forEach(function(e){var r=i["".concat(e,"Axis")];r&&(!n&&(r.config.withoutTransition=!i.config.transition_duration),i.axes[e.toLowerCase()].style("opacity",a),r.create(t["axis".concat(G(e))]))}),this.updateAxes()}}]),t}(),rt=function(){function t(e){a()(this,t);var n=this;n.api=e,n.config=n.getOptions(),n.data={},n.cache={},n.axes={}}return c()(t,[{key:"beforeInit",value:function(){var t=this;I(t.config.onbeforeinit,t)}},{key:"afterInit",value:function(){var t=this;I(t.config.onafterinit,t)}},{key:"init",value:function(){var t=this;t.initParams();var e=t.convertData(t.config,t.initWithData);e&&t.initWithData(e)}},{key:"initParams",value:function(){var t=this,e=this,n=e.config,i=n.axis_rotated;e.datetimeId="bb-".concat(+new Date),e.initClip(),e.dragStart=null,e.dragging=!1,e.flowing=!1,e.cancelClick=!1,e.mouseover=!1,e.transiting=!1,e.color=e.generateColor(),e.levelColor=e.generateLevelColor(),e.point=e.generatePoint(),e.extraLineClasses=e.generateExtraLineClass(),e.dataTimeFormat=n.data_xLocaltime?l["timeParse"]:l["utcParse"],e.axisTimeFormat=n.axis_x_localtime?l["timeFormat"]:l["utcFormat"];var a=e.config.zoom_enabled&&"drag"===e.config.zoom_enabled.type;e.defaultAxisTimeFormat=function(n){var i=a?t.zoomScale:t.zoomScale&&e.x.orgDomain().toString()!==t.zoomScale.domain().toString(),r=(n.getMilliseconds()?".%L":n.getSeconds()&&".:%S")||n.getMinutes()&&"%I:%M"||n.getHours()&&"%I %p"||1!==n.getDate()&&"%b %d"||i&&1===n.getDate()&&"%b'%y"||n.getMonth()&&"%-m/%-d"||"%Y";return e.axisTimeFormat(r)(n)},e.hiddenTargetIds=[],e.hiddenLegendIds=[],e.focusedTargetIds=[],e.defocusedTargetIds=[],e.isLegendRight="right"===n.legend_position,e.isLegendInset="inset"===n.legend_position,e.isLegendTop="top-left"===n.legend_inset_anchor||"top-right"===n.legend_inset_anchor,e.isLegendLeft="top-left"===n.legend_inset_anchor||"bottom-left"===n.legend_inset_anchor,e.legendStep=0,e.legendItemWidth=0,e.legendItemHeight=0,e.currentMaxTickWidths={x:{size:0,domain:""},y:{size:0,domain:""},y2:{size:0,domain:""}},e.rotated_padding_left=30,e.rotated_padding_right=i&&!n.axis_x_show?0:30,e.rotated_padding_top=5,e.withoutFadeIn={},e.inputType=e.convertInputType(),e.axes.subx=Object(u["selectAll"])([])}},{key:"initWithData",value:function(t){var e=this,n=e.config;e.axis=new at(e),n.zoom_enabled&&e.initZoom();var i={element:n.bindto,classname:"bb"};if(F(n.bindto)&&(i.element=n.bindto.element||"#chart",i.classname=n.bindto.classname||i.classname),e.selectChart=y(i.element.node)?n.bindto.element:Object(u["select"])(i.element||[]),e.selectChart.empty()&&(e.selectChart=Object(u["select"])(document.body.appendChild(document.createElement("div")))),e.selectChart.html("").classed(i.classname,!0),e.data.xs={},e.data.targets=e.convertDataToTargets(t),n.data_filter&&(e.data.targets=e.data.targets.filter(n.data_filter)),n.data_hide&&e.addHiddenTargetIds(!0===n.data_hide?e.mapToIds(e.data.targets):n.data_hide),n.legend_hide&&e.addHiddenLegendIds(!0===n.legend_hide?e.mapToIds(e.data.targets):n.legend_hide),e.hasType("gauge")&&(n.legend_show=!1),e.updateSizes(),e.updateScales(!0),e.x&&(e.x.domain($(e.getXDomain(e.data.targets))),e.subX.domain(e.x.domain()),e.orgXDomain=e.x.domain()),e.y&&(e.y.domain(e.getYDomain(e.data.targets,"y")),e.subY.domain(e.y.domain())),e.y2&&(e.y2.domain(e.getYDomain(e.data.targets,"y2")),e.subY2&&e.subY2.domain(e.y2.domain())),e.svg=e.selectChart.append("svg").style("overflow","hidden").style("display","block"),n.interaction_enabled&&e.inputType){var a="touch"===e.inputType;e.svg.on(a?"touchstart":"mouseenter",function(){return I(n.onover,e)}).on(a?"touchend":"mouseleave",function(){return I(n.onout,e)})}n.svg_classname&&e.svg.attr("class",n.svg_classname),e.defs=e.svg.append("defs"),e.clipChart=e.appendClip(e.defs,e.clipId),e.clipXAxis=e.appendClip(e.defs,e.clipIdForXAxis),e.clipYAxis=e.appendClip(e.defs,e.clipIdForYAxis),e.clipGrid=e.appendClip(e.defs,e.clipIdForGrid),y(n.color_tiles)&&e.patterns&&e.patterns.forEach(function(t){return e.defs.append(function(){return t.node})}),e.updateSvgSize();var r=e.svg.append("g").attr("transform",e.getTranslate("main"));if(e.main=r,n.subchart_show&&e.initSubchart(),e.initTooltip&&e.initTooltip(),e.initLegend&&e.initLegend(),e.initTitle&&e.initTitle(),n.data_empty_label_text&&r.append("text").attr("class","".concat(h.text," ").concat(h.empty)).attr("text-anchor","middle").attr("dominant-baseline","middle"),e.initRegion(),n.clipPath||e.axis.init(),r.append("g").attr("class",h.chart).attr("clip-path",e.clipPath),e.initEventRect(),e.initChartElements(),e.initGrid(),r.insert("rect",n.zoom_privileged?null:"g.".concat(h.regions)).attr("class",h.zoomRect).attr("width",e.width).attr("height",e.height).style("opacity","0").on("dblclick.zoom",null),n.clipPath&&e.axis.init(),e.updateTargets(e.data.targets),e.updateDimension(),n.oninit.call(e),e.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1,initializing:!0}),n.data_onmin||n.data_onmax){var o=e.getMinMaxData();I(n.data_onmin,e,o.min),I(n.data_onmax,e,o.max)}e.bindResize(),e.api.element=e.selectChart.node()}},{key:"initChartElements",value:function(){var t=this;["Bar","Line","Bubble","Arc","Gauge","Pie","Radar"].forEach(function(e){t["init".concat(e)]()}),D(t.config.data_labels)&&t.initText()}},{key:"getChartElements",value:function(){var t=this;return{chart:t.selectChart,svg:t.svg,defs:t.defs,main:t.main,tooltip:t.tooltip,legend:t.legend,title:t.title,grid:t.grid,arc:t.arcs,bar:{bars:t.mainBar},line:{lines:t.mainLine,areas:t.mainArea,circles:t.mainCircle},text:{texts:t.mainText}}}},{key:"smoothLines",value:function(t,e){"grid"===e&&t.each(function(){var t=Object(u["select"])(this),e=["x1","x2","y1","y2"].map(function(e){return Math.ceil(t.attr(e))}),n=o()(e,4),i=n[0],a=n[1],r=n[2],s=n[3];t.attr({x1:i,x2:a,y1:r,y2:s})})}},{key:"updateSizes",value:function(t){var e=this,n=e.config,i=n.axis_rotated,a=e.hasArcType(),r={width:e.legend?e.getLegendWidth():0,height:e.legend?e.getLegendHeight():0},o=e.isLegendRight||e.isLegendInset?0:r.height,s=i||a?0:e.getHorizontalAxisHeight("x"),c=n.subchart_axis_x_show&&n.subchart_axis_x_tick_text_show?s:30,l=n.subchart_show&&!a?n.subchart_size_height+c:0;t||e.setContainerSize(),e.margin=i?{top:e.getHorizontalAxisHeight("y2")+e.getCurrentPaddingTop(),right:a?0:e.getCurrentPaddingRight(),bottom:e.getHorizontalAxisHeight("y")+o+e.getCurrentPaddingBottom(),left:l+(a?0:e.getCurrentPaddingLeft())}:{top:4+e.getCurrentPaddingTop(),right:a?0:e.getCurrentPaddingRight(),bottom:s+l+o+e.getCurrentPaddingBottom(),left:a?0:e.getCurrentPaddingLeft()},e.margin2=i?{top:e.margin.top,right:NaN,bottom:20+o,left:e.rotated_padding_left}:{top:e.currentHeight-l-o,right:NaN,bottom:c+o,left:e.margin.left},e.margin3={top:0,right:NaN,bottom:0,left:0},e.updateSizeForLegend&&e.updateSizeForLegend(r),e.width=e.currentWidth-e.margin.left-e.margin.right,e.height=e.currentHeight-e.margin.top-e.margin.bottom,e.width<0&&(e.width=0),e.height<0&&(e.height=0),e.width2=i?e.margin.left-e.rotated_padding_left-e.rotated_padding_right:e.width,e.height2=i?e.height:e.currentHeight-e.margin2.top-e.margin2.bottom,e.width2<0&&(e.width2=0),e.height2<0&&(e.height2=0),e.arcWidth=e.width-(e.isLegendRight?r.width+10:0),e.arcHeight=e.height-(e.isLegendRight?0:10),e.hasType("gauge")&&!n.gauge_fullCircle&&(e.arcHeight+=e.height-e.getGaugeLabelHeight()),e.updateRadius&&e.updateRadius(),e.isLegendRight&&a&&(e.margin3.left=e.arcWidth/2+1.1*e.radiusExpanded)}},{key:"updateTargets",value:function(t){var e=this;e.updateTargetsForText(t),e.updateTargetsForBar(t),e.updateTargetsForLine(t),e.hasArcType(t)&&(e.hasType("radar")?e.updateTargetsForRadar(t):e.updateTargetsForArc(t)),e.updateTargetsForSubchart&&e.updateTargetsForSubchart(t),e.showTargets()}},{key:"showTargets",value:function(){var t=this;t.svg.selectAll(".".concat(h.target)).filter(function(e){return t.isTargetToShow(e.id)}).transition().duration(t.config.transition_duration).style("opacity","1")}},{key:"getWithOption",value:function(t){var e={Y:!0,Subchart:!0,Transition:!0,EventRect:!0,Dimension:!0,TrimXDomain:!0,Transform:!1,UpdateXDomain:!1,UpdateOrgXDomain:!1,Legend:!1,UpdateXAxis:"UpdateXDomain",TransitionForExit:"Transition",TransitionForAxis:"Transition"};return Object.keys(e).forEach(function(n){var i=e[n];b(i)&&(i=e[i]),e[n]=z(t,"with".concat(n),i)}),e}},{key:"redraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=this,i=n.main,a=n.config,r=n.filterTargetsToShow(n.data.targets),o=t.initializing,s=t.flow,c=n.getWithOption(t),l=c.Transition?a.transition_duration:0,u=c.TransitionForExit?l:0,d=c.TransitionForAxis?l:0,g=e||n.axis.generateTransitions(d);o&&a.tooltip_init_show||"touch"!==n.inputType||n.hideTooltip(),n.updateSizes(o),c.Legend&&a.legend_show?n.updateLegend(n.mapToIds(n.data.targets),t,g):c.Dimension&&n.updateDimension(!0),n.redrawAxis(r,c,g,s,o),n.updateCircleY(),n.updateXgridFocus(),a.data_empty_label_text&&i.select("text.".concat(h.text,".").concat(h.empty)).attr("x",n.width/2).attr("y",n.height/2).text(a.data_empty_label_text).transition().style("opacity",r.length?0:1),n.updateGrid(l),n.updateRegion(l),n.updateBar(u),n.updateLine(u),n.updateArea(u),n.updateCircle(),n.hasDataLabel()&&n.updateText(u),n.redrawTitle&&n.redrawTitle(),n.arcs&&n.redrawArc(l,u,c.Transform),n.radars&&n.redrawRadar(l,u),n.mainText&&i.selectAll(".".concat(h.selectedCircles)).filter(n.isBarType.bind(n)).selectAll("circle").remove(),a.interaction_enabled&&!s&&c.EventRect&&(n.redrawEventRect(),n.bindZoomEvent()),n.generateRedrawList(r,s,l,c.Subchart)}},{key:"redrawAxis",value:function(t,e,n,i,a){var r,o,s,c=this,l=c.config,d=c.hasArcType();if(c.isCategorized()&&0===t.length&&c.x.domain([0,c.axes.x.selectAll(".tick").size()]),c.x&&t.length?(c.updateXDomain(t,e.UpdateXDomain,e.UpdateOrgXDomain,e.TrimXDomain),!l.axis_x_tick_values&&(r=c.axis.updateXAxisTickValues(t))):c.xAxis&&(c.xAxis.tickValues([]),c.subXAxis.tickValues([])),l.zoom_rescale&&!i&&(s=c.x.orgDomain()),["y","y2"].forEach(function(e){var n=c[e];if(n){var i=l["axis_".concat(e,"_tick_values")],a=l["axis_".concat(e,"_tick_count")];if(n.domain(c.getYDomain(t,e,s)),!i&&a){var r=n.domain();c["".concat(e,"Axis")].tickValues(c.axis.generateTickValues(r,r.every(function(t){return 0===t})?1:a,c.isTimeSeriesY()))}}}),c.axis.redraw(n,d,a),c.axis.updateLabels(e.Transition),(e.UpdateXDomain||e.UpdateXAxis)&&t.length)if(l.axis_x_tick_culling&&r){for(var g=1;g<r.length;g++)if(r.length/g<l.axis_x_tick_culling_max){o=g;break}c.svg.selectAll(".".concat(h.axisX," .tick text")).each(function(t){var e=r.indexOf(t);e>=0&&Object(u["select"])(this).style("display",e%o?"none":"block")})}else c.svg.selectAll(".".concat(h.axisX," .tick text")).style("display","block");e.Y&&(c.subY&&c.subY.domain(c.getYDomain(t,"y")),c.subY2&&c.subY2.domain(c.getYDomain(t,"y2")))}},{key:"generateRedrawList",value:function(t,e,n,i){var a=this,r=a.config,o=a.getDrawShape();r.subchart_show&&a.redrawSubchart(i,n,o);var s=e&&a.generateFlow({targets:t,flow:e,duration:e.duration,shape:o,xv:a.xv.bind(a)}),c=(n||s)&&a.isTabVisible(),l=a.getRedrawList(o,e,s,c),u=e||r.onrendered?function(){s&&s(),I(r.onrendered,a)}:null;if(u)if(c){var g=a.generateWait();Object(d["transition"])().duration(n).each(function(){l.reduce(function(t,e){return t.concat(e)},[]).forEach(function(t){return g.add(t)})}).call(g,u)}else u();a.mapToIds(a.data.targets).forEach(function(t){a.withoutFadeIn[t]=!0})}},{key:"getDrawShape",value:function(){var t=this,e=t.config.axis_rotated,n=t.hasType("radar"),i={type:{},indices:{}};if(t.hasTypeOf("Line")||t.hasType("bubble")||t.hasType("scatter")){var a=t.getShapeIndices(t.isLineType);if(i.indices.line=a,i.type.line=t.generateDrawLine?t.generateDrawLine(a,!1):void 0,t.hasTypeOf("Area")){var r=t.getShapeIndices(t.isAreaType);i.indices.area=r,i.type.area=t.generateDrawArea?t.generateDrawArea(r,!1):void 0}}if(t.hasType("bar")){var o=t.getShapeIndices(t.isBarType);i.indices.bar=o,i.type.bar=t.generateDrawBar?t.generateDrawBar(o):void 0}return i.pos={xForText:t.generateXYForText(i.indices,!0),yForText:t.generateXYForText(i.indices,!1),cx:(n?t.radarCircleX:e?t.circleY:t.circleX).bind(t),cy:(n?t.radarCircleY:e?t.circleX:t.circleY).bind(t)},i}},{key:"getRedrawList",value:function(t,e,n,i){var a=this,r=a.config,o=a.hasArcType(),s=t.pos,c=s.cx,l=s.cy,u=s.xForText,d=s.yForText,g=[];if(!o){var h=t.type,f=h.area,p=h.bar,x=h.line;(r.grid_x_lines.length||r.grid_y_lines.length)&&g.push(a.redrawGrid(i)),r.regions.length&&g.push(a.redrawRegion(i)),a.hasTypeOf("Line")&&(g.push(a.redrawLine(x,i)),a.hasTypeOf("Area")&&g.push(a.redrawArea(f,i))),a.hasType("bar")&&g.push(a.redrawBar(p,i)),D(r.data_labels)&&g.push(a.redrawText(u,d,e,i))}return(!o||a.hasType("radar"))&&g.push(a.redrawCircle(c,l,i,n)),g}},{key:"updateAndRedraw",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this,i=n.config;e.withTransition=z(e,"withTransition",!0),e.withTransform=z(e,"withTransform",!1),e.withLegend=z(e,"withLegend",!1),e.withUpdateXDomain=!0,e.withUpdateOrgXDomain=!0,e.withTransitionForExit=!1,e.withTransitionForTransform=z(e,"withTransitionForTransform",e.withTransition),e.withLegend&&i.legend_show||(t=n.axis.generateTransitions(e.withTransitionForAxis?i.transition_duration:0),n.updateScales(),n.updateSvgSize(),n.transformAll(e.withTransitionForTransform,t)),n.redraw(e,t)}},{key:"redrawWithoutRescale",value:function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})}},{key:"isTimeSeries",value:function(){return"timeseries"===this.config.axis_x_type}},{key:"isCategorized",value:function(){return this.config.axis_x_type.indexOf("category")>=0||this.hasType("radar")}},{key:"isCustomX",value:function(){var t=this,e=t.config;return!t.isTimeSeries()&&(e.data_x||D(e.data_xs))}},{key:"isTimeSeriesY",value:function(){return"timeseries"===this.config.axis_y_type}},{key:"getTranslate",value:function(t){var e,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this,r=a.config,o=r.axis_rotated,s=0;if(i&&/^(x|y2?)$/.test(t)&&(s=a.getAxisSize(t)*i),"main"===t)e=L(a.margin.left),n=L(a.margin.top);else if("context"===t)e=L(a.margin2.left),n=L(a.margin2.top);else if("legend"===t)e=a.margin3.left,n=a.margin3.top;else if("x"===t)e=o?-s:0,n=o?0:a.height+s;else if("y"===t)e=o?0:-s,n=o?a.height+s:0;else if("y2"===t)e=o?0:a.width+s,n=o?1-s:0;else if("subx"===t)e=0,n=o?0:a.height2;else if("arc"===t)e=a.arcWidth/2,n=a.arcHeight/2;else if("radar"===t){var c=(a.arcWidth-a.arcHeight)/2;e=Math.max(c,0)+4,n=c<0?Math.abs(c):L(a.margin.top)}return"translate(".concat(e,", ").concat(n,")")}},{key:"initialOpacity",value:function(t){return null!==this.getBaseValue(t)&&this.withoutFadeIn[t.id]?"1":"0"}},{key:"initialOpacityForCircle",value:function(t){return null!==this.getBaseValue(t)&&this.withoutFadeIn[t.id]?this.opacityForCircle(t):"0"}},{key:"opacityForCircle",value:function(t){var e=this.config.point_show?"1":"0";return _(this.getBaseValue(t))?this.isBubbleType(t)||this.isScatterType(t)?"0.5":e:"0"}},{key:"opacityForText",value:function(){return this.hasDataLabel()?"1":"0"}},{key:"xx",value:function(t){var e=this.config.zoom_enabled&&this.zoomScale?this.zoomScale:this.x;return t?e(t.x):null}},{key:"xv",value:function(t){var e=this,n=e.getBaseValue(t);return e.isTimeSeries()?n=e.parseDate(n):e.isCategorized()&&b(n)&&(n=e.config.axis_x_categories.indexOf(n)),Math.ceil(e.x(n))}},{key:"yv",value:function(t){var e=this,n=t.axis&&"y2"===t.axis?e.y2:e.y;return Math.ceil(n(e.getBaseValue(t)))}},{key:"subxx",value:function(t){return t?this.subX(t.x):null}},{key:"transformMain",value:function(t,e){var n,i,a,r=this;e&&e.axisX?n=e.axisX:(n=r.main.select(".".concat(h.axisX)),t&&(n=n.transition())),e&&e.axisY?i=e.axisY:(i=r.main.select(".".concat(h.axisY)),t&&(i=i.transition())),e&&e.axisY2?a=e.axisY2:(a=r.main.select(".".concat(h.axisY2)),t&&(a=a.transition())),(t?r.main.transition():r.main).attr("transform",r.getTranslate("main")),n.attr("transform",r.getTranslate("x")),i.attr("transform",r.getTranslate("y")),a.attr("transform",r.getTranslate("y2")),r.main.select(".".concat(h.chartArcs)).attr("transform",r.getTranslate("arc"))}},{key:"transformAll",value:function(t,e){var n=this;n.transformMain(t,e),n.config.subchart_show&&n.transformContext(t,e),n.legend&&n.transformLegend(t)}},{key:"updateSvgSize",value:function(){var t=this,e=t.svg.select(".".concat(h.brush," .overlay")),n={width:0,height:0};e.size()&&(n.width=+e.attr("width"),n.height=+e.attr("height")),t.svg.attr("width",t.currentWidth).attr("height",t.currentHeight),t.svg.selectAll(["#".concat(t.clipId),"#".concat(t.clipIdForGrid)]).select("rect").attr("width",t.width).attr("height",t.height),t.svg.select("#".concat(t.clipIdForXAxis)).select("rect").attr("x",t.getXAxisClipX.bind(t)).attr("y",t.getXAxisClipY.bind(t)).attr("width",t.getXAxisClipWidth.bind(t)).attr("height",t.getXAxisClipHeight.bind(t)),t.svg.select("#".concat(t.clipIdForYAxis)).select("rect").attr("x",t.getYAxisClipX.bind(t)).attr("y",t.getYAxisClipY.bind(t)).attr("width",t.getYAxisClipWidth.bind(t)).attr("height",t.getYAxisClipHeight.bind(t)),t.svg.select("#".concat(t.clipIdForSubchart)).select("rect").attr("width",t.width).attr("height",n.height),t.svg.select(".".concat(h.zoomRect)).attr("width",t.width).attr("height",t.height)}},{key:"updateDimension",value:function(t){var e=this;t||(e.xAxis&&e.config.axis_rotated?(e.xAxis.create(e.axes.x),e.subXAxis.create(e.axes.subx)):(e.yAxis&&e.yAxis.create(e.axes.y),e.y2Axis&&e.y2Axis.create(e.axes.y2))),e.updateScales(t),e.updateSvgSize(),e.transformAll(!1)}},{key:"bindResize",value:function(){var t=this,e=t.config;t.resizeFunction=t.generateResize(),t.resizeFunction.add(e.onresize.bind(t)),e.resize_auto&&t.resizeFunction.add(function(){t.resizeTimeout&&(window.clearTimeout(t.resizeTimeout),t.resizeTimeout=null),t.resizeTimeout=window.setTimeout(function(){t.api.flush(!1,!0)},200)}),t.resizeFunction.add(e.onresized.bind(t)),window.addEventListener("resize",t.resizeFunction)}},{key:"generateResize",value:function(){function t(){e.forEach(function(t){return t()})}var e=[];return t.add=function(t){return e.push(t)},t.remove=function(t){return e.splice(e.indexOf(t),1)},t}},{key:"endall",value:function(t,e){var n=0;t.each(function(){return++n}).on("end",function(){for(var t=arguments.length,i=Array(t),a=0;a<t;a++)i[a]=arguments[a];--n||e.apply.apply(e,[this].concat(i))})}},{key:"generateWait",value:function(){var t=[],e=function(e,n){function i(){var e=0;t.forEach(function(t){if(t.empty())e++;else try{t.transition()}catch(n){e++}}),a&&clearTimeout(a),e===t.length?n&&n():a=setTimeout(i,50)}var a;i()};return e.add=function(e){R(e)?t=t.concat(e):t.push(e)},e}},{key:"parseDate",value:function(t){var e,n=this;return t instanceof Date?e=t:b(t)?e=n.dataTimeFormat(n.config.data_xFormat)(t):T(t)&&!isNaN(t)&&(e=new Date(+t)),(!e||isNaN(+e))&&console&&console.error&&console.error("Failed to parse x '".concat(t,"' to Date object")),e}},{key:"isTabVisible",value:function(){return!document[["hidden","mozHidden","msHidden","webkitHidden"].filter(function(t){return t in document})[0]]}},{key:"convertInputType",value:function(){var t=this,e=t.config,n=t.isMobile(),i=e.interaction_inputType_mouse&&!n&&"onmouseover"in window,a=!1;return e.interaction_inputType_touch&&(a="ontouchmove"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),(i?"mouse":a&&"touch")||null}}]),t}(),ot=function t(e){a()(this,t);var n=new rt(this);this.internal=n,n.loadConfig(e),n.beforeInit(e),n.init(),this.$=n.getChartElements(),n.afterInit(e),function t(e,n,i){Object.keys(e).forEach(function(a){n[a]=e[a].bind(i),Object.keys(e[a]).length&&t(e[a],n[a],i)})}(t.prototype,this,this)},st=function t(){return a()(this,t),{bindto:"#chart",clipPath:!0,svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:void 0,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:void 0,zoom_onzoomstart:void 0,zoom_onzoomend:void 0,zoom_resetButton:!0,zoom_x_min:void 0,zoom_x_max:void 0,interaction_enabled:!0,interaction_brighten:!0,interaction_inputType_mouse:!0,interaction_inputType_touch:{},onover:function(){},onout:function(){},onresize:function(){},onresized:function(){},onbeforeinit:void 0,oninit:function(){},onafterinit:void 0,onrendered:void 0,transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(t){return t},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_labels_position:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_stack_normalize:!1,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onover:function(){},data_onout:function(){},data_onselected:function(){},data_onunselected:function(){},data_onmin:void 0,data_onmax:void 0,data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_axis_x_tick_show:!0,subchart_axis_x_tick_text_show:!0,subchart_onbrush:function(){},color_pattern:[],color_tiles:void 0,color_threshold:{},color_onover:void 0,legend_show:!0,legend_hide:!1,legend_contents_bindto:void 0,legend_contents_template:void 0,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onover:void 0,legend_item_onout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,legend_usePoint:!1,axis_rotated:!1,axis_x_clipPath:!0,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_show:!0,axis_x_tick_text_show:!0,axis_x_tick_text_position:{x:0,y:0},axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_tick_tooltip:!1,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_axes:[],axis_y_clipPath:!0,axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:!1,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_show:!0,axis_y_tick_text_show:!0,axis_y_tick_text_position:{x:0,y:0},axis_y_tick_time_value:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y_axes:[],axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:!1,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_tick_show:!0,axis_y2_tick_text_show:!0,axis_y2_tick_text_position:{x:0,y:0},axis_y2_padding:{},axis_y2_default:void 0,axis_y2_axes:[],grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_front:!1,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_pattern:[],point_select_r:void 0,point_type:"circle",line_connectNull:!1,line_step_type:"step",line_classes:void 0,line_point:!0,bar_padding:0,bar_radius:void 0,bar_radius_ratio:void 0,bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,bubble_maxR:35,area_zerobased:!0,area_above:!1,area_linearGradient:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,pie_innerRadius:0,pie_padAngle:0,pie_padding:0,gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_label_extents:void 0,gauge_units:void 0,gauge_width:void 0,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,donut_padAngle:0,spline_interpolation_type:"cardinal",radar_axis_max:void 0,radar_axis_line_show:!0,radar_axis_text_show:!0,radar_level_depth:3,radar_level_show:!0,radar_level_text_format:function(t){return t%1===0?t:t.toFixed(2)},radar_level_text_show:!0,radar_size_ratio:.87,radar_direction_clockwise:!1,regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(t,e,n,i){return this.getTooltipContent?this.getTooltipContent(t,e,n,i):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_linked:!1,tooltip_linked_name:"",tooltip_onshow:function(){},tooltip_onhide:function(){},tooltip_onshown:function(){},tooltip_onhidden:function(){},tooltip_order:null,title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"center"}};N(rt.prototype,{getOptions:function(){return new st},loadConfig:function(t){var e,n,i,a=this.config,r=function(){var t=n.shift();return t&&e&&O(e)&&t in e?(e=e[t],r()):t?void 0:e};Object.keys(a).forEach(function(o){e=t,n=o.split("_"),i=r(),A(i)&&(a[o]=i)})}}),N(rt.prototype,{getScale:function(t,e,n){return(n?Object(Q["scaleTime"])():Object(Q["scaleLinear"])()).range([t,e])},getX:function(t,e,n,i){var a=this,r=a.zoomScale||a.getScale(t,e,a.isTimeSeries());return a.getCustomizedScale(n?r.domain(n):r,i)},getY:function(t,e,n){var i=this.getScale(t,e,this.isTimeSeriesY());return n&&i.domain(n),i},getCustomizedScale:function(t,e){var n=this,i=e||function(){return n.xAxis.tickOffset()},a=function(e,n){var a=t(e)+i();return n?a:Math.ceil(a)};for(var r in t)a[r]=t[r];return a.orgDomain=function(){return t.domain()},a.orgScale=function(){return t},n.isCategorized()&&(a.domain=function(e){var n=e;return arguments.length?(t.domain(n),a):(n=this.orgDomain(),[n[0],n[1]+1])}),a},getYScale:function(t){return"y2"===this.axis.getId(t)?this.y2:this.y},getSubYScale:function(t){return"y2"===this.axis.getId(t)?this.subY2:this.subY},updateScales:function(t){var e=this,n=e.config,i=n.axis_rotated;e.xMin=i?1:0,e.xMax=i?e.height:e.width,e.yMin=i?0:e.height,e.yMax=i?e.width:1,e.subXMin=e.xMin,e.subXMax=e.xMax,e.subYMin=i?0:e.height2,e.subYMax=i?e.width2:1,e.x=e.getX(e.xMin,e.xMax,e.x&&e.x.orgDomain(),function(){return e.xAxis.tickOffset()}),e.subX=e.getX(e.xMin,e.xMax,e.orgXDomain,function(t){return t%1?0:e.subXAxis.tickOffset()}),e.xAxisTickFormat=e.axis.getXAxisTickFormat(),e.xAxisTickValues=e.axis.getXAxisTickValues(),e.xAxis=e.axis.getXAxis("x",e.x,n.axis_x_tick_outer,t),e.subXAxis=e.axis.getXAxis("subX",e.subX,n.axis_x_tick_outer,t),e.y=e.getY(e.yMin,e.yMax,e.y?e.y.domain():n.axis_y_default),e.subY=e.getY(e.subYMin,e.subYMax,e.subY?e.subY.domain():n.axis_y_default),e.yAxisTickValues=e.axis.getYAxisTickValues(),e.yAxis=e.axis.getYAxis("y",e.y,n.axis_y_tick_outer,t),n.axis_y2_show&&(e.y2=e.getY(e.yMin,e.yMax,e.y2?e.y2.domain():n.axis_y2_default),e.subY2=e.getY(e.subYMin,e.subYMax,e.subY2?e.subY2.domain():n.axis_y2_default),e.y2AxisTickValues=e.axis.getY2AxisTickValues(),e.y2Axis=e.axis.getYAxis("y2",e.y2,n.axis_y2_tick_outer,t)),e.updateArc&&e.updateArc()}}),N(rt.prototype,{getYDomainMinMax:function(t,e){var n=this,i=n.config,a="min"===e,r=i.data_groups,o=n.mapToIds(t),s=n.getValuesAsIdKeyed(t);return r.length>0&&function(){for(var e,i=n["has".concat(a?"Negative":"Positive","ValueInTargets")](t),c=function(t,r){if(r=r.filter(function(t){return o.indexOf(t)>=0}),0===r.length)return e=r,"continue";var c=r[0],l=n.axis.getId(c);i&&s[c]&&(s[c]=s[c].map(function(t){return(a?t<0:t>0)?t:0}));for(var u,d=function(t,e){if(!s[e])return"continue";var r=n.axis.getId(e);s[e].forEach(function(t,e){var n=+t,o=a?n>0:n<0;r!==l||i&&o||(s[c][e]+=n)})},g=1;u=r[g];g++)d(g,u);e=r},l=0;e=r[l];l++)c(l,e)}(),q(e,Object.keys(s).map(function(t){return q(e,s[t])}))},getYDomainMin:function(t){return this.getYDomainMinMax(t,"min")},getYDomainMax:function(t){return this.getYDomainMinMax(t,"max")},getYDomain:function(t,e,n){var i=this,a=i.config;if(i.isStackNormalized())return[0,100];var r,o=t.filter(function(t){return i.axis.getId(t.id)===e}),s=n?i.filterByXDomain(o,n):o,c="y2"===e?a.axis_y2_min:a.axis_y_min,l="y2"===e?a.axis_y2_max:a.axis_y_max,u=i.getYDomainMin(s),d=i.getYDomainMax(s),g="y2"===e?a.axis_y2_center:a.axis_y_center,h=i.hasType("bar",s)&&a.bar_zerobased||i.hasType("area",s)&&a.area_zerobased,f="y2"===e?a.axis_y2_inverted:a.axis_y_inverted,p=i.hasDataLabel()&&a.axis_rotated,x=i.hasDataLabel()&&!a.axis_rotated;if(u=_(c)?c:_(l)?u<l?u:l-10:u,d=_(l)?l:_(c)?c<d?d:c+10:d,0===s.length)return"y2"===e?i.y2.domain():i.y.domain();isNaN(u)&&(u=0),isNaN(d)&&(d=u),u===d&&(u<0?d=0:u=0);var v=u>=0&&d>=0,m=u<=0&&d<=0;(_(c)&&v||_(l)&&m)&&(h=!1),h&&(v&&(u=0),m&&(d=0));var y=Math.abs(d-u),b=.1*y,T=.1*y;if(A(g)){var w=Math.max(Math.abs(u),Math.abs(d));d=g+w,u=g-w}if(p){r=i.getDataLabelLength(u,d,"width");var k=C(i.y.range()),S=[r[0]/k,r[1]/k];b+=y*(S[1]/(1-S[0]-S[1])),T+=y*(S[0]/(1-S[0]-S[1]))}else x&&(r=i.getDataLabelLength(u,d,"height"),b+=i.axis.convertPixelsToAxisPadding(r[1],y),T+=i.axis.convertPixelsToAxisPadding(r[0],y));"y"===e&&D(a.axis_y_padding)&&(b=i.axis.getPadding(a.axis_y_padding,"top",b,y),T=i.axis.getPadding(a.axis_y_padding,"bottom",T,y)),"y2"===e&&D(a.axis_y2_padding)&&(b=i.axis.getPadding(a.axis_y2_padding,"top",b,y),T=i.axis.getPadding(a.axis_y2_padding,"bottom",T,y)),h&&(v&&(T=u),m&&(b=-d));var L=[u-T,d+b];return f?L.reverse():L},getXDomainMinMax:function(t,e){var n=this,i=n.config["axis_x_".concat(e)];return A(i)?n.isTimeSeries()?n.parseDate(i):i:q(e,t.map(function(t){return q(e,t.values.map(function(t){return t.x}))}))},getXDomainMin:function(t){return this.getXDomainMinMax(t,"min")},getXDomainMax:function(t){return this.getXDomainMinMax(t,"max")},getXDomainPadding:function(t){var e,n,i=this,a=i.config,r=t[1]-t[0],o=a.axis_x_padding;i.isCategorized()?n=0:i.hasType("bar")?(e=i.getMaxDataCount(),n=e>1?r/(e-1)/2:.5):n=.01*r;var s=n,c=n;return F(o)&&D(o)?(s=_(o.left)?o.left:n,c=_(o.right)?o.right:n):T(a.axis_x_padding)&&(s=o,c=o),{left:s,right:c}},getXDomain:function(t){var e=this,n=[e.getXDomainMin(t),e.getXDomainMax(t)],i=n[0],a=n[1],r=e.getXDomainPadding(n),o=0,s=0;return i-a!==0||e.isCategorized()||(e.isTimeSeries()?(i=new Date(.5*i.getTime()),a=new Date(1.5*a.getTime())):(i=0===i?1:.5*i,a=0===a?-1:1.5*a)),(i||0===i)&&(o=e.isTimeSeries()?new Date(i.getTime()-r.left):i-r.left),(a||0===a)&&(s=e.isTimeSeries()?new Date(a.getTime()+r.right):a+r.right),[o,s]},updateXDomain:function(t,e,n,i,a){var r=this,o=r.config,s=o.zoom_enabled;if(n&&(r.x.domain(a||$(r.getXDomain(t))),r.orgXDomain=r.x.domain(),s&&r.zoom.updateScaleExtent(),r.subX.domain(r.x.domain()),r.brush&&r.brush.scale(r.subX)),e){var c=a||!r.brush||V(r)?r.orgXDomain:Y(r).map(r.subX.invert);r.x.domain(c),s&&r.zoom.updateScaleExtent()}return i&&r.x.domain(r.trimXDomain(r.x.orgDomain())),r.x.domain()},trimXDomain:function(t){var e=this.getZoomDomain(),n=e[0],i=e[1];return t[0]<=n&&(t[1]=+t[1]+(n-t[0]),t[0]=n),i<=t[1]&&(t[0]=+t[0]-(t[1]-i),t[1]=i),t}}),N(rt.prototype,{isX:function(t){var e=this,n=e.config,i=n.data_x&&t===n.data_x,a=D(n.data_xs)&&E(n.data_xs,t);return i||a},isNotX:function(t){return!this.isX(t)},isStackNormalized:function(){var t=this.config;return t.data_stack_normalize&&t.data_groups.length},isGrouped:function(t){return this.config.data_groups.map(function(e){return e.indexOf(t)>=0})[0]},getXKey:function(t){var e=this,n=e.config;return n.data_x?n.data_x:D(n.data_xs)?n.data_xs[t]:null},getXValuesOfXKey:function(t,e){var n,i=this,a=e&&D(e)?i.mapToIds(e):[];return a.forEach(function(e){i.getXKey(e)===t&&(n=i.data.xs[e])}),n},getIndexByX:function(t,e){var n=this;return e?e.indexOf(b(t)?t:+t):(n.filterByX(n.data.targets,t)[0]||{index:null}).index},getXValue:function(t,e){var n=this;return t in n.data.xs&&n.data.xs[t]&&_(n.data.xs[t][e])?n.data.xs[t][e]:e},getOtherTargetXs:function(){var t=this,e=Object.keys(t.data.xs);return e.length?t.data.xs[e[0]]:null},getOtherTargetX:function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},addXs:function(t){var e=this;Object.keys(t).forEach(function(n){e.config.data_xs[n]=t[n]})},hasMultipleX:function(t){return Object.keys(t).map(function(e){return t[e]}).length>1},isMultipleX:function(){return D(this.config.data_xs)||!this.config.data_xSort||this.hasType("bubble")||this.hasType("scatter")},addName:function(t){var e,n=this;return t&&(e=n.config.data_names[t.id],t.name=void 0===e?t.id:e),t},getAllValuesOnIndex:function(t){var e=this;return e.filterTargetsToShow(e.data.targets).map(function(n){return e.addName(e.getValueOnIndex(n.values,t))})},getValueOnIndex:function(t,e){var n=t.filter(function(t){return t.index===e});return n.length?n[0]:null},updateTargetX:function(t,e){var n=this;t.forEach(function(t){t.values.forEach(function(i,a){i.x=n.generateTargetX(e[a],t.id,a)}),n.data.xs[t.id]=e})},updateTargetXs:function(t,e){var n=this;t.forEach(function(t){e[t.id]&&n.updateTargetX([t],e[t.id])})},generateTargetX:function(t,e,n){var i=this,a=i.isCategorized()?n:t||n;return i.isTimeSeries()?a=t?i.parseDate(t):i.parseDate(i.getXValue(e,n)):i.isCustomX()&&!i.isCategorized()&&(a=_(t)?+t:i.getXValue(e,n)),a},cloneTarget:function(t){return{id:t.id,id_org:t.id_org,values:t.values.map(function(t){return{x:t.x,value:t.value,id:t.id}})}},updateXs:function(){var t=this,e=t.data.targets;e.length&&(t.xs=[],e[0].values.forEach(function(e){t.xs[e.index]=e.x}))},getPrevX:function(t){var e=this.xs[t-1];return A(e)?e:null},getNextX:function(t){var e=this.xs[t+1];return A(e)?e:null},getBaseValue:function(t){var e=this,n=t.value;return n&&e.isAreaRangeType(t)&&(n=e.getAreaRangeData(t,"mid")),n},getMinMaxValue:function(t){var e,n,i=this.getBaseValue.bind(this);return(t||this.data.targets.map(function(t){return t.values})).forEach(function(t,a){var r=t.map(i).filter(T);e=Math.min.apply(Math,[a?e:1/0].concat(p()(r))),n=Math.max.apply(Math,[a?n:-1/0].concat(p()(r)))}),{min:e,max:n}},getMinMaxData:function(){var t=this,e="$minMaxData",n=t.getCache(e);if(!n){var i=t.data.targets.map(function(t){return t.values}),a=t.getMinMaxValue(i),r=[],o=[];i.forEach(function(e){var n=t.getFilteredDataByValue(e,a.min),i=t.getFilteredDataByValue(e,a.max);n.length&&(r=r.concat(n)),i.length&&(o=o.concat(i))}),t.addCache(e,n={min:r,max:o})}return n},getTotalPerIndex:function(){var t=this,e=t.getCache("$totalPerIndex");return t.isStackNormalized()&&!e&&(e=[],t.data.targets.forEach(function(t){t.values.forEach(function(t,n){e[n]||(e[n]=0),e[n]+=T(t.value)?t.value:0})})),e},getTotalDataSum:function(){var t=this,e="$totalDataSum",n=t.getCache(e);if(!n){var i=Z(t.data.targets.map(function(t){return t.values})).map(function(t){return t.value}).reduce(function(t,e){return t+e});t.addCache(e,n=i)}return n},getFilteredDataByValue:function(t,e){var n=this;return t.filter(function(t){return n.getBaseValue(t)===e})},getMaxDataCount:function(){return Math.max.apply(Math,p()(this.data.targets.map(function(t){return t.values.length})))},getMaxDataCountTarget:function(t){var e,n=t.length,i=0;return n>1?t.forEach(function(t){t.values.length>i&&(e=t,i=t.values.length)}):e=n?t[0]:null,e},mapToIds:function(t){return t.map(function(t){return t.id})},mapToTargetIds:function(t){var e=this;return t?R(t)?t.concat():[t]:e.mapToIds(e.data.targets)},hasTarget:function(t,e){for(var n,i=this.mapToIds(t),a=0;n=i[a];a++)if(n===e)return!0;return!1},isTargetToShow:function(t){return this.hiddenTargetIds.indexOf(t)<0},isLegendToShow:function(t){return this.hiddenLegendIds.indexOf(t)<0},filterTargetsToShow:function(t){var e=this;return t.filter(function(t){return e.isTargetToShow(t.id)})},mapTargetsToUniqueXs:function(t){var e=this,n=[];return t&&t.length&&(n=U(Z(t.map(function(t){return t.values.map(function(t){return+t.x})}))),n=e.isTimeSeries()?n.map(function(t){return new Date(+t)}):n.map(function(t){return+t})),$(n)},addHiddenTargetIds:function(t){this.hiddenTargetIds=this.hiddenTargetIds.concat(t)},removeHiddenTargetIds:function(t){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(e){return t.indexOf(e)<0})},addHiddenLegendIds:function(t){this.hiddenLegendIds=this.hiddenLegendIds.concat(t)},removeHiddenLegendIds:function(t){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(e){return t.indexOf(e)<0})},getValuesAsIdKeyed:function(t){var e=this,n={},i=e.isMultipleX(),a=i?e.mapTargetsToUniqueXs(t).map(function(t){return b(t)?t:+t}):null;return t.forEach(function(t){var r=[];t.values.forEach(function(t){var n=t.value;R(n)?r.push.apply(r,p()(n)):F(n)&&"high"in n?r.push.apply(r,p()(Object.values(n))):i?r[e.getIndexByX(t.x,a)]=n:r.push(n)}),n[t.id]=r}),n},checkValueInTargets:function(t,e){for(var n,i=Object.keys(t),a=0;a<i.length;a++){n=t[i[a]].values;for(var r=0;r<n.length;r++)if(e(n[r].value))return!0}return!1},hasNegativeValueInTargets:function(t){return this.checkValueInTargets(t,function(t){return t<0})},hasPositiveValueInTargets:function(t){return this.checkValueInTargets(t,function(t){return t>0})},_checkOrder:function(t){var e=this.config;return b(e.data_order)&&e.data_order.toLowerCase()===t},isOrderDesc:function(){return this._checkOrder("desc")},isOrderAsc:function(){return this._checkOrder("asc")},orderTargets:function(t){var e=this,n=e.config,i=p()(t),a=e.isOrderAsc(),r=e.isOrderDesc();return a||r?i.sort(function(t,e){var n=function(t,e){return t+Math.abs(e.value)},i=t.values.reduce(n,0),r=e.values.reduce(n,0);return a?r-i:i-r}):y(n.data_order)&&i.sort(n.data_order),i},filterByX:function(t,e){return Z(t.map(function(t){return t.values})).filter(function(t){return t.x-e===0})},filterRemoveNull:function(t){var e=this;return t.filter(function(t){return _(e.getBaseValue(t))})},filterByXDomain:function(t,e){return t.map(function(t){return{id:t.id,id_org:t.id_org,values:t.values.filter(function(t){return e[0]<=t.x&&t.x<=e[1]})}})},hasDataLabel:function(){var t=this.config.data_labels;return k(t)&&t||O(t)&&D(t)},getDataLabelLength:function(t,e,n){var i=this,a=[0,0];return i.selectChart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text(function(t){return i.dataLabelFormat(t.id)(t)}).each(function(t,e){a[e]=1.3*this.getBoundingClientRect()[n]}).remove(),a},isNoneArc:function(t){return this.hasTarget(this.data.targets,t.id)},isArc:function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},findSameXOfValues:function(t,e){var n,i=t[e].x,a=[];for(n=e-1;n>=0&&i===t[n].x;n--)a.push(t[n]);for(n=e;n<t.length&&i===t[n].x;n++)a.push(t[n]);return a},findClosestFromTargets:function(t,e){var n=this,i=t.map(function(t){return n.findClosest(t.values,e)});return n.findClosest(i,e)},findClosest:function(t,e){var n,i=this,a=i.config.point_sensitivity;return t.filter(function(t){return t&&i.isBarType(t.id)}).forEach(function(t){var e=i.main.select(".".concat(h.bars).concat(i.getTargetSelectorSuffix(t.id)," .").concat(h.bar,"-").concat(t.index)).node();!n&&i.isWithinBar(e)&&(n=t)}),t.filter(function(t){return t&&!i.isBarType(t.id)}).forEach(function(t){var r=i.dist(t,e);r<a&&(a=r,n=t)}),n},dist:function(t,e){var n=this,i=n.config.axis_rotated,a=i?1:0,r=i?0:1,o=n.circleY(t,t.index),s=n.x(t.x);return Math.sqrt(Math.pow(s-e[a],2)+Math.pow(o-e[r],2))},convertValuesToStep:function(t){var e=this,n=e.config,i=n.axis_rotated,a=n.line_step_type,r=e.isCategorized(),o=R(t)?t.concat():[t];if(!i&&!r)return t;var s=o[0].id,c=o[0].x-1,l=o[0].value;return r&&o.unshift({x:c,value:l,id:s}),"step-after"===a&&o.unshift({x:c-1,value:l,id:s}),c=o.length,l=o[c-1].value,r&&o.push({x:c,value:l,id:s}),"step-before"===a&&o.push({x:c+1,value:l,id:s}),o},convertValuesToRange:function(t){var e=R(t)?t.concat():[t],n=[];return e.forEach(function(t){var e=t.x,i=t.id;n.push({x:e,id:i,value:t.value[0]}),n.push({x:e,id:i,value:t.value[2]})}),n},updateDataAttributes:function(t,e){var n=this,i=n.config,a=i["data_".concat(t)];return w(e)?a:(Object.keys(e).forEach(function(t){a[t]=e[t]}),n.redraw({withLegend:!0}),a)},getAreaRangeData:function(t,e){var n=t.value;if(R(n)){var i=["high","mid","low"].indexOf(e);return-1===i?null:n[i]}return n[e]},getRatio:function(t,e,n){var i=this,a=i.config,r=i.api,o=0;if(e&&r.data.shown.call(r).length){var s=r.data.values.bind(r);if(o=e.ratio||e.value,"arc"===t)if(i.pie.padAngle()()){var c=i.getTotalDataSum();i.hiddenTargetIds.length&&(c-=s(i.hiddenTargetIds).reduce(function(t,e){return t+e})),o=e.value/c}else o=(e.endAngle-e.startAngle)/(Math.PI*(i.hasType("gauge")&&!a.gauge_fullCircle?1:2));else if("index"===t){var l=this.getTotalPerIndex();if(i.hiddenTargetIds.length){var u=s(i.hiddenTargetIds,!1);u.length&&(u=u.reduce(function(t,e){return t.map(function(t,n){return(T(t)?t:0)+e[n]})}),l=l.map(function(t,e){return t-u[e]}))}e.ratio=T(e.value)&&l&&l[e.index]>0?e.value/l[e.index]:0,o=e.ratio}else"radar"===t&&(o=parseFloat(Math.max(e.value,0))/i.maxValue*a.radar_size_ratio)}return n&&o?100*o:o}});var ct=n(17);N(rt.prototype,{convertData:function(t,e){var n,i=this;if(t.bindto?(n={},["url","mimeType","headers","keys","json","keys","rows","columns"].forEach(function(e){var i="data_".concat(e);i in t&&(n[e]=t[i])})):n=t,n.url&&e)i.convertUrlToData(n.url,n.mimeType,n.headers,n.keys,e);else if(n.json)n=i.convertJsonToData(n.json,n.keys);else if(n.rows)n=i.convertRowsToData(n.rows);else if(n.columns)n=i.convertColumnsToData(n.columns);else if(t.bindto)throw Error("url or json or rows or columns is required.");return n},convertUrlToData:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"csv",i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,o=new XMLHttpRequest;i&&Object.keys(i).forEach(function(t){o.setRequestHeader(t,i[t])}),o.open("GET",t),o.onreadystatechange=function(){if(4===o.readyState){if(200!==o.status)throw new Error("".concat(t,": Something went wrong loading!"));var i=o.responseText;i&&r.call(e,e["convert".concat(G(n),"ToData")]("json"===n?JSON.parse(i):i,a))}},o.send()},_convertCsvTsvToData:function(t,e){var n,i=t.rows(e);return 1===i.length?(n=[{}],i[0].forEach(function(t){n[0][t]=null})):n=t.parse(e),n},convertCsvToData:function(t){return this._convertCsvTsvToData({rows:ct["csvParseRows"],parse:ct["csvParse"]},t)},convertTsvToData:function(t){return this._convertCsvTsvToData({rows:ct["tsvParseRows"],parse:ct["tsvParse"]},t)},convertJsonToData:function(t,e){var n,i,a=this,r=this.config,o=[];if(R(t)){var s=e||r.data_keys;s.x?(n=s.value.concat(s.x),r.data_x=s.x):n=s.value,o.push(n),t.forEach(function(t){var e=n.map(function(e){var n=a.findValueInJson(t,e);return w(n)&&(n=null),n});o.push(e)}),i=this.convertRowsToData(o)}else Object.keys(t).forEach(function(e){var n=t[e].concat();n.unshift(e),o.push(n)}),i=this.convertColumnsToData(o);return i},findValueInJson:function(t,e){if(void 0!==t[e])return t[e];var n=e.replace(/\[(\w+)\]/g,".$1"),i=n.replace(/^\./,"").split("."),a=t;return i.some(function(t){return!(a=a&&t in a?a[t]:void 0)}),a},convertRowsToData:function(t){for(var e=t[0],n=[],i=1,a=t.length;i<a;i++){for(var r={},o=0,s=t[i].length;o<s;o++){if(w(t[i][o]))throw new Error("Source data is missing a component at (".concat(i,", ").concat(o,")!"));r[e[o]]=t[i][o]}n.push(r)}return n},convertColumnsToData:function(t){for(var e=[],n=0,i=t.length;n<i;n++)for(var a=t[n][0],r=1,o=t[n].length;r<o;r++){if(w(e[r-1])&&(e[r-1]={}),w(t[n][r]))throw new Error("Source data is missing a component at (".concat(n,", ").concat(r,")!"));e[r-1][a]=t[n][r]}return e},convertDataToTargets:function(t,e){var n,i=this,a=this,r=a.config,o=Object.keys(t[0]||{}),s=o.length?o.filter(a.isNotX,a):[],c=o.length?o.filter(a.isX,a):[];s.forEach(function(o){var s=i.getXKey(o);i.isCustomX()||i.isTimeSeries()?c.indexOf(s)>=0?n=(e&&a.data.xs[o]||[]).concat(t.map(function(t){return t[s]}).filter(_).map(function(t,e){return a.generateTargetX(t,o,e)})):r.data_x?n=i.getOtherTargetXs():D(r.data_xs)&&(n=a.getXValuesOfXKey(s,a.data.targets)):n=t.map(function(t,e){return e}),n&&(i.data.xs[o]=n)}),s.forEach(function(t){if(!n)throw new Error('x is not defined for id = "'.concat(t,'".'))});var l=s.map(function(e,n){var i=r.data_idConverter(e),o=a.getXKey(e),s=a.isCustomX()&&a.isCategorized(),c=s&&t.map(function(t){return t.x}).every(function(t){return r.axis_x_categories.indexOf(t)>-1});return{id:i,id_org:e,values:t.map(function(t,l){var u,d=t[o],g=t[e];return g=null===g||isNaN(g)?R(g)||F(g)&&g.high?g:null:+t[e],s&&0===n&&!w(d)?(!c&&0===n&&0===l&&(r.axis_x_categories=[]),u=r.axis_x_categories.indexOf(d),-1===u&&(u=r.axis_x_categories.length,r.axis_x_categories.push(d))):u=a.generateTargetX(d,e,l),(w(t[e])||a.data.xs[e].length<=l)&&(u=void 0),{x:u,value:g,id:i}}).filter(function(t){return A(t.x)})}});return l.forEach(function(t){r.data_xSort&&(t.values=t.values.sort(function(t,e){var n=t.x||0===t.x?t.x:1/0,i=e.x||0===e.x?e.x:1/0;return n-i})),t.values.forEach(function(t,e){var n=a.data.targets?a.getIndexByX(t.x):null;t.index=null===n?e:n}),a.data.xs[t.id].sort(function(t,e){return t-e})}),a.hasNegativeValue=a.hasNegativeValueInTargets(l),a.hasPositiveValue=a.hasPositiveValueInTargets(l),r.data_type&&a.setTargetType(a.mapToIds(l).filter(function(t){return!(t in r.data_types)}),r.data_type),l.forEach(function(t){return a.addCache(t.id_org,t,!0)}),l}}),N(rt.prototype,{load:function(t,e){var n=this,i=t;i&&(e.filter&&(i=i.filter(e.filter)),(e.type||e.types)&&i.forEach(function(t){var i=e.types&&e.types[t.id]||e.type;n.setTargetType(t.id,i)}),n.data.targets.forEach(function(t){for(var e=0;e<i.length;e++)if(t.id===i[e].id){t.values=i[e].values,i.splice(e,1);break}}),n.data.targets=n.data.targets.concat(i)),n.updateTargets(n.data.targets),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),e.done&&e.done()},loadFromArgs:function(t){var e,n=this;n.config&&(n.resetCache(),e=t.data?t.data:n.convertData(t,function(e){return n.load(n.convertDataToTargets(e),t)}),n.load(e?n.convertDataToTargets(e):null,t))},unload:function(t,e){var n=this,i=e,a=t;return n.resetCache(),i||(i=function(){}),a=a.filter(function(t){return n.hasTarget(n.data.targets,t)}),a&&0!==a.length?(n.svg.selectAll(a.map(function(t){return n.selectorTarget(t)})).transition().style("opacity","0").remove().call(n.endall,i),void a.forEach(function(t){n.withoutFadeIn[t]=!1,n.legend&&n.legend.selectAll(".".concat(h.legendItem).concat(n.getTargetSelectorSuffix(t))).remove(),n.data.targets=n.data.targets.filter(function(e){return e.id!==t})})):void i()}}),N(rt.prototype,{categoryName:function(t){var e=this.config;return t<e.axis_x_categories.length?e.axis_x_categories[t]:t}});var lt=n(18);N(rt.prototype,{initEventRect:function(){var t=this;t.main.select(".".concat(h.chart)).append("g").attr("class",h.eventRects).style("fill-opacity","0")},redrawEventRect:function(){var t,e=this,n=e.config,i=n.zoom_enabled,a=e.isMultipleX(),r=e.main.select(".".concat(h.eventRects)).style("cursor",!i||!0!==i&&"wheel"!==i.type?null:n.axis_rotate?"ns-resize":"ew-resize").classed(h.eventRectsMultiple,a).classed(h.eventRectsSingle,!a);if(r.selectAll(".".concat(h.eventRect)).remove(),e.eventRect=r.selectAll(".".concat(h.eventRect)),a)t=e.eventRect.data([0]),t=e.generateEventRectsForMultipleXs(t.enter()).merge(t);else{var o=e.getMaxDataCountTarget(e.data.targets);r.datum(o?o.values:[]),e.eventRect=r.selectAll(".".concat(h.eventRect)),t=e.eventRect.data(function(t){return t}),t.exit().remove(),t=e.generateEventRectsForSingleX(t.enter()).merge(t)}e.updateEventRect(t),"touch"!==e.inputType||e.svg.on("touchstart.eventRect")||e.hasArcType()||e.bindTouchOnEventRect(a)},bindTouchOnEventRect:function(t){var e,n=this,i=n.config,a=function(){var t=u["event"].changedTouches[0];return Object(u["select"])(document.elementFromPoint(t.clientX,t.clientY))},r=function(t){var e=t&&t.attr("class")&&1*t.attr("class").replace(new RegExp("(".concat(h.eventRect,"-?|s)"),"g"),"");return(isNaN(e)||null===e)&&(e=-1),e},o=function(e){if(t)n.selectRectForMultipleXs(e);else{var i=a(),o=r(i);n.callOverOutForTouch(o),-1===o?n.unselectRect():n.selectRectForSingle(e,i,o)}},s=i.interaction_inputType_touch.preventDefault,c=k(s)&&s||!1,l=!isNaN(s)&&s||null,d=function(t){var n=t.type,a=t.changedTouches[0],r=a["client".concat(i.axis_rotated?"Y":"X")];"touchstart"===n?c?t.preventDefault():null!==l&&(e=r):"touchmove"===n&&(c||!0===e||null!==l&&Math.abs(e-r)>=l)&&(e=!0,t.preventDefault())};n.svg.on("touchstart.eventRect touchmove.eventRect",function(){var t=a();if(!t.empty()&&t.classed(h.eventRect)){if(n.dragging||n.flowing||n.hasArcType())return;d(u["event"]),o(this)}else n.unselectRect(),n.callOverOutForTouch()}).on("touchend.eventRect",function(){var t=a();!t.empty()&&t.classed(h.eventRect)&&(n.hasArcType()||!n.toggleShape||n.cancelClick)&&n.cancelClick&&(n.cancelClick=!1)})},updateEventRect:function(t){var e,n,i,a,r=this,o=r.config,s=r.zoomScale||r.x,c=t||r.eventRect.data(),l=o.axis_rotated;if(r.isMultipleX())e=0,n=0,i=r.width,a=r.height;else{var u,d;if(r.isCategorized())u=r.getEventRectWidth(),d=function(t){return s(t.x)-u/2};else{r.updateXs();var g=function(t){var e=t.index;return{prev:r.getPrevX(e),next:r.getNextX(e)}};u=function(t){var e=g(t);return null===e.prev&&null===e.next?l?r.height:r.width:(null===e.prev&&(e.prev=s.domain()[0]),null===e.next&&(e.next=s.domain()[1]),Math.max(0,(s(e.next)-s(e.prev))/2))},d=function(t){var e=g(t),n=r.data.xs[t.id][t.index];return null===e.prev&&null===e.next?0:(null===e.prev&&(e.prev=s.domain()[0]),(s(n)+s(e.prev))/2)}}e=l?0:d,n=l?d:0,i=l?r.width:u,a=l?u:r.height}c.attr("class",r.classEvent.bind(r)).attr("x",e).attr("y",n).attr("width",i).attr("height",a)},selectRectForSingle:function(t,e,n){var i=this,a=i.config,r=a.data_selection_enabled,o=a.data_selection_grouped,s=a.tooltip_grouped,c=i.getAllValuesOnIndex(n);s&&(i.showTooltip(c,t),i.showXGridFocus(c),!r||o)||i.main.selectAll(".".concat(h.shape,"-").concat(n)).each(function(){Object(u["select"])(this).classed(h.EXPANDED,!0),r&&e.style("cursor",o?"pointer":null),s||(i.hideXGridFocus(),i.hideTooltip(),!o&&i.expandCirclesBars(n))}).filter(function(t){return i.isWithinShape(this,t)}).call(function(c){var l=c.data();r&&(o||a.data_selection_isselectable(l))&&e.style("cursor","pointer"),s||(i.showTooltip(l,t),i.showXGridFocus(l),i.unexpandCircles(),c.each(function(t){return i.expandCirclesBars(n,t.id)}))})},expandCirclesBars:function(t,e,n){var i=this,a=i.config;a.point_focus_expand_enabled&&i.expandCircles(t,e,n),i.expandBars(t,e,n)},selectRectForMultipleXs:function(t){var e=this,n=e.config,i=e.filterTargetsToShow(e.data.targets);if(!e.dragging&&!e.hasArcType(i)){var a=Object(u["mouse"])(t),r=e.findClosestFromTargets(i,a);if(e.mouseover&&(!r||r.id!==e.mouseover.id)&&(n.data_onout.call(e.api,e.mouseover),e.mouseover=void 0),!r)return void e.unselectRect();var o=e.isBubbleType(r)||e.isScatterType(r)||!n.tooltip_grouped?[r]:e.filterByX(i,r.x),s=o.map(function(t){return e.addName(t)});e.showTooltip(s,t),e.expandCirclesBars(r.index,r.id,!0),e.showXGridFocus(s),(e.isBarType(r.id)||e.dist(r,a)<n.point_sensitivity)&&(e.svg.select(".".concat(h.eventRect)).style("cursor","pointer"),!e.mouseover&&(n.data_onover.call(e.api,r),e.mouseover=r))}},unselectRect:function(){var t=this;t.svg.select(".".concat(h.eventRect)).style("cursor",null),t.hideXGridFocus(),t.hideTooltip(),t._handleLinkedCharts(!1),t.unexpandCircles(),t.unexpandBars()},setOverOut:function(t,e){var n=this,i=n.config,a=F(e);if(a||-1!==e){var r=i[t?"data_onover":"data_onout"].bind(n.api);i.color_onover&&n.setOverColor(t,e,a),a?r(e):(t&&n.expandCirclesBars(e,null,!0),!n.isMultipleX()&&n.main.selectAll(".".concat(h.shape,"-").concat(e)).each(r))}},callOverOutForTouch:function(t){var e=this,n=e.callOverOutForTouch,i=n.last;(F(t)&&i?t.id!==i.id:t!==i)&&((i||T(i))&&e.setOverOut(!1,i),(t||T(t))&&e.setOverOut(!0,t),n.last=t)},getDraggableSelection:function(){var t=this,e=t.config;return e.interaction_enabled&&e.data_selection_draggable&&t.drag?Object(lt["drag"])().on("drag",function(){t.drag(Object(u["mouse"])(this))}).on("start",function(){t.dragstart(Object(u["mouse"])(this))}).on("end",function(){t.dragend()}):function(){}},generateEventRectsForSingleX:function(t){var e=this,n=e.config,i=t.append("rect").attr("class",e.classEvent.bind(e)).style("cursor",n.data_selection_enabled&&n.data_selection_grouped?"pointer":null).on("click",function(t){e.clickHandlerForSingleX.bind(this)(t,e)}).call(e.getDraggableSelection());return"mouse"===e.inputType&&i.on("mouseover",function(t){e.dragging||e.flowing||e.hasArcType()||e.setOverOut(!0,t.index)}).on("mousemove",function(t){if(!(e.dragging||e.flowing||e.hasArcType())){var n=t.index,i=e.svg.select(".".concat(h.eventRect,"-").concat(n));e.isStepType(t)&&"step-after"===e.config.line_step_type&&Object(u["mouse"])(this)[0]<e.x(e.getXValue(t.id,n))&&(n-=1),-1===n?e.unselectRect():e.selectRectForSingle(this,i,n)}}).on("mouseout",function(t){!e.config||e.hasArcType()||(e.unselectRect(),e.setOverOut(!1,t.index))}),i},clickHandlerForSingleX:function(t,e){var n=e,i=n.config;if(n.hasArcType()||!n.toggleShape||n.cancelClick)n.cancelClick&&(n.cancelClick=!1);else{var a=t.index;n.main.selectAll(".".concat(h.shape,"-").concat(a)).each(function(t){(i.data_selection_grouped||n.isWithinShape(this,t))&&(n.toggleShape(this,t,a),i.data_onclick.call(n.api,t,this))})}},generateEventRectsForMultipleXs:function(t){var e=this,n=t.append("rect").attr("x",0).attr("y",0).attr("width",e.width).attr("height",e.height).attr("class",h.eventRect).on("click",function(){e.clickHandlerForMultipleXS.bind(this)(e)}).call(e.getDraggableSelection());return"mouse"===e.inputType&&n.on("mouseover mousemove",function(){e.selectRectForMultipleXs(this)}).on("mouseout",function(){!e.config||e.hasArcType()||e.unselectRect()}),n},clickHandlerForMultipleXS:function(t){var e=t,n=e.config,i=e.filterTargetsToShow(e.data.targets);if(!e.hasArcType(i)){var a=Object(u["mouse"])(this),r=e.findClosestFromTargets(i,a);!r||(e.isBarType(r.id)||e.dist(r,a)<n.point_sensitivity)&&e.main.selectAll(".".concat(h.shapes).concat(e.getTargetSelectorSuffix(r.id))).selectAll(".".concat(h.shape,"-").concat(r.index)).each(function(){(n.data_selection_grouped||e.isWithinShape(this,r))&&(e.toggleShape(this,r,r.index),n.data_onclick.call(e.api,r,this))})}},dispatchEvent:function(t,e,n){var i=this,a=i.isMultipleX(),r=".".concat(a?h.eventRect:"".concat(h.eventRect,"-").concat(e)),o=i.main.select(r).node(),s=o.getBoundingClientRect(),c=s.width,l=s.left,u=s.top,d=l+(n?n[0]:0)+(a?0:c/2),g=u+(n?n[1]:0);J[/^(mouse|click)/.test(t)?"mouse":"touch"](o,t,{screenX:d,screenY:g,clientX:d,clientY:g})}}),N(rt.prototype,{setContainerSize:function(){var t=this;t.currentWidth=t.getCurrentWidth(),t.currentHeight=t.getCurrentHeight()},getCurrentWidth:function(){var t=this;return t.config.size_width||t.getParentWidth()},getCurrentHeight:function(){var t=this,e=t.config,n=e.size_height||t.getParentHeight();return n>0?n:320/(t.hasType("gauge")&&!e.gauge_fullCircle?2:1)},getAxisSize:function(t){var e=this,n=e.config,i=n.axis_rotated;return i&&"x"===t||!i&&/y2?/.test(t)?e.getAxisWidthByAxisId(t,!0):e.getHorizontalAxisHeight(t)},getCurrentPaddingTop:function(){var t=this,e=t.config,n=e.axis_y2_axes.length,i=_(e.padding_top)?e.padding_top:0;return t.title&&t.title.node()&&(i+=t.getTitlePadding()),n&&e.axis_rotated&&(i+=t.getHorizontalAxisHeight("y2")*n),i},getCurrentPaddingBottom:function(){var t=this,e=t.config,n=e.axis_rotated?"y":"x",i=e["axis_".concat(n,"_axes")].length,a=_(e.padding_bottom)?e.padding_bottom:0;return a+(i?t.getHorizontalAxisHeight(n)*i:0)},getCurrentPaddingLeft:function(t){var e,n=this,i=n.config,a=i.axis_rotated,r=a?"x":"y",o=i["axis_".concat(r,"_axes")].length,s=n.getAxisWidthByAxisId(r,t);return e=_(i.padding_left)?i.padding_left:a?i.axis_x_show?Math.max(S(s),40):1:!i.axis_y_show||i.axis_y_inner?n.axis.getYAxisLabelPosition().isOuter?30:1:S(s),e+s*o},getCurrentPaddingRight:function(){var t,e=this,n=e.config,i=e.isLegendRight?e.getLegendWidth()+20:0,a=n.axis_y2_axes.length,r=e.getAxisWidthByAxisId("y2");return t=_(n.padding_right)?n.padding_right+1:n.axis_rotated?10+i:!n.axis_y2_show||n.axis_y2_inner?2+i+(e.axis.getY2AxisLabelPosition().isOuter?20:0):S(r)+i,t+r*a},getParentRectValue:function(t){for(var e,n="offset".concat(G(t)),i=this.selectChart.node();!e&&i&&"BODY"!==i.tagName;){try{e=i.getBoundingClientRect()[t]}catch(r){n in i&&(e=i[n])}i=i.parentNode}if("width"===t){var a=document.body.offsetWidth;e>a&&(e=a)}return e},getParentWidth:function(){return this.getParentRectValue("width")},getParentHeight:function(){var t=this.selectChart.style("height");return t.indexOf("px")>0?parseInt(t,10):0},getSvgLeft:function(t){var e=this,n=e.config,i=n.axis_rotated||!n.axis_rotated&&!n.axis_y_inner,a=n.axis_rotated?h.axisX:h.axisY,r=e.main.select(".".concat(a)).node(),o=r&&i?r.getBoundingClientRect():{right:0},s=e.selectChart.node().getBoundingClientRect(),c=e.hasArcType(),l=o.right-s.left-(c?0:e.getCurrentPaddingLeft(t));return l>0?l:0},getAxisWidthByAxisId:function(t,e){var n=this,i=n.axis.getLabelPositionById(t);return n.axis.getMaxTickWidth(t,e)+(i.isInner?20:40)},getHorizontalAxisHeight:function(t){var e=this,n=e.config,i=n.axis_rotated,a=30;return"x"!==t||n.axis_x_show?"x"===t&&n.axis_x_height?n.axis_x_height:"y"!==t||n.axis_y_show?"y2"!==t||n.axis_y2_show?(("x"===t&&!i&&n.axis_x_tick_rotate||"y"===t&&i&&n.axis_y_tick_rotate)&&(a=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-n["axis_".concat(t,"_tick_rotate")])/180)),a+(e.axis.getLabelPositionById(t).isInner?0:10)+("y2"!==t||i?0:-10)):e.rotated_padding_top:!n.legend_show||e.isLegendRight||e.isLegendInset?1:10:8},getEventRectWidth:function(){return Math.max(0,this.xAxis.tickInterval())}});var ut=n(19);N(rt.prototype,{getShapeIndices:function(t){var e=this,n=e.config,i={},a=0;return e.filterTargetsToShow(e.data.targets.filter(t,e)).forEach(function(t){for(var e,r=0;e=n.data_groups[r];r++)if(!(e.indexOf(t.id)<0))for(var o,s=0;o=e[s];s++)if(o in i){i[t.id]=i[o];break}w(i[t.id])&&(i[t.id]=a++)}),i.__max__=a-1,i},getShapeX:function(t,e,n,i){var a=this,r=i?a.subX:a.zoomScale||a.x,o=a.config.bar_padding,s=function(t,e){return t+e},c=O(t)&&t.total.length?t.total.reduce(s)/2:0;return function(i){var a=i.id in n?n[i.id]:0,l=0;if(D(i.x)){var u=r(i.x);l=c?u-(t[i.id]||t.width)+t.total.slice(0,a+1).reduce(s)-c:u-(T(t)?t:t.width)*(e/2-a)}return t&&l&&e>1&&o&&(a&&(l+=o*a),e>2?l-=(e-1)*o/2:2===e&&(l-=o/2)),l}},getShapeY:function(t){var e=this,n=e.isStackNormalized();return function(i){return(t?e.getSubYScale(i.id):e.getYScale(i.id))(n?e.getRatio("index",i,!0):i.value)}},getShapeOffset:function(t,e,n){var i=this,a=i.orderTargets(i.filterTargetsToShow(i.data.targets.filter(t,i))),r=a.map(function(t){return t.id});return function(t,o){var s=n?i.getSubYScale(t.id):i.getYScale(t.id),c=s(0),l=c,u=o;return a.forEach(function(n){var a=i.isStepType(t)?i.convertValuesToStep(n.values):n.values,o=a.map(function(t){return i.isStackNormalized()?i.getRatio("index",t,!0):t.value});n.id===t.id||e[n.id]!==e[t.id]||r.indexOf(n.id)<r.indexOf(t.id)&&((w(a[u])||+a[u].x!==+t.x)&&(u=-1,a.forEach(function(e,n){var i=e.x.constructor===Date?+e.x:e.x,a=t.x.constructor===Date?+t.x:t.x;i===a&&(u=n)})),u in a&&a[u].value*t.value>=0&&(l+=s(o[u])-c))}),l}},isWithinShape:function(t,e){var n,i=this,a=Object(u["select"])(t);return i.isTargetToShow(e.id)?i.hasValidPointType(t.nodeName)?n=i.isStepType(e)?i.isWithinStep(t,i.getYScale(e.id)(e.value)):i.isWithinCircle(t,1.5*i.pointSelectR(e)):"path"===t.nodeName&&(n=!a.classed(h.bar)||i.isWithinBar(t)):n=!1,n},getInterpolate:function(t){var e=this,n=e.getInterpolateType(t);return{basis:ut["curveBasis"],"basis-closed":ut["curveBasisClosed"],"basis-open":ut["curveBasisOpen"],bundle:ut["curveBundle"],cardinal:ut["curveCardinal"],"cardinal-closed":ut["curveCardinalClosed"],"cardinal-open":ut["curveCardinalOpen"],"catmull-rom":ut["curveCatmullRom"],"catmull-rom-closed":ut["curveCatmullRomClosed"],"catmull-rom-open":ut["curveCatmullRomOpen"],"monotone-x":ut["curveMonotoneX"],"monotone-y":ut["curveMonotoneY"],natural:ut["curveNatural"],"linear-closed":ut["curveLinearClosed"],linear:ut["curveLinear"],step:ut["curveStep"],"step-after":ut["curveStepAfter"],"step-before":ut["curveStepBefore"]}[n]},getInterpolateType:function(t){var e=this,n=e.config.spline_interpolation_type,i=e.isInterpolationType(n)?n:"cardinal";return e.isSplineType(t)?i:e.isStepType(t)?e.config.line_step_type:"linear"}});var dt=n(20);function gt(t,e,n,i,a,r){var o=t&&i>0?n-i:i,s=2*Math.PI,c="x"===e?Math.sin:Math.cos;return a*(1-r*c(o*s/n))}N(rt.prototype,{initPie:function(){var t=this,e=t.config,n=e.pie_padding,i=t.hasType("pie")&&n?.01*n:e["".concat(e.data_type,"_padAngle")]?e["".concat(e.data_type,"_padAngle")]:0;t.pie=Object(ut["pie"])().padAngle(i).value(function(t){return t.values.reduce(function(t,e){return t+e.value},0)}),e.data_order||t.pie.sort(null)},updateRadius:function(){var t=this,e=t.config,n=e.pie_innerRadius,i=e.pie_padding,a=e.gauge_width||e.donut_width;t.radiusExpanded=Math.min(t.arcWidth,t.arcHeight)/2,t.radius=.95*t.radiusExpanded,t.innerRadiusRatio=a?(t.radius-a)/t.radius:.6;var r=n||(i?i*(t.innerRadiusRatio+.1):0);t.innerRadius=t.hasType("donut")||t.hasType("gauge")?t.radius*t.innerRadiusRatio:r},updateArc:function(){var t=this;t.svgArc=t.getSvgArc(),t.svgArcExpanded=t.getSvgArcExpanded(),t.svgArcExpandedSub=t.getSvgArcExpanded(.98)},updateAngle:function(t){var e,n,i,a,r=this,o=r.config,s=t,c=!1,l=0;return o?(r.pie(r.filterTargetsToShow(r.data.targets)).forEach(function(t){c||t.data.id!==s.data.id||(c=!0,s=t,s.index=l),l++}),isNaN(s.startAngle)&&(s.startAngle=0),isNaN(s.endAngle)&&(s.endAngle=s.startAngle),r.isGaugeType(s.data)&&(e=o.gauge_min,n=o.gauge_max,i=Math.PI*(o.gauge_fullCircle?2:1)/(n-e),a=s.value<e?0:s.value<n?s.value-e:n-e,s.startAngle=o.gauge_startingAngle,s.endAngle=s.startAngle+i*a),c?s:null):null},getSvgArc:function(){var t=this,e=Object(ut["arc"])().outerRadius(t.radius).innerRadius(t.innerRadius),n=function(n,i){var a="M 0 0";if("value"in n?n.value>0:n.data){var r=!i&&t.updateAngle(n);i?a=e(n):r&&(a=e(r))}return a};return n.centroid=e.centroid,n},getSvgArcExpanded:function(t){var e=this,n=Object(ut["arc"])().outerRadius(e.radiusExpanded*(t||1)).innerRadius(e.innerRadius);return function(t){var i=e.updateAngle(t);return i?n(i):"M 0 0"}},getArc:function(t,e,n){return n||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"},transformForArcLabel:function(t){var e=this,n=e.config,i=e.updateAngle(t),a="";if(i&&!e.hasType("gauge")){var r=this.svgArc.centroid(i),o=isNaN(r[0])?0:r[0],s=isNaN(r[1])?0:r[1],c=Math.sqrt(o*o+s*s),l=e.hasType("donut")&&n.donut_label_ratio||e.hasType("pie")&&n.pie_label_ratio;l=l?y(l)?l(t,e.radius,c):l:e.radius&&(c?(36/e.radius>.375?1.175-36/e.radius:.8)*e.radius/c:0),a="translate(".concat(o*l,",").concat(s*l,")")}return a},convertToArcData:function(t){return this.addName({id:t.data.id,value:t.value,ratio:this.getRatio("arc",t),index:t.index})},textForArcLabel:function(t){var e=this;e.shouldShowArcLabel()&&t.each(function(t){var n=Object(u["select"])(this),i=e.updateAngle(t),a=i?i.value:null,r=e.getRatio("arc",i),o=t.data.id,s=e.hasType("gauge")||e.meetsArcLabelThreshold(r);if(s){var c=n.text(),l=(e.getArcLabelFormat()||e.defaultArcValueFormat)(a,r,o).toString();if(-1===l.indexOf("\n"))c!==l&&n.text(l);else{var d=[c,l].map(function(t){return t.replace(/[\s\n]/g,"")});if(d[0]!==d[1]){var g=l.split("\n"),h=g.length-1;n.html(""),g.forEach(function(t,e){n.append("tspan").attr("x",0).attr("dy","".concat(0===e?-h:1,"em")).text(t)})}}}})},textForGaugeMinMax:function(t,e){var n=this.getGaugeLabelExtents();return n?n(t,e):t},expandArc:function(t){var e=this;if(e.transiting)var n=setInterval(function(){e.transiting||(clearInterval(n),e.legend.selectAll(".".concat(h.legendItemFocused)).size()>0&&e.expandArc(t))},10);else{var i=e.mapToTargetIds(t);e.svg.selectAll(e.selectorTargets(i,".".concat(h.chartArc))).each(function(t){if(e.shouldExpand(t.data.id)&&0!==t.value){var n=e.expandDuration(t.data.id);Object(u["select"])(this).selectAll("path").transition().duration(n).attr("d",e.svgArcExpanded).transition().duration(2*n).attr("d",e.svgArcExpandedSub)}})}},unexpandArc:function(t){var e=this;if(!e.transiting){var n=e.mapToTargetIds(t);e.svg.selectAll(e.selectorTargets(n,".".concat(h.chartArc))).selectAll("path").transition().duration(function(t){return e.expandDuration(t.data.id)}).attr("d",e.svgArc),e.svg.selectAll("".concat(h.arc)).style("opacity","1")}},expandDuration:function(t){var e,n=this,i=n.config;return n.isDonutType(t)?e="donut":n.isGaugeType(t)?e="gauge":n.isPieType(t)&&(e="pie"),e?i["".concat(e,"_expand_duration")]:50},shouldExpand:function(t){var e=this,n=e.config;return e.isDonutType(t)&&n.donut_expand||e.isGaugeType(t)&&n.gauge_expand||e.isPieType(t)&&n.pie_expand},shouldShowArcLabel:function(){var t=this,e=t.config,n=!0;return t.hasType("donut")?n=e.donut_label_show:t.hasType("pie")&&(n=e.pie_label_show),n},meetsArcLabelThreshold:function(t){var e=this,n=e.config,i=e.hasType("donut")?n.donut_label_threshold:n.pie_label_threshold;return t>=i},getArcLabelFormat:function(){var t=this,e=t.config,n=e.pie_label_format;return t.hasType("gauge")?n=e.gauge_label_format:t.hasType("donut")&&(n=e.donut_label_format),n},getGaugeLabelExtents:function(){var t=this.config;return t.gauge_label_extents},getArcTitle:function(){var t=this;return t.hasType("donut")?t.config.donut_title:""},updateTargetsForArc:function(t){var e=this,n=e.main,i=e.classChartArc.bind(e),a=e.classArcs.bind(e),r=e.classFocus.bind(e),o=n.select(".".concat(h.chartArcs)).selectAll(".".concat(h.chartArc)).data(e.pie(t)).attr("class",function(t){return i(t)+r(t.data)}),s=o.enter().append("g").attr("class",i);s.append("g").attr("class",a).merge(o),s.append("text").attr("dy",e.hasType("gauge")?"-.1em":".35em").style("opacity","0").style("text-anchor","middle").style("pointer-events","none")},initArc:function(){var t=this;t.arcs=t.main.select(".".concat(h.chart)).append("g").attr("class",h.chartArcs).attr("transform",t.getTranslate("arc")),t.setArcTitle()},setArcTitle:function(){var t=this,e=t.getArcTitle();if(e){var n=e.split("\n"),i=t.arcs.append("text").attr("class",h.chartArcsTitle).style("text-anchor","middle");if(n.length>1){var a=+i.style("font-size").replace("px",""),r=Math.floor(i.text(".").node().getBBox().height,i.text(""));n.forEach(function(t,e){return i.insert("tspan").text(t).attr("x",0).attr("dy",e?r:0)}),i.attr("y","-".concat(a*(n.length-2)||a/2))}else i.text(e)}},redrawArc:function(t,e,n){var i=this,a=i.config,r=i.main,o=a.interaction_enabled,s=r.selectAll(".".concat(h.arcs)).selectAll(".".concat(h.arc)).data(i.arcData.bind(i));s.exit().transition().duration(e).style("opacity","0").remove(),s=s.enter().append("path").attr("class",i.classArc.bind(i)).style("fill",function(t){return i.color(t.data)}).style("cursor",function(t){return o&&(a.data_selection_isselectable(t)?"pointer":null)}).style("opacity","0").each(function(t){i.isGaugeType(t.data)&&(t.startAngle=a.gauge_startingAngle,t.endAngle=a.gauge_startingAngle),this._current=t}).merge(s),s.attr("transform",function(t){return!i.isGaugeType(t.data)&&n?"scale(0)":""}).style("opacity",function(t){return t===this._current?"0":"1"}).each(function(){i.transiting=!0}).transition().duration(t).attrTween("d",function(t){var e=i.updateAngle(t);if(!e)return function(){return"M 0 0"};isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle);var n=Object(dt["interpolate"])(this._current,e);return this._current=n(0),function(e){var a=n(e);return a.data=t.data,i.getArc(a,!0)}}).attr("transform",n?"scale(1)":"").style("fill",function(t){return i.levelColor?i.levelColor(t.data.values[0].value):i.color(t.data.id)}).style("opacity","1").call(i.endall,function(){i.transiting=!1}),o&&i.bindArcEvent(s),i.redrawArcText(t)},bindArcEvent:function(t){function e(t,e,n){i.expandArc(n),i.api.focus(n),i.toggleFocusLegend(n,!0),i.showTooltip([e],t)}function n(t){var e=t&&t.id||void 0;i.unexpandArc(e),i.api.revert(),i.revertLegend(),i.hideTooltip()}var i=this,a="touch"===i.inputType,r="mouse"===i.inputType;if(t.on("click",function(t,e){var n,a=i.updateAngle(t);a&&(n=i.convertToArcData(a),i.toggleShape&&i.toggleShape(this,n,e),i.config.data_onclick.call(i.api,n,this))}),r&&t.on("mouseover",function(t){if(!i.transiting){var n=i.updateAngle(t),a=n?i.convertToArcData(n):null,r=a&&a.id||void 0;e(this,a,r),i.setOverOut(!0,a)}}).on("mouseout",function(t){if(!i.transiting){var e=i.updateAngle(t),a=e?i.convertToArcData(e):null;n(),i.setOverOut(!1,a)}}).on("mousemove",function(t){var e=i.updateAngle(t),n=e?i.convertToArcData(e):null;i.showTooltip([n],this)}),a&&i.hasArcType()&&!i.radars){var o=function(){var t=u["event"].changedTouches[0],e=Object(u["select"])(document.elementFromPoint(t.clientX,t.clientY));return e},s=function(){if(!i.transiting){var t=o(),a=t.datum(),r=a&&a.data&&a.data.id?i.updateAngle(a):null,s=r?i.convertToArcData(r):null,c=s&&s.id||void 0;i.callOverOutForTouch(s),w(c)?n():e(this,s,c)}};i.svg.on("touchstart",s).on("touchmove",s)}},redrawArcText:function(t){var e=this,n=e.config,i=e.main,a=i.selectAll(".".concat(h.chartArc)).select("text").style("opacity","0").attr("class",function(t){return e.isGaugeType(t.data)?h.gaugeValue:null});if(n.gauge_fullCircle&&a.attr("dy","".concat(Math.round(e.radius/14))),a.call(e.textForArcLabel.bind(e)).attr("transform",e.transformForArcLabel.bind(e)).style("font-size",function(t){return e.isGaugeType(t.data)?"".concat(Math.round(e.radius/5),"px"):""}).transition().duration(t).style("opacity",function(t){return e.isTargetToShow(t.data.id)&&e.isArcType(t.data)?"1":"0"}),i.select(".".concat(h.chartArcsTitle)).style("opacity",e.hasType("donut")||e.hasType("gauge")?"1":"0"),e.hasType("gauge")){var r=(n.gauge_fullCircle?-4:-1)*n.gauge_startingAngle;e.arcs.select(".".concat(h.chartArcsBackground)).attr("d",function(){var t={data:[{value:n.gauge_max}],startAngle:n.gauge_startingAngle,endAngle:r};return e.getArc(t,!0,!0)}),e.arcs.select(".".concat(h.chartArcsGaugeUnit)).attr("dy",".75em").text(n.gauge_label_show?n.gauge_units:""),n.gauge_label_show&&(e.arcs.select(".".concat(h.chartArcsGaugeMin)).attr("dx","".concat(-1*(e.innerRadius+(e.radius-e.innerRadius)/(n.gauge_fullCircle?1:2)),"px")).attr("dy","1.2em").text(e.textForGaugeMinMax(n.gauge_min,!1)),!n.gauge_fullCircle&&e.arcs.select(".".concat(h.chartArcsGaugeMax)).attr("dx","".concat(e.innerRadius+(e.radius-e.innerRadius)/2,"px")).attr("dy","1.2em").text(e.textForGaugeMinMax(n.gauge_max,!0)))}},initGauge:function(){var t=this,e=t.config,n=t.arcs;t.hasType("gauge")&&(n.append("path").attr("class",h.chartArcsBackground),n.append("text").attr("class",h.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),e.gauge_label_show&&(n.append("text").attr("class",h.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),!e.gauge_fullCircle&&n.append("text").attr("class",h.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none")))},getGaugeLabelHeight:function(){return this.config.gauge_label_show?20:0}}),N(rt.prototype,{initBar:function(){var t=this;t.main.select(".".concat(h.chart)).append("g").attr("class",h.chartBars)},updateTargetsForBar:function(t){var e=this,n=e.config,i=e.classChartBar.bind(e),a=e.classBars.bind(e),r=e.classFocus.bind(e),o=e.main.select(".".concat(h.chartBars)).selectAll(".".concat(h.chartBar)).data(t).attr("class",function(t){return i(t)+r(t)}),s=o.enter().append("g").attr("class",i).style("opacity","0").style("pointer-events","none");s.append("g").attr("class",a).style("cursor",function(t){return n.data_selection_isselectable(t)?"pointer":null})},updateBar:function(t){var e=this,n=e.barData.bind(e),i=e.classBar.bind(e),a=e.initialOpacity.bind(e);e.mainBar=e.main.selectAll(".".concat(h.bars)).selectAll(".".concat(h.bar)).data(n),e.mainBar.exit().transition().duration(t).style("opacity","0").remove(),e.mainBar=e.mainBar.enter().append("path").attr("class",i).style("stroke",e.color).style("fill",e.color).merge(e.mainBar).style("opacity",a)},redrawBar:function(t,e){return[(e?this.mainBar.transition(j()):this.mainBar).attr("d",t).style("fill",this.color).style("opacity","1")]},getBarW:function(t,e){var n,i=this,a=i.config,r=t.tickInterval(i.getMaxDataCount()),o=a.data_groups.length,s=function(t){var n=t?a.bar_width[t]:a.bar_width,i=t?n.ratio:a.bar_width_ratio,o=t?n.max:a.bar_width_max,s=T(n)?n:e?r*i/e:0;return o&&s>o?o:s};return n=s(),!o&&O(a.bar_width)&&(n={width:n,total:[]},i.filterTargetsToShow(i.data.targets).forEach(function(t){a.bar_width[t.id]&&(n[t.id]=s(t.id)),n.total.push(n[t.id]||n.width)})),n},getBars:function(t,e){var n=this,i=_(t)?"-".concat(t):"";return(e?n.main.selectAll(".".concat(h.bars).concat(n.getTargetSelectorSuffix(e))):n.main).selectAll(".".concat(h.bar).concat(i))},expandBars:function(t,e,n){var i=this;n&&i.unexpandBars(),i.getBars(t,e).classed(h.EXPANDED,!0)},unexpandBars:function(t){this.getBars(t).classed(h.EXPANDED,!1)},generateDrawBar:function(t,e){var n=this,i=n.config,a=n.generateGetBarPoints(t,e),r=i.axis_rotated,o=i.data_groups.length,s=i.bar_radius,c=i.bar_radius_ratio,l=T(s)&&s>0?function(){return s}:T(c)?function(t){return t*c}:null;return function(t,e){var n=a(t,e),i=+r,s=+!i,c=t.value<0,u=["",""],d=0;if(l&&!o){var g=r?s:i,h=n[2][g]-n[0][g];d=l(h);var f="a".concat(d,",").concat(d," ").concat(c?"1 0 0":"0 0 1"," ");u[+!r]="".concat(f).concat(d,",").concat(d),u[+r]="".concat(f).concat([-d,d][r?"sort":"reverse"]()),c&&u.reverse()}var p=r?"H".concat(n[1][i]-d," ").concat(u[0],"V").concat(n[2][s]-d," ").concat(u[1],"H").concat(n[3][i]):"V".concat(n[1][s]+(c?-d:d)," ").concat(u[0],"H").concat(n[2][i]-d," ").concat(u[1],"V").concat(n[3][s]);return"M".concat(n[0][i],",").concat(n[0][s]).concat(p,"z")}},generateGetBarPoints:function(t,e){var n=this,i=e?n.subXAxis:n.xAxis,a=t.__max__+1,r=n.getBarW(i,a),o=n.getShapeX(r,a,t,!!e),s=n.getShapeY(!!e),c=n.getShapeOffset(n.isBarType,t,!!e),l=e?n.getSubYScale:n.getYScale;return function(t,e){var i=l.call(n,t.id)(0),a=c(t,e)||i,u=T(r)?r:r[t.id]||r.width,d=o(t),g=s(t);return n.config.axis_rotated&&(t.value>0&&g<i||t.value<0&&i<g)&&(g=i),g-=i-a,[[d,a],[d,g],[d+u,g],[d+u,a]]}},isWithinBar:function(t){var e=Object(u["mouse"])(t),n=B(t),i=o()(n,2),a=i[0],r=i[1],s=Math.min(a.x,r.x),c=Math.min(a.y,r.y),l=2,d=t.getBBox(),g=d.width,h=d.height;return s-l<e[0]&&e[0]<s+g+l&&c-l<e[1]&&e[1]<c+h+l}}),N(rt.prototype,{initBubble:function(){var t=this,e=t.config;t.hasType("bubble")&&(e.point_show=!0,e.point_type="circle",e.point_sensitivity=25)},getBaseLength:function(){var t=this,e="$baseLength",n=t.getCache(e);return n||t.addCache(e,n=q("min",[t.axes.x.select("path").node().getTotalLength(),t.axes.y.select("path").node().getTotalLength()])),n},getBubbleR:function(t){var e=this,n=e.config.bubble_maxR;y(n)?n=n(t):!T(n)&&(n=e.getBaseLength()/(2*e.getMaxDataCount())+12);var i=q("max",e.getMinMaxData().max.map(function(t){return F(t.value)?t.value.mid:t.value})),a=n*n*Math.PI,r=t.value*(a/i);return Math.sqrt(r/Math.PI)}}),N(rt.prototype,{initLine:function(){var t=this;t.main.select(".".concat(h.chart)).append("g").attr("class",h.chartLines)},updateTargetsForLine:function(t){var e=this,n=e.config,i=e.classChartLine.bind(e),a=e.classLines.bind(e),r=e.classAreas.bind(e),o=e.classCircles.bind(e),s=e.classFocus.bind(e),c=e.main.select(".".concat(h.chartLines)).selectAll(".".concat(h.chartLine)).data(t).attr("class",function(t){return i(t)+s(t)}),l=c.enter().append("g").attr("class",i).style("opacity","0").style("pointer-events","none");l.append("g").attr("class",a),l.append("g").attr("class",r),n.point_show&&(n.data_selection_enabled&&l.append("g").attr("class",function(t){return e.generateClass(h.selectedCircles,t.id)}),l.append("g").attr("class",o).style("cursor",function(t){return n.data_selection_isselectable(t)?"pointer":null})),t.forEach(function(t){e.main.selectAll(".".concat(h.selectedCircles).concat(e.getTargetSelectorSuffix(t.id))).selectAll("".concat(h.selectedCircle)).each(function(e){e.value=t.values[e.index].value})})},updateLine:function(t){var e=this;e.mainLine=e.main.selectAll(".".concat(h.lines)).selectAll(".".concat(h.line)).data(e.lineData.bind(e)),e.mainLine.exit().transition().duration(t).style("opacity","0").remove(),e.mainLine=e.mainLine.enter().append("path").attr("class",function(t){return"".concat(e.classLine.bind(e)(t)," ").concat(e.extraLineClasses(t)||"")}).style("stroke",e.color).merge(e.mainLine).style("opacity",e.initialOpacity.bind(e)).style("shape-rendering",function(t){return e.isStepType(t)?"crispEdges":""}).attr("transform",null)},redrawLine:function(t,e){return[(e?this.mainLine.transition(j()):this.mainLine).attr("d",t).style("stroke",this.color).style("opacity","1")]},getCurve:function(t){var e=this,n=e.config.axis_rotated&&e.isStepType(t);return n?function(n){var i=e.getInterpolate(t)(n);return i.orgPoint=i.point,i.pointRotated=function(t,e){1===this._point&&(this._point=2);var n=this._y*(1-this._t)+e*this._t;this._context.lineTo(this._x,n),this._context.lineTo(t,n),this._x=t,this._y=e},i.point=function(t,e){0===this._point?this.orgPoint(t,e):this.pointRotated(t,e)},i}:e.getInterpolate(t)},generateDrawLine:function(t,e){var n=this,i=n.config,a=i.line_connectNull,r=i.axis_rotated,o=n.generateGetLinePoints(t,e),s=e?n.getSubYScale:n.getYScale,c=function(t){return(e?n.subxx:n.xx).call(n,t)},l=function(t,e){return n.isGrouped(t.id)?o(t,e)[0][1]:s.call(n,t.id)(n.getBaseValue(t))},u=Object(ut["line"])();u=r?u.x(l).y(c):u.x(c).y(l),a||(u=u.defined(function(t){return null!==n.getBaseValue(t)}));var d=e?n.subX:n.x;return function(t){var e,o=s.call(n,t.id),c=a?n.filterRemoveNull(t.values):t.values,l=0,g=0;if(n.isLineType(t)){var h=i.data_regions[t.id];h?e=n.lineWithRegions(c,d,o,h):(n.isStepType(t)&&(c=n.convertValuesToStep(c)),e=u.curve(n.getCurve(t))(c))}else c[0]&&(l=d(c[0].x),g=o(c[0].value)),e=r?"M ".concat(g," ").concat(l):"M ".concat(l," ").concat(g);return e||"M 0 0"}},generateGetLinePoints:function(t,e){var n=this,i=n.config,a=t.__max__+1,r=!!e,o=n.getShapeX(0,a,t,r),s=n.getShapeY(r),c=n.getShapeOffset(n.isLineType,t,r),l=r?n.getSubYScale:n.getYScale;return function(t,e){var a=l.call(n,t.id)(0),r=c(t,e)||a,u=o(t),d=s(t);i.axis_rotated&&(t.value>0&&d<a||t.value<0&&a<d)&&(d=a);var g=[u,d-(a-r)];return[g,g,g,g]}},lineWithRegions:function(t,e,n,i){var a,r,o,s,c=this,l=c.config,u=l.axis_rotated,d=c.isTimeSeries(),g=c.isCategorized()?.5:0,h=[],f="2 2",p=function(t,e){for(var n,i=0;n=e[i];i++)if(n.start<t&&t<=n.end)return n.style;return!1};if(A(i))for(var x,v=function(t,e){return w(t)?e:d?c.parseDate(t):t},m=0;x=i[m];m++){var _=v(x.start,t[0].x),y=v(x.end,t[t.length-1].x),b=x.style||{dasharray:f};h[m]={start:_,end:y,style:b}}for(var T,k=u?function(t){return n(t.value)}:function(t){return e(t.x)},S=u?function(t){return e(t.x)}:function(t){return n(t.value)},L=function(t){return"M".concat(t[0][0],",").concat(t[0][1],"L").concat(t[1][0],",").concat(t[1][1])},C=d?function(t,i,a,s){var c=t.x.getTime(),l=i.x-t.x,d=new Date(c+l*a),g=new Date(c+l*(a+s)),h=u?[[n(r(a)),e(d)],[n(r(a+o)),e(g)]]:[[e(d),n(r(a))],[e(g),n(r(a+o))]];return L(h)}:function(t,i,o,s){var c=u?[[n(r(o),!0),e(a(o))],[n(r(o+s),!0),e(a(o+s))]]:[[e(a(o),!0),n(r(o))],[e(a(o+s),!0),n(r(o+s))]];return L(c)},O="M",X=0;T=t[X];X++){var D=t[X-1];b=p(T.x,h);if(w(h)||!b)O+="".concat(X?"L":"").concat(k(T),",").concat(S(T));else{try{b=b.dasharray.split(" ")}catch(I){b=f.split(" ")}a=c.getScale(D.x+g,T.x+g,d),r=c.getScale(D.value,T.value);var R=e(T.x)-e(D.x),F=n(T.value)-n(D.value),z=Math.sqrt(Math.pow(R,2)+Math.pow(F,2));o=b[0]/z,s=o*b[1];for(var E=o;E<=1;E+=s)O+=C(D,T,E,o),E+s>=1&&(O+=C(D,T,1,0))}}return O},updateAreaGradient:function(){var t=this;t.data.targets.forEach(function(e){var n=t.color(e),i=t.config.area_linearGradient,a=i.x,r=void 0===a?[0,0]:a,o=i.y,s=void 0===o?[0,1]:o,c=i.stops,l=void 0===c?[[0,n,1],[1,n,0]]:c,u=t.defs.append("linearGradient").attr("id","".concat(t.datetimeId,"-areaGradient-").concat(e.id)).attr("x1",r[0]).attr("x2",r[1]).attr("y1",s[0]).attr("y2",s[1]);l.forEach(function(t){var i=y(t[1])?t[1](e.id):t[1];u.append("stop").attr("offset",t[0]).attr("stop-color",i||n).attr("stop-opacity",t[2])})})},updateAreaColor:function(t){var e=this;return e.config.area_linearGradient?"url(#".concat(e.datetimeId,"-areaGradient-").concat(t.id,")"):e.color(t)},updateArea:function(t){var e=this;e.config.area_linearGradient&&!e.mainArea&&e.updateAreaGradient(),e.mainArea=e.main.selectAll(".".concat(h.areas)).selectAll(".".concat(h.area)).data(e.lineData.bind(e)),e.mainArea.exit().transition().duration(t).style("opacity","0").remove(),e.mainArea=e.mainArea.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.updateAreaColor.bind(e)).style("opacity",function(){return e.orgAreaOpacity=Object(u["select"])(this).style("opacity"),"0"}).merge(e.mainArea),e.mainArea.style("opacity",e.orgAreaOpacity)},redrawArea:function(t,e){var n=this;return[(e?n.mainArea.transition(j()):n.mainArea).attr("d",t).style("fill",n.updateAreaColor.bind(n)).style("opacity",function(t){return n.isAreaRangeType(t)?n.orgAreaOpacity/1.75:n.orgAreaOpacity})]},generateDrawArea:function(t,e){var n=this,i=n.config,a=i.line_connectNull,r=i.axis_rotated,o=n.generateGetAreaPoints(t,e),s=e?n.getSubYScale:n.getYScale,c=function(t){return(e?n.subxx:n.xx).call(n,t)},l=function(t,e){return n.isGrouped(t.id)?o(t,e)[0][1]:s.call(n,t.id)(n.isAreaRangeType(t)?n.getAreaRangeData(t,"high"):0)},u=function(t,e){return n.isGrouped(t.id)?o(t,e)[1][1]:s.call(n,t.id)(n.isAreaRangeType(t)?n.getAreaRangeData(t,"low"):t.value)};return function(t){var e,o=a?n.filterRemoveNull(t.values):t.values,s=0,d=0;if(n.isAreaType(t)){var g=Object(ut["area"])();g=r?g.y(c).x0(l).x1(u):g.x(c).y0(i.area_above?0:l).y1(u),a||(g=g.defined(function(t){return null!==n.getBaseValue(t)})),n.isStepType(t)&&(o=n.convertValuesToStep(o)),e=g.curve(n.getCurve(t))(o)}else o[0]&&(s=n.x(o[0].x),d=n.getYScale(t.id)(o[0].value)),e=r?"M ".concat(d," ").concat(s):"M ".concat(s," ").concat(d);return e||"M 0 0"}},generateGetAreaPoints:function(t,e){var n=this,i=n.config,a=t.__max__+1,r=n.getShapeX(0,a,t,!!e),o=n.getShapeY(!!e),s=n.getShapeOffset(n.isAreaType,t,!!e),c=e?n.getSubYScale:n.getYScale;return function(t,e){var a=c.call(n,t.id)(0),l=s(t,e)||a,u=r(t),d=o(t);return i.axis_rotated&&(t.value>0&&d<a||t.value<0&&a<d)&&(d=a),[[u,l],[u,d-(a-l)],[u,d-(a-l)],[u,l]]}},updateCircle:function(){var t=this;t.config.point_show&&(t.mainCircle=t.main.selectAll(".".concat(h.circles)).selectAll(".".concat(h.circle)).data(function(e){return!t.isBarType(e)&&(!t.isLineType(e)||t.shouldDrawPointsForLine(e))&&t.labelishData(e)}),t.mainCircle.exit().remove(),t.mainCircle=t.mainCircle.enter().append(t.point("create",this,t.classCircle.bind(t),t.pointR.bind(t),t.color)).merge(t.mainCircle).style("stroke",t.color).style("opacity",t.initialOpacityForCircle.bind(t)))},redrawCircle:function(t,e,n,i){var a=this,r=a.main.selectAll(".".concat(h.selectedCircle));if(!a.config.point_show)return[];var o=[];a.mainCircle.each(function(s){var c=a.point("update",a,t,e,a.opacityForCircle.bind(a),a.color,n,i,r).bind(this),l=c(s);o.push(l)});var s=a.isCirclePoint()?"c":"";return[o,r.attr("".concat(s,"x"),t).attr("".concat(s,"y"),e)]},circleX:function(t){var e=this,n=_(t.x);return e.config.zoom_enabled&&e.zoomScale?n?e.zoomScale(t.x):null:n?e.x(t.x):null},updateCircleY:function(){var t=this;t.circleY=function(e,n){var i=e.id;return t.isGrouped(i)?t.generateGetLinePoints(t.getShapeIndices(t.isLineType))(e,n)[0][1]:t.getYScale(i)(t.getBaseValue(e))}},getCircles:function(t,e){var n=this,i=_(t)?"-".concat(t):"";return(e?n.main.selectAll(".".concat(h.circles).concat(n.getTargetSelectorSuffix(e))):n.main).selectAll(".".concat(h.circle).concat(i))},expandCircles:function(t,e,n){var i=this,a=i.pointExpandedR.bind(i);n&&i.unexpandCircles();var r=i.getCircles(t,e).classed(h.EXPANDED,!0),o=a(r)/i.config.point_r,s=1-o;i.isCirclePoint()?r.attr("r",a):r.each(function(){var t=Object(u["select"])(this);if("circle"===this.tagName)t.attr("r",a);else{var e=this.getBBox(),n=e.width,i=e.height,r=s*(+t.attr("x")+n/2),c=s*(+t.attr("y")+i/2);t.style("transform","translate(".concat(r,"px, ").concat(c,"px) scale(").concat(o,")"))}})},unexpandCircles:function(t){var e=this,n=e.pointR.bind(e),i=e.getCircles(t).filter(function(){return Object(u["select"])(this).classed(h.EXPANDED)}).classed(h.EXPANDED,!1);i.attr("r",n),e.isCirclePoint()||i.style("transform","scale(".concat(n(i)/e.config.point_r,")"))},pointR:function(t){var e=this,n=e.config,i=n.point_r,a=i;return e.isStepType(t)?a=0:e.isBubbleType(t)?a=e.getBubbleR(t):y(i)&&(a=i(t)),a},pointExpandedR:function(t){var e=this,n=e.config,i=e.isBubbleType(t)?1.15:1.75;return n.point_focus_expand_enabled?n.point_focus_expand_r||e.pointR(t)*i:e.pointR(t)},pointSelectR:function(t){var e=this,n=e.config.point_select_r;return y(n)?n(t):n||4*e.pointR(t)},isWithinCircle:function(t,e){var n=Object(u["mouse"])(t),i=Object(u["select"])(t),a=this.isCirclePoint()?"c":"",r=+i.attr("".concat(a,"x")),o=+i.attr("".concat(a,"y"));if(!r&&!o&&1===t.nodeType){var s=t.getBBox?t.getBBox():t.getBoundingClientRect(),c=s.x,l=s.y;r=c,o=l}return Math.sqrt(Math.pow(r-n[0],2)+Math.pow(o-n[1],2))<e},isWithinStep:function(t,e){return Math.abs(e-Object(u["mouse"])(t)[1])<30},shouldDrawPointsForLine:function(t){var e=this.config.line_point;return!0===e||R(e)&&-1!==e.indexOf(t.id)}}),N(rt.prototype,{hasValidPointType:function(t){return/^(circle|rect(angle)?|polygon|ellipse|use)$/i.test(t||this.config.point_type)},hasValidPointDrawMethods:function(t){var e=t||this.config.point_type;return O(e)&&y(e.create)&&y(e.update)},insertPointInfoDefs:function(t,e){var n=this,i=function(t,e){for(var n,i=t.attributes,a=0;n=i[a];a++)n=n.name,e.setAttribute(n,t.getAttribute(n))},a=(new DOMParser).parseFromString(t,"image/svg+xml"),r=a.documentElement,o=document.createElementNS(u["namespaces"].svg,r.nodeName.toLowerCase());if(o.id=e,o.style.fill="inherit",o.style.stroke="inherit",i(r,o),r.childNodes&&r.childNodes.length){var s=Object(u["select"])(o);"innerHTML"in o?s.html(r.innerHTML):H(r.childNodes).forEach(function(t){i(t,s.append(t.tagName).node())})}n.defs.node().appendChild(o)},pointFromDefs:function(t){return this.defs.select("#".concat(t))},generatePoint:function(){var t=this,e=t.config,n=[],i=D(e.point_pattern)?e.point_pattern:[e.point_type];return function(e,a){for(var r=arguments.length,o=Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];return function(r){var s,c=r.id||r.data&&r.data.id||r,l=Object(u["select"])(this);if(n.indexOf(c)<0&&n.push(c),s=i[n.indexOf(c)%i.length],t.hasValidPointType(s))s=t[s];else if(!t.hasValidPointDrawMethods(s)){var d="".concat(t.datetimeId,"-point-").concat(c),g=t.pointFromDefs(d);if(g.size()<1&&t.insertPointInfoDefs(s,d),"create"===e)return t.custom.create.bind(a).apply(void 0,[l,d].concat(o));if("update"===e)return t.custom.update.bind(a).apply(void 0,[l].concat(o))}return s[e].bind(a).apply(void 0,[l].concat(o))}}},getTransitionName:function(){return j()},custom:{create:function(t,e,n,i,a){return t.append("use").attr("xlink:href","#".concat(e)).attr("class",n).style("fill",a).node()},update:function(t,e,n,i,a,r,o,s){var c=this,l=t.node().getBBox(),u=l.width,d=l.height,g=function(t){return e(t)-u/2},h=function(t){return n(t)-d/2},f=t;if(r){var p=c.getTransitionName();o&&(f=t.attr("x",g)),f=t.transition(p).attr("x",g).attr("y",h).transition(p),s.transition(c.getTransitionName())}else f=t.attr("x",g).attr("y",h);return f.style("opacity",i).style("fill",a)}},circle:{create:function(t,e,n,i){return t.append("circle").attr("class",e).attr("r",n).style("fill",i).node()},update:function(t,e,n,i,a,r,o,s){var c=this,l=t;if(c.hasType("bubble")&&(l=l.attr("r",c.pointR.bind(c))),r){var u=c.getTransitionName();o&&(l=l.attr("cx",e)),l=t.attr("cx")?l.transition(u).attr("cx",e).attr("cy",n).transition(u):l.attr("cx",e).attr("cy",n),s.transition(c.getTransitionName())}else l=l.attr("cx",e).attr("cy",n);return l.style("opacity",i).style("fill",a)}},rectangle:{create:function(t,e,n,i){var a=function(t){return 2*n(t)};return t.append("rect").attr("class",e).attr("width",a).attr("height",a).style("fill",i).node()},update:function(t,e,n,i,a,r,o,s){var c=this,l=c.config.point_r,u=function(t){return e(t)-l},d=function(t){return n(t)-l},g=t;if(r){var h=c.getTransitionName();o&&(g=g.attr("x",u)),g=g.transition(h).attr("x",u).attr("y",d).transition(h),s.transition(c.getTransitionName())}else g=g.attr("x",u).attr("y",d);return g.style("opacity",i).style("fill",a)}}});var ht="$radarPoints";N(rt.prototype,{initRadar:function(){var t=this,e=t.config;t.hasType("radar")&&(t.radars=t.main.select(".".concat(h.chart)).append("g").attr("class",h.chartRadars),t.radars.levels=t.radars.append("g").attr("class",h.levels),t.radars.axes=t.radars.append("g").attr("class",h.axis),t.radars.shapes=t.radars.append("g").attr("class",h.shapes),t.maxValue=e.radar_axis_max||t.getMinMaxData().max[0].value)},getRadarSize:function(){var t=this,e=t.config,n=e.axis_x_categories.length<4?-20:10,i=(Math.min(t.arcWidth,t.arcHeight)-n)/2;return[i,i]},updateTargetsForRadar:function(t){var e=this,n=e.config;X(n.axis_x_categories)&&(n.axis_x_categories=K(0,q("max",t.map(function(t){return t.values.length})))),e.generateRadarPoints()},getRadarPosition:function(t,e,n,i){var a=this,r=a.config,s=a.getRadarSize(),c=o()(s,2),l=c[0],u=c[1],d=r.axis_x_categories.length,g=r.radar_direction_clockwise,h=H(t).map(function(a){return gt(g,a,d,e,A(n)?n:"x"===t?l:u,T(i)?i:r.radar_size_ratio)});return 1===h.length?h[0]:h},generateRadarPoints:function(){var t=this,e=t.data.targets,n=t.getRadarSize(),i=o()(n,2),a=i[0],r=i[1],s=t.getCache(ht)||{},c=s._size;c&&(c.width===a||c.height===r)||(e.forEach(function(e){s[e.id]=e.values.map(function(e,n){return t.getRadarPosition(["x","y"],n,void 0,t.getRatio("radar",e))})}),s._size={width:a,height:r},t.addCache(ht,s))},redrawRadar:function(t,e){var n=this,i=n.getTranslate("radar");i&&(n.radars.attr("transform",i),n.main.selectAll(".".concat(h.circles)).attr("transform",i),n.main.select(".".concat(h.chartTexts)).attr("transform",i),n.generateRadarPoints(),n.updateRadarLevel(),n.updateRadarAxes(),n.updateRadarShape(t,e))},generateGetRadarPoints:function(){var t=this,e=t.getCache(ht);return function(t,n){var i=e[t.id][n];return[i,i,i,i]}},updateRadarLevel:function(){var t=this,e=t.config,n=t.getRadarSize(),i=o()(n,2),a=i[0],r=i[1],s=e.radar_level_depth,c=e.axis_x_categories.length,l=e.radar_level_text_show,u=t.radars.levels,d=K(0,s),g=e.radar_size_ratio*Math.min(a,r),f=d.map(function(t){return g*((t+1)/s)}),p=e.radar_level_text_format,x=d.map(function(e){var n=f[e],i=K(0,c).map(function(e){return t.getRadarPosition(["x","y"],e,n,1).join(",")});return i.join(" ")}),v=u.selectAll(".".concat(h.level)).data(d);v.exit().remove();var m=v.enter().append("g").attr("class",function(t,e){return"".concat(h.level," ").concat(h.level,"-").concat(e)});m.append("polygon").style("visibility",e.radar_level_show?null:"hidden"),l&&(u.select("text").empty()&&u.append("text").attr("dx","-.5em").attr("dy","-.7em").style("text-anchor","end").text(function(){return p(0)}),m.append("text").attr("dx","-.5em").style("text-anchor","end").text(function(e){return p(t.maxValue/d.length*(e+1))})),m.merge(v).attr("transform",function(t){return"translate(".concat(a-f[t],", ").concat(r-f[t],")")}).selectAll("polygon").attr("points",function(t){return x[t]}),l&&u.selectAll("text").attr("x",function(t){return w(t)?a:x[t].split(",")[0]}).attr("y",function(t){return w(t)?r:0})},updateRadarAxes:function(){var t=this,e=t.config,n=t.getRadarSize(),i=o()(n,2),a=i[0],r=i[1],s=e.axis_x_categories,c=t.radars.axes.selectAll("g").data(s);c.exit().remove();var l=c.enter().append("g").attr("class",function(t,e){return"".concat(h.axis,"-").concat(e)});e.radar_axis_line_show&&l.append("line"),e.radar_axis_text_show&&l.append("text"),c=l.merge(c),e.radar_axis_line_show&&c.select("line").attr("x1",a).attr("y1",r).attr("x2",function(e,n){return t.getRadarPosition("x",n)}).attr("y2",function(e,n){return t.getRadarPosition("y",n)}),e.radar_axis_text_show&&c.select("text").style("text-anchor","middle").attr("dy",".5em").text(function(t){return t}).datum(function(t,e){return{index:e}}).attr("x",function(e,n){return t.getRadarPosition("x",n,void 0,1)}).attr("y",function(e,n){return t.getRadarPosition("y",n,void 0,1)}),t.bindEvent()},bindEvent:function(){var t=this,e=this,n=e.config;if(n.interaction_enabled){var i="mouse"===e.inputType,a=function(){var t=Object(u["select"])(u["event"].target).datum();return t&&1===Object.keys(t).length?t.index:void 0},r=function(){var n=a(),r=w(n);(i||r)&&(t.hideTooltip(),t.unexpandCircles(),i?e.setOverOut(!1,n):r&&e.callOverOutForTouch())};e.radars.select(".".concat(h.axis)).on(i?"mouseover ":"touchstart",function(){if(!e.transiting){var t=a();e.selectRectForSingle(e.svg.node(),null,t),i?e.setOverOut(!0,t):e.callOverOutForTouch(t)}}).on("mouseout",i?r:null),i||e.svg.on("touchstart",r)}},updateRadarShape:function(t,e){var n=this,i=n.data.targets,a=n.getCache(ht),r=n.radars.shapes.selectAll("polygon").data(i),o=r.enter().append("g").attr("class",n.classChartRadar.bind(n));r.exit().transition().duration(e).remove(),o.append("polygon").merge(r).transition().duration(t).style("fill",function(t){return n.color(t)}).style("stroke",function(t){return n.color(t)}).attr("points",function(t){return a[t.id].join(" ")})},radarCircleX:function(t){return this.getCache(ht)[t.id][t.index][0]},radarCircleY:function(t){return this.getCache(ht)[t.id][t.index][1]}}),N(rt.prototype,{initText:function(){var t=this;t.main.select(".".concat(h.chart)).append("g").attr("class",h.chartTexts),t.mainText=Object(u["selectAll"])([])},updateTargetsForText:function(t){var e=this,n=e.classChartText.bind(e),i=e.classTexts.bind(e),a=e.classFocus.bind(e),r=e.main.select(".".concat(h.chartTexts)).selectAll(".".concat(h.chartText)).data(t).attr("class",function(t){return n(t)+a(t)}),o=r.enter().append("g").attr("class",n).style("opacity","0").style("pointer-events","none");o.append("g").attr("class",i)},updateText:function(t){var e=this,n=this,i=n.config,a=n.labelishData.bind(n),r=n.classText.bind(n);n.mainText=n.main.selectAll(".".concat(h.texts)).selectAll(".".concat(h.text)).data(function(t){return e.isRadarType(t)?t.values:a(t)}),n.mainText.exit().transition().duration(t).style("fill-opacity","0").remove(),n.mainText=n.mainText.enter().append("text").merge(n.mainText).attr("class",r).attr("text-anchor",function(t){return i.axis_rotated?t.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(t){return n.color(t)}).style("fill-opacity","0").text(function(t,e,i){return n.dataLabelFormat(t.id)(t.value,t.id,e,i)})},redrawText:function(t,e,n,i){var a=this,r=j(),o=n?0:a.opacityForText.bind(a);return[this.mainText.each(function(){var n=Object(u["select"])(this);(i&&n.attr("x")?n.transition(r):n).attr("x",t).attr("y",e).style("fill",a.color).style("fill-opacity",o)})]},getTextRect:function(t,e){var n=this,i=t.node?t.node():t;/text/i.test(i.tagName)||(i=i.querySelector("text"));var a=i.textContent,r="$".concat(a.replace(/\W/g,"_")),o=n.getCache(r);return o||(n.svg.append("text").style("visibility","hidden").style("font",Object(u["select"])(i).style("font")).classed(e,!0).text(a).call(function(t){o=t.node().getBoundingClientRect()}).remove(),n.addCache(r,o)),o},generateXYForText:function(t,e){var n=this,i={},a=e?n.getXForText:n.getYForText;return Object.keys(t).concat("radar").forEach(function(e){i[e]=n["generateGet".concat(G(e),"Points")](t[e],!1)}),function(t,e){var r=(n.isAreaType(t)?"area":n.isBarType(t)&&"bar")||n.isRadarType(t)&&"radar"||"line";return a.call(n,i[r](t,e),t,this)}},getXForText:function(t,e,n){var i,a,r=this,o=r.config;return o.axis_rotated?(a=r.isBarType(e)?4:6,i=t[2][1]+a*(e.value<0?-1:1)):i=r.hasType("bar")?(t[2][0]+t[0][0])/2:t[0][0],null===e.value&&(i>r.width?i=r.width-n.getBoundingClientRect().width:i<0&&(i=4)),i+(o.data_labels_position.x||0)},getYForText:function(t,e,n){var i,a=this,r=a.config,o=r.point_r,s=3;if(r.axis_rotated)i=(t[0][0]+t[2][0]+.6*n.getBoundingClientRect().height)/2;else if(i=t[2][1],T(o)&&o>5&&(a.isLineType(e)||a.isScatterType(e))&&(s+=r.point_r/2.3),e.value<0||0===e.value&&!a.hasPositiveValue)i+=n.getBoundingClientRect().height,a.isBarType(e)&&a.isSafari()?i-=s:!a.isBarType(e)&&a.isChrome()&&(i+=s);else{var c=2*-s;a.isBarType(e)?c=-s:a.isBubbleType(e)&&(c=s),i+=c}if(null===e.value&&!r.axis_rotated){var l=n.getBoundingClientRect().height;i<l?i=l:i>this.height&&(i=this.height-4)}return i+(r.data_labels_position.y||0)}});var ft={Area:["area","area-spline","area-spline-range","area-line-range","area-step"],AreaRange:["area-spline-range","area-line-range"],Arc:["pie","donut","gauge","radar"],Line:["line","spline","area","area-spline","area-spline-range","area-line-range","step","area-step"],Step:["step","area-step"],Spline:["spline","area-spline","area-spline-range"]};N(rt.prototype,{setTargetType:function(t,e){var n=this,i=n.config;n.mapToTargetIds(t).forEach(function(t){n.withoutFadeIn[t]=e===i.data_types[t],i.data_types[t]=e}),t||(i.data_type=e)},hasType:function(t,e){var n=this,i=n.config.data_types,a=e||n.data.targets,r=!1;return a&&a.length?a.forEach(function(e){var n=i[e.id];(n&&n.indexOf(t)>=0||!n&&"line"===t)&&(r=!0)}):Object.keys(i).length?Object.keys(i).forEach(function(e){i[e]===t&&(r=!0)}):r=n.config.data_type===t,r},hasTypeOf:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return!ft[t].filter(function(t){return-1===i.indexOf(t)}).every(function(t){return!n.hasType(t,e)})},isTypeOf:function(t,e){var n=b(t)?t:t.id,i=this.config.data_types[n];return R(e)?e.indexOf(i)>=0:i===e},hasArcType:function(t,e){return this.hasTypeOf("Arc",t,e)},isLineType:function(t){var e=b(t)?t:t.id;return!this.config.data_types[e]||this.isTypeOf(e,ft.Line)},isStepType:function(t){return this.isTypeOf(t,ft.Step)},isSplineType:function(t){return this.isTypeOf(t,ft.Spline)},isAreaType:function(t){return this.isTypeOf(t,ft.Area)},isAreaRangeType:function(t){return this.isTypeOf(t,ft.AreaRange)},isBarType:function(t){return this.isTypeOf(t,"bar")},isBubbleType:function(t){return this.isTypeOf(t,"bubble")},isScatterType:function(t){return this.isTypeOf(t,"scatter")},isPieType:function(t){return this.isTypeOf(t,"pie")},isGaugeType:function(t){return this.isTypeOf(t,"gauge")},isDonutType:function(t){return this.isTypeOf(t,"donut")},isRadarType:function(t){return this.isTypeOf(t,"radar")},isArcType:function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)||this.isRadarType(t)},isCirclePoint:function(){var t=this.config,e=t.point_pattern;return"circle"===t.point_type&&(!e||R(e)&&0===e.length)},lineData:function(t){return this.isLineType(t)?[t]:[]},arcData:function(t){return this.isArcType(t.data)?[t]:[]},barData:function(t){return this.isBarType(t)?t.values:[]},labelishData:function(t){return this.isBarType(t)||this.isLineType(t)||this.isScatterType(t)||this.isBubbleType(t)||this.isRadarType(t)?t.values:[]},barLineBubbleData:function(t){return this.isBarType(t)||this.isLineType(t)||this.isBubbleType(t)?t.values:[]},isInterpolationType:function(t){return["basis","basis-closed","basis-open","bundle","cardinal","cardinal-closed","cardinal-open","catmull-rom","catmull-rom-closed","catmull-rom-open","linear","linear-closed","monotone-x","monotone-y","natural"].indexOf(t)>=0}});var pt=function(t){return _(t.position)||"end"},xt=function(t){return"start"===t.position?4:"middle"===t.position?0:-4},vt=function(t,e,n){return function(i){var a=t?0:e;return"start"===i.position?a=t?-n:0:"middle"===i.position&&(a=(t?-n:e)/2),a}};N(rt.prototype,{initGrid:function(){var t=this;t.xgrid=Object(u["selectAll"])([]),t.initGridLines(),t.initXYFocusGrid()},initGridLines:function(){var t=this,e=t.config;(e.grid_x_lines.length||e.grid_y_lines.length)&&(t.gridLines=t.main.insert("g",".".concat(h.chart).concat(e.grid_lines_front?" + *":"")).attr("clip-path",t.clipPathForGrid).attr("class","".concat(h.grid," ").concat(h.gridLines)),t.gridLines.append("g").attr("class",h.xgridLines),t.gridLines.append("g").attr("class",h.ygridLines),t.xgridLines=Object(u["selectAll"])([]))},updateXGrid:function(t){var e=this,n=e.config,i=n.axis_rotated,a=e.generateGridData(n.grid_x_type,e.x),r=e.isCategorized()?e.xAxis.tickOffset():0,o=function(t){return e.x(t)+(r*i?-1:1)};e.xgridAttr=i?{x1:0,x2:e.width,y1:o,y2:o}:{x1:o,x2:o,y1:0,y2:e.height},e.xgrid=e.main.select(".".concat(h.xgrids)).selectAll(".".concat(h.xgrid)).data(a),e.xgrid.exit().remove(),e.xgrid=e.xgrid.enter().append("line").attr("class",h.xgrid).merge(e.xgrid),t||e.xgrid.each(function(){var t=Object(u["select"])(this);Object.keys(e.xgridAttr).forEach(function(n){t.attr(n,e.xgridAttr[n]).style("opacity",function(){return t.attr(i?"y1":"x1")===(i?e.height:0)?"0":"1"})})})},updateYGrid:function(){var t=this,e=t.config,n=e.axis_rotated,i=t.yAxis.tickValues()||t.y.ticks(e.grid_y_ticks);t.ygrid=t.main.select(".".concat(h.ygrids)).selectAll(".".concat(h.ygrid)).data(i),t.ygrid.exit().remove(),t.ygrid=t.ygrid.enter().append("line").attr("class",h.ygrid).merge(t.ygrid),t.ygrid.attr("x1",n?t.y:0).attr("x2",n?t.y:t.width).attr("y1",n?0:t.y).attr("y2",n?t.height:t.y),t.smoothLines(t.ygrid,"grid")},updateGrid:function(t){var e=this;e.gridLines||e.initGridLines(),e.grid.style("visibility",e.hasArcType()?"hidden":"visible"),e.main.select("line.".concat(h.xgridFocus)).style("visibility","hidden"),e.updateXGridLines(t),e.updateYGridLines(t)},updateXGridLines:function(t){var e=this,n=e.main,i=e.config,a=i.axis_rotated;i.grid_x_show&&e.updateXGrid(),e.xgridLines=n.select(".".concat(h.xgridLines)).selectAll(".".concat(h.xgridLine)).data(i.grid_x_lines),e.xgridLines.exit().transition().duration(t).style("opacity","0").remove();var r=e.xgridLines.enter().append("g");r.append("line").style("opacity","0"),r.append("text").attr("transform",a?"":"rotate(-90)").attr("dy",-5).style("opacity","0"),e.xgridLines=r.merge(e.xgridLines),e.xgridLines.attr("class",function(t){return"".concat(h.xgridLine," ").concat(t.class||"").trim()}).select("text").attr("text-anchor",pt).attr("dx",xt).transition().duration(t).text(function(t){return t.text}).transition().style("opacity","1")},updateYGridLines:function(t){var e=this,n=e.main,i=e.config,a=i.axis_rotated;i.grid_y_show&&e.updateYGrid(),e.ygridLines=n.select(".".concat(h.ygridLines)).selectAll(".".concat(h.ygridLine)).data(i.grid_y_lines),e.ygridLines.exit().transition().duration(t).style("opacity","0").remove();var r=e.ygridLines.enter().append("g");r.append("line").style("opacity","0"),r.append("text").attr("transform",a?"rotate(-90)":"").style("opacity","0"),e.ygridLines=r.merge(e.ygridLines);var o=e.yv.bind(e);e.ygridLines.attr("class",function(t){return"".concat(h.ygridLine," ").concat(t.class||"").trim()}).select("line").transition().duration(t).attr("x1",a?o:0).attr("x2",a?o:e.width).attr("y1",a?0:o).attr("y2",a?e.height:o).transition().style("opacity","1"),e.ygridLines.select("text").attr("text-anchor",pt).attr("dx",xt).transition().duration(t).attr("dy",-5).attr("x",vt(a,e.width,e.height)).attr("y",o).text(function(t){return t.text}).transition().style("opacity","1")},redrawGrid:function(t){var e=this,n=e.config.axis_rotated,i=e.xv.bind(e),a=e.xgridLines.select("line"),r=e.xgridLines.select("text");return a=(t?a.transition():a).attr("x1",n?0:i).attr("x2",n?e.width:i).attr("y1",n?i:0).attr("y2",n?i:e.height),r=(t?r.transition():r).attr("x",vt(!n,e.width,e.height)).attr("y",i).text(function(t){return t.text}),[(t?a.transition():a).style("opacity","1"),(t?r.transition():r).style("opacity","1")]},initXYFocusGrid:function(){var t=this,e=t.config,n=e.grid_front,i=".".concat(h[n&&t.gridLines?"gridLines":"chart"]).concat(n?" + *":"");t.grid=t.main.insert("g",i).attr("clip-path",t.clipPathForGrid).attr("class",h.grid),e.grid_x_show&&t.grid.append("g").attr("class",h.xgrids),e.grid_y_show&&t.grid.append("g").attr("class",h.ygrids),e.grid_focus_show&&t.grid.append("g").attr("class",h.xgridFocus).append("line").attr("class",h.xgridFocus)},showXGridFocus:function(t){var e=this,n=e.config,i=n.axis_rotated,a=t.filter(function(t){return t&&_(e.getBaseValue(t))}),r=e.main.selectAll("line.".concat(h.xgridFocus)),o=e.xx.bind(e);!n.tooltip_show||e.hasType("bubble")||e.hasType("scatter")||e.hasArcType()||(r.style("visibility","visible").data([a[0]]).attr(i?"y1":"x1",o).attr(i?"y2":"x2",o),e.smoothLines(r,"grid"))},hideXGridFocus:function(){this.main.select("line.".concat(h.xgridFocus)).style("visibility","hidden")},updateXgridFocus:function(){var t=this,e=t.config.axis_rotated;t.main.select("line.".concat(h.xgridFocus)).attr("x1",e?0:-10).attr("x2",e?t.width:-10).attr("y1",e?-10:0).attr("y2",e?-10:t.height)},generateGridData:function(t,e){var n=this,i=n.main.select(".".concat(h.axisX)).selectAll(".tick").size(),a=[];if("year"===t)for(var r=n.getXDomain(),o=r[0].getFullYear(),s=r[1].getFullYear(),c=o;c<=s;c++)a.push(new Date("".concat(c,"-01-01 00:00:00")));else a=e.ticks(10),a.length>i&&(a=a.filter(function(t){return(t+"").indexOf(".")<0}));return a},getGridFilterToRemove:function(t){return t?function(e){var n=!1;return(R(t)?t.concat():[t]).forEach(function(t){("value"in t&&e.value===t.value||"class"in t&&e.class===t.class)&&(n=!0)}),n}:function(){return!0}},removeGridLines:function(t,e){var n=this,i=n.config,a=n.getGridFilterToRemove(t),r=e?h.xgridLines:h.ygridLines,o=e?h.xgridLine:h.ygridLine;n.main.select(".".concat(r)).selectAll(".".concat(o)).filter(a).transition().duration(i.transition_duration).style("opacity","0").remove();var s="grid_".concat(e?"x":"y","_lines");i[s]=i[s].filter(function(t){return!a(t)})}}),N(rt.prototype,{initTooltip:function(){var t=this,e=t.config;if(t.tooltip=t.selectChart.style("position","relative").append("div").attr("class",h.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),e.tooltip_init_show){if(t.isTimeSeries()&&b(e.tooltip_init_x)){var n,i,a=t.data.targets[0];for(e.tooltip_init_x=t.parseDate(e.tooltip_init_x),n=0;(i=a.values[n])&&i.x-e.tooltip_init_x!==0;n++);e.tooltip_init_x=n}t.tooltip.html(e.tooltip_contents.call(t,t.data.targets.map(function(n){return t.addName(n.values[e.tooltip_init_x])}),t.axis.getXAxisTickFormat(),t.getYFormat(t.hasArcType(null,["radar"])),t.color)),t.tooltip.style("top",e.tooltip_init_position.top).style("left",e.tooltip_init_position.left).style("display","block")}},getTooltipContent:function(t,e,n,i){var a,r,s,c,l=this,u=l.config,d=u.tooltip_format_title||e,g=u.tooltip_format_name||function(t){return t},f=u.tooltip_format_value||(l.isStackNormalized()?function(t,e){return"".concat((100*e).toFixed(2),"%")}:n),x=u.tooltip_order,v=function(t){return l.getBaseValue(t)},m=l.levelColor?function(t){return l.levelColor(t.value)}:function(t){return i(t.id)};if(null===x&&u.data_groups.length){var b=l.orderTargets(l.data.targets).map(function(t){return t.id}).reverse();t.sort(function(t,e){var n=t?t.value:null,i=e?e.value:null;return n>0&&i>0&&(n=t.id?b.indexOf(t.id):null,i=e.id?b.indexOf(e.id):null),n-i})}else/^(asc|desc)$/.test(x)?t.sort(function(t,e){var n=t?v(t):null,i=e?v(e):null;return"asc"===x?n-i:i-n}):y(x)&&t.sort(x);for(var T=0,w=t.length;T<w;T++)if((r=t[T])&&(v(r)||0===v(r))){if(!a){var A=M(d?d(r.x):r.x);a='<table class="'.concat(h.tooltip,'">').concat(_(A)?'<tr><th colspan="2">'.concat(A,"</th></tr>"):"")}if(s=[r.ratio,r.id,r.index,t],c=M(f.apply(void 0,[v(r)].concat(p()(s)))),l.isAreaRangeType(r)){var k=["high","low"].map(function(t){return M(f.apply(void 0,[l.getAreaRangeData(r,t)].concat(p()(s))))}),S=o()(k,2),L=S[0],C=S[1];c="<b>Mid:</b> ".concat(c," <b>High:</b> ").concat(L," <b>Low:</b> ").concat(C)}if(void 0!==c){if(null===r.name)continue;var O=M(g.apply(void 0,[r.name].concat(p()(s)))),X=m(r);a+='<tr class="'.concat(h.tooltipName).concat(l.getTargetSelectorSuffix(r.id),'"><td class="name">'),a+=l.patterns?'<svg><rect style="fill:'.concat(X,'" width="10" height="10"></rect></svg>'):'<span style="background-color:'.concat(X,'"></span>'),a+="".concat(O,'</td><td class="value">').concat(c,"</td></tr>")}}return"".concat(a,"</table>")},tooltipPosition:function(t,e,n,i){var a=this,r=a.config,s=Object(u["mouse"])(i),c=o()(s,2),l=c[0],d=c[1],g=a.getSvgLeft(!0),h=g+a.currentWidth-a.getCurrentPaddingRight();if(d+=20,a.hasArcType()){var f="touch"===a.inputType||a.hasType("radar");f||(d+=a.height/2,l+=(a.width-(a.isLegendRight?a.getLegendWidth():0))/2)}else{var p=a.x(t[0].x);r.axis_rotated?(d=p+20,l+=g+100,h-=g):(d-=5,l=g+a.getCurrentPaddingLeft(!0)+20+(a.zoomScale?l:p))}var x=l+e;return x>h&&(l-=x-h+20),d+n>a.currentHeight&&(d-=n+30),d<0&&(d=0),{top:d,left:l}},showTooltip:function(t,e){var n=this,i=n.config,a=n.hasArcType(null,["radar"]),r=t.filter(function(t){return t&&_(n.getBaseValue(t))}),o=i.tooltip_position||n.tooltipPosition;if(0!==r.length&&i.tooltip_show){var s=n.tooltip.datum(),c=JSON.stringify(t),l=s&&s.width||0,u=s&&s.height||0;if(!s||s.current!==c){var d=t.concat().sort()[0].index,g=i.tooltip_contents.call(n,t,n.axis.getXAxisTickFormat(),n.getYFormat(a),n.color);I(i.tooltip_onshow,n),n.tooltip.html(g).style("display","block").datum({index:d,current:c,width:l=n.tooltip.property("offsetWidth"),height:u=n.tooltip.property("offsetHeight")}),I(i.tooltip_onshown,n),n._handleLinkedCharts(!0,d)}var h=o.call(this,r,l,u,e);n.tooltip.style("top","".concat(h.top,"px")).style("left","".concat(h.left,"px"))}},hideTooltip:function(){var t=this,e=t.config;I(e.tooltip_onhide,t),this.tooltip.style("display","none").datum(null),I(e.tooltip_onhidden,t)},_handleLinkedCharts:function(t,e){var n=this;if(n.config.tooltip_linked){var i=n.config.tooltip_linked_name;(n.api.internal.charts||[]).forEach(function(a){if(a!==n.api){var r=a.internal.config,o=r.tooltip_linked,s=r.tooltip_linked_name,c=document.body.contains(a.element);if(o&&i===s&&c){var l=a.internal.tooltip.data()[0],u=e!==(l&&l.index);try{t&&u?a.tooltip.show({index:e}):!t&&a.tooltip.hide()}catch(d){}}}})}}}),N(rt.prototype,{initLegend:function(){var t=this,e=t.config;t.legendItemTextBox={},t.legendHasRendered=!1,t.legend=t.svg.append("g"),e.legend_show?(t.legend.attr("transform",t.getTranslate("legend")),t.updateLegend()):(t.legend.style("visibility","hidden"),t.hiddenLegendIds=t.mapToIds(t.data.targets))},updateLegend:function(t,e,n){var i=this,a=i.config,r=e||{withTransform:!1,withTransitionForTransform:!1,withTransition:!1};r.withTransition=z(r,"withTransition",!0),r.withTransitionForTransform=z(r,"withTransitionForTransform",!0),a.legend_contents_bindto&&a.legend_contents_template?i.updateLegendTemplate():i.updateLegendElement(t||i.mapToIds(i.data.targets),r,n),i.updateScales(),i.updateSvgSize(),i.transformAll(r.withTransitionForTransform,n),i.legendHasRendered=!0},updateLegendTemplate:function(){var t=this,e=t.config,n=Object(u["select"])(e.legend_contents_bindto),i=e.legend_contents_template;if(!n.empty()){var a=t.data.targets,r=[],o="";t.mapToIds(a).forEach(function(e){var n=y(i)?i.call(t,e,t.color(e),t.api.data(e)[0].values):i.replace(/{=COLOR}/g,t.color(e)).replace(/{=TITLE}/g,e);n&&(r.push(e),o+=n)});var s=n.html(o).selectAll(function(){return this.childNodes}).data(r);t.setLegendItem(s)}},updateSizeForLegend:function(t){var e=this,n=e.config,i=t.width,a=t.height,r={top:e.isLegendTop?e.getCurrentPaddingTop()+n.legend_inset_y+5.5:e.currentHeight-a-e.getCurrentPaddingBottom()-n.legend_inset_y,left:e.isLegendLeft?e.getCurrentPaddingLeft()+n.legend_inset_x+.5:e.currentWidth-i-e.getCurrentPaddingRight()-n.legend_inset_x+.5};e.margin3={top:e.isLegendRight?0:e.isLegendInset?r.top:e.currentHeight-a,right:NaN,bottom:0,left:e.isLegendRight?e.currentWidth-i:e.isLegendInset?r.left:0}},transformLegend:function(t){var e=this;(t?e.legend.transition():e.legend).attr("transform",e.getTranslate("legend"))},updateLegendStep:function(t){this.legendStep=t},updateLegendItemWidth:function(t){this.legendItemWidth=t},updateLegendItemHeight:function(t){this.legendItemHeight=t},getLegendWidth:function(){var t=this;return t.config.legend_show?t.isLegendRight||t.isLegendInset?t.legendItemWidth*(t.legendStep+1):t.currentWidth:0},getLegendHeight:function(){var t=this;return t.config.legend_show?t.isLegendRight?t.currentHeight:Math.max(20,t.legendItemHeight)*(t.legendStep+1):0},opacityForLegend:function(t){return t.classed(h.legendItemHidden)?null:"1"},opacityForUnfocusedLegend:function(t){return t.classed(h.legendItemHidden)?null:"0.3"},toggleFocusLegend:function(t,e){var n=this,i=n.mapToTargetIds(t);n.legend.selectAll(".".concat(h.legendItem)).filter(function(t){return i.indexOf(t)>=0}).classed(h.legendItemFocused,e).transition().duration(100).style("opacity",function(){var t=e?n.opacityForLegend:n.opacityForUnfocusedLegend;return t.call(n,Object(u["select"])(this))})},revertLegend:function(){var t=this;t.legend.selectAll(".".concat(h.legendItem)).classed(h.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return t.opacityForLegend(Object(u["select"])(this))})},showLegend:function(t){var e=this,n=e.config;n.legend_show||(n.legend_show=!0,e.legend.style("visibility","visible"),!e.legendHasRendered&&e.updateLegend()),e.removeHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("visibility","visible").transition().style("opacity",function(){return e.opacityForLegend(Object(u["select"])(this))})},hideLegend:function(t){var e=this,n=e.config;n.legend_show&&X(t)&&(n.legend_show=!1,e.legend.style("visibility","hidden")),e.addHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("opacity","0").style("visibility","hidden")},clearLegendItemTextBoxCache:function(){this.legendItemTextBox={}},setLegendItem:function(t){var e=this,n=e.config,i="touch"===e.inputType;t.attr("class",function(t){var n=Object(u["select"])(this),i=!n.empty()&&n.attr("class")||"";return i+e.generateClass(h.legendItem,t)}).style("visibility",function(t){return e.isLegendToShow(t)?"visible":"hidden"}).style("cursor","pointer").on("click",function(t){I(n.legend_item_onclick,e,t)||(u["event"].altKey?(e.api.hide(),e.api.show(t)):(e.api.toggle(t),!i&&e.isTargetToShow(t)?e.api.focus(t):e.api.revert())),i&&e.hideTooltip()}),i||t.on("mouseout",function(t){I(n.legend_item_onout,e,t)||(Object(u["select"])(this).classed(h.legendItemFocused,!1),e.api.revert())}).on("mouseover",function(t){I(n.legend_item_onover,e,t)||(Object(u["select"])(this).classed(h.legendItemFocused,!0),!e.transiting&&e.isTargetToShow(t)&&e.api.focus(t))})},updateLegendElement:function(t,e){var n,i,a,r=this,o=r.config,s=10,c=o.legend_item_tile_width+5,l=0,d=0,g=0,f={},p={},x={},v=[0],m={},_=0,y=r.isLegendRight||r.isLegendInset,b=t.filter(function(t){return!A(o.data_names[t])||null!==o.data_names[t]}),T=e.withTransition,w=function(t,e){return r.legendItemTextBox[e]||(r.legendItemTextBox[e]=r.getTextRect(t,h.legendItem)),r.legendItemTextBox[e]},k=function(t,e,n){var i,a=n===b.length-1,u=w(t,e),h=u.width+c+(a&&!y?0:10)+o.legend_padding,T=u.height+4,A=y?T:h,k=y?r.getLegendHeight():r.getLegendWidth(),S=function(t,e){e||(i=(k-g-A)/2,i<s&&(i=(k-A)/2,g=0,_++)),m[t]=_,v[_]=r.isLegendInset?10:i,f[t]=g,g+=A};if(0===n&&(g=0,_=0,l=0,d=0),o.legend_show&&!r.isLegendToShow(e))return p[e]=0,x[e]=0,m[e]=0,void(f[e]=0);p[e]=h,x[e]=T,(!l||h>=l)&&(l=h),(!d||T>=d)&&(d=T);var L=y?d:l;o.legend_equally?(Object.keys(p).forEach(function(t){return p[t]=l}),Object.keys(x).forEach(function(t){return x[t]=d}),i=(k-L*b.length)/2,i<s?(g=0,_=0,b.forEach(function(t){return S(t)})):S(e,!0)):S(e)};r.isLegendInset&&(_=o.legend_inset_step?o.legend_inset_step:b.length,r.updateLegendStep(_)),r.isLegendRight?(n=function(t){return l*m[t]},i=function(t){return v[m[t]]+f[t]}):r.isLegendInset?(n=function(t){return l*m[t]+10},i=function(t){return v[m[t]]+f[t]}):(n=function(t){return v[m[t]]+f[t]},i=function(t){return d*m[t]});var S=function(t,e){return n(t,e)+4+o.legend_item_tile_width},L=function(t,e){return n(t,e)},C=function(t,e){return n(t,e)-2},O=function(t,e){return n(t,e)-2+o.legend_item_tile_width},X=function(t,e){return i(t,e)+9},R=function(t,e){return i(t,e)-5},F=function(t,e){return i(t,e)+4},z=-200,E=r.legend.selectAll(".".concat(h.legendItem)).data(b).enter().append("g");r.setLegendItem(E),E.append("text").text(function(t){return A(o.data_names[t])?o.data_names[t]:t}).each(function(t,e){k(this,t,e)}).style("pointer-events","none").attr("x",y?S:z).attr("y",y?z:X),E.append("rect").attr("class",h.legendItemEvent).style("fill-opacity","0").attr("x",y?L:z).attr("y",y?z:R);var I=r.config.legend_usePoint;if(I){var M=[];E.append(function(t){var e=D(o.point_pattern)?o.point_pattern:[o.point_type];-1===M.indexOf(t)&&M.push(t);var n=e[M.indexOf(t)%e.length];return"rectangle"===n&&(n="rect"),document.createElementNS(u["namespaces"].svg,r.hasValidPointType(n)?n:"use")}).attr("class",h.legendItemPoint).style("fill",function(t){return r.color(t)}).style("pointer-events","none").attr("href",function(t,e,n){var i=n[e],a=i.nodeName.toLowerCase();return"use"===a?"#".concat(r.datetimeId,"-point-").concat(t):void 0})}else E.append("line").attr("class",h.legendItemTile).style("stroke",r.color).style("pointer-events","none").attr("x1",y?C:z).attr("y1",y?z:F).attr("x2",y?O:z).attr("y2",y?z:F).attr("stroke-width",o.legend_item_tile_height);a=r.legend.select(".".concat(h.legendBackground," rect")),r.isLegendInset&&l>0&&0===a.size()&&(a=r.legend.insert("g",".".concat(h.legendItem)).attr("class",h.legendBackground).append("rect"));var B=r.legend.selectAll("text").data(b).text(function(t){return A(o.data_names[t])?o.data_names[t]:t}).each(function(t,e){k(this,t,e)});(T?B.transition():B).attr("x",S).attr("y",X);var P=r.legend.selectAll("rect.".concat(h.legendItemEvent)).data(b);if((T?P.transition():P).attr("width",function(t){return p[t]}).attr("height",function(t){return x[t]}).attr("x",L).attr("y",R),I){var Y=r.legend.selectAll(".".concat(h.legendItemPoint)).data(b);(T?Y.transition():Y).each(function(){var t,e,n,i=this.nodeName.toLowerCase(),a=r.config.point_r,o="x",s="y",c=2,l=2.5;if("circle"===i){var d=.2*a;o="cx",s="cy",t=a+d,c=2*a,l=-d}else if("rect"===i){var g=2.5*a;e=g,n=g,l=3}Object(u["select"])(this).attr(o,function(t){return C(t)+c}).attr(s,function(t){return F(t)-l}).attr("r",t).attr("width",e).attr("height",n)})}else{var j=r.legend.selectAll("line.".concat(h.legendItemTile)).data(b);(T?j.transition():j).style("stroke",r.color).attr("x1",C).attr("y1",F).attr("x2",O).attr("y2",F)}a&&(T?a.transition():a).attr("height",r.getLegendHeight()-12).attr("width",l*(_+1)+10),r.legend.selectAll(".".concat(h.legendItem)).classed(h.legendItemHidden,function(t){return!r.isTargetToShow(t)}),r.updateLegendItemWidth(l),r.updateLegendItemHeight(d),r.updateLegendStep(_)}});var mt=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"left",n=arguments.length>1?arguments[1]:void 0,i=T(n);return t=e.indexOf("center")>-1?i?n/2:"middle":e.indexOf("right")>-1?i?n:"end":i?0:"start",t};N(rt.prototype,{initTitle:function(){var t=this;if(t.config.title_text){t.title=t.svg.append("g");var e=t.title.append("text").style("text-anchor",mt(t.config.title_position)).attr("class",h.title);t.config.title_text.split("\n").forEach(function(t,n){e.append("tspan").attr("x",0).attr("dy","".concat(n?"1.5":".3","em")).text(t)})}},redrawTitle:function(){var t=this;if(t.title){var e=t.yForTitle.call(t);/g/i.test(t.title.node().tagName)?t.title.attr("transform","translate(".concat(mt(t.config.title_position,t.currentWidth),", ").concat(e,")")):t.title.attr("x",t.xForTitle.call(t)).attr("y",e)}},xForTitle:function(){var t,e=this,n=e.config,i=n.title_position||"left";return/(right|center)/.test(i)?(t=e.currentWidth-e.getTextRect(e.title,h.title).width,i.indexOf("right")>=0?t-=n.title_padding.right||0:i.indexOf("center")>=0&&(t/=2)):t=n.title_padding.left||0,t},yForTitle:function(){var t=this;return(t.config.title_padding.top||0)+t.getTextRect(t.title,h.title).height},getTitlePadding:function(){var t=this;return t.yForTitle()+(t.config.title_padding.bottom||0)}}),N(rt.prototype,{initClip:function(){var t=this;t.clipId="".concat(t.datetimeId,"-clip"),t.clipIdForXAxis="".concat(t.clipId,"-xaxis"),t.clipIdForYAxis="".concat(t.clipId,"-yaxis"),t.clipIdForGrid="".concat(t.clipId,"-grid"),t.clipPath=t.getClipPath(t.clipId),t.clipPathForXAxis=t.getClipPath(t.clipIdForXAxis),t.clipPathForYAxis=t.getClipPath(t.clipIdForYAxis),t.clipPathForGrid=t.getClipPath(t.clipIdForGrid)},getClipPath:function(t){var e=this,n=e.config;if(!n.clipPath&&/-clip$/.test(t)||!n.axis_x_clipPath&&/-clip-xaxis$/.test(t)||!n.axis_y_clipPath&&/-clip-yaxis$/.test(t))return null;var i=window.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0;return"url(".concat(i?"":document.URL.split("#")[0],"#").concat(t,")")},appendClip:function(t,e){return t.append("clipPath").attr("id",e).append("rect")},getAxisClipX:function(t){var e=Math.max(30,this.margin.left);return t?-(1+e):-(e-1)},getAxisClipY:function(t){return t?-20:-this.margin.top},getXAxisClipX:function(){var t=this;return t.getAxisClipX(!t.config.axis_rotated)},getXAxisClipY:function(){var t=this;return t.getAxisClipY(!t.config.axis_rotated)},getYAxisClipX:function(){var t=this;return t.config.axis_y_inner?-1:t.getAxisClipX(t.config.axis_rotated)},getYAxisClipY:function(){var t=this;return t.getAxisClipY(t.config.axis_rotated)},getAxisClipWidth:function(t){var e=this,n=Math.max(30,e.margin.left),i=Math.max(30,e.margin.right);return t?e.width+2+n+i:e.margin.left+20},getAxisClipHeight:function(t){return(t?this.margin.bottom:this.margin.top+this.height)+20},getXAxisClipWidth:function(){var t=this;return t.getAxisClipWidth(!t.config.axis_rotated)},getXAxisClipHeight:function(){var t=this;return t.getAxisClipHeight(!t.config.axis_rotated)},getYAxisClipWidth:function(){var t=this;return t.getAxisClipWidth(t.config.axis_rotated)+(t.config.axis_y_inner?20:0)},getYAxisClipHeight:function(){var t=this;return t.getAxisClipHeight(t.config.axis_rotated)}}),N(rt.prototype,{initRegion:function(){var t=this;t.region=t.main.append("g").attr("clip-path",t.clipPath).attr("class",h.regions)},updateRegion:function(t){var e=this,n=e.config;e.region.style("visibility",e.hasArcType()?"hidden":"visible"),e.mainRegion=e.main.select(".".concat(h.regions)).selectAll(".".concat(h.region)).data(n.regions),e.mainRegion.exit().transition().duration(t).style("opacity","0").remove(),e.mainRegion=e.mainRegion.enter().append("g").merge(e.mainRegion).attr("class",e.classRegion.bind(e)),e.mainRegion.append("rect").style("fill-opacity","0")},redrawRegion:function(t){var e=this,n=e.mainRegion.select("rect");return n=(t?n.transition():n).attr("x",e.regionX.bind(e)).attr("y",e.regionY.bind(e)).attr("width",e.regionWidth.bind(e)).attr("height",e.regionHeight.bind(e)),[(t?n.transition():n).style("fill-opacity",function(t){return _(t.opacity)?t.opacity:"0.1"}).on("end",function(){Object(u["select"])(this.parentNode).selectAll("rect:not([x])").remove()})]},getRegionXY:function(t,e){var n,i=this,a=i.config,r=a.axis_rotated,o="x"===t,s="start",c=0;return"y"===e.axis||"y2"===e.axis?(!o&&(s="end"),(o?r:!r)&&s in e&&(n=i[e.axis],c=n(e[s]))):(o?!r:r)&&s in e&&(n=i.zoomScale||i.x,c=n(i.isTimeSeries()?i.parseDate(e[s]):e[s])),c},regionX:function(t){return this.getRegionXY("x",t)},regionY:function(t){return this.getRegionXY("y",t)},getRegionSize:function(t,e){var n,i=this,a=i.config,r=a.axis_rotated,o="width"===t,s=i[o?"regionX":"regionY"](e),c="end",l=i[t];return"y"===e.axis||"y2"===e.axis?(!o&&(c="start"),(o?r:!r)&&c in e&&(n=i[e.axis],l=n(e[c]))):(o?!r:r)&&c in e&&(n=i.zoomScale||i.x,l=n(i.isTimeSeries()?i.parseDate(e[c]):e[c])),l<s?0:l-s},regionWidth:function(t){return this.getRegionSize("width",t)},regionHeight:function(t){return this.getRegionSize("height",t)},isRegionOnX:function(t){return!t.axis||"x"===t.axis}}),N(rt.prototype,{drag:function(t){var e=this,n=e.config,i=e.main;if(!e.hasArcType()&&n.data_selection_enabled&&(!n.zoom_enabled||e.zoom.altDomain)&&n.data_selection_multiple){var a=o()(e.dragStart,2),r=a[0],s=a[1],c=o()(t,2),l=c[0],d=c[1],g=Math.min(r,l),f=Math.max(r,l),p=n.data_selection_grouped?e.margin.top:Math.min(s,d),x=n.data_selection_grouped?e.height:Math.max(s,d);i.select(".".concat(h.dragarea)).attr("x",g).attr("y",p).attr("width",f-g).attr("height",x-p),i.selectAll(".".concat(h.shapes)).selectAll(".".concat(h.shape)).filter(function(t){return n.data_selection_isselectable(t)}).each(function(t,n){var i,a=Object(u["select"])(this),r=a.classed(h.SELECTED),o=a.classed(h.INCLUDED),s=!1;if(a.classed(h.circle)){var c=1*a.attr("cx"),l=1*a.attr("cy");i=e.togglePoint,s=g<c&&c<f&&p<l&&l<x}else{if(!a.classed(h.bar))return;var d=P(this),v=d.x,m=(l=d.y,d.width),_=d.height;i=e.togglePath,s=!(f<v||v+m<g)&&!(x<l||l+_<p)}s^o&&(a.classed(h.INCLUDED,!o),a.classed(h.SELECTED,!r),i.call(e,!r,a,t,n))})}},dragstart:function(t){var e=this,n=e.config;e.hasArcType()||!n.data_selection_enabled||(e.dragStart=t,e.main.select(".".concat(h.chart)).append("rect").attr("class",h.dragarea).style("opacity","0.1"),e.setDragStatus(!0))},dragend:function(){var t=this,e=t.config;t.hasArcType()||!e.data_selection_enabled||(t.main.select(".".concat(h.dragarea)).transition().duration(100).style("opacity","0").remove(),t.main.selectAll(".".concat(h.shape)).classed(h.INCLUDED,!1),t.setDragStatus(!1))},setDragStatus:function(t){this.dragging=t}});var _t=n(21);N(rt.prototype,{selectPoint:function(t,e,n){var i=this,a=i.config,r=a.axis_rotated,o=(r?i.circleY:i.circleX).bind(i),s=(r?i.circleX:i.circleY).bind(i),c=i.pointSelectR.bind(i);I(a.data_onselected,i.api,e,t.node()),i.main.select(".".concat(h.selectedCircles).concat(i.getTargetSelectorSuffix(e.id))).selectAll(".".concat(h.selectedCircle,"-").concat(n)).data([e]).enter().append("circle").attr("class",function(){return i.generateClass(h.selectedCircle,n)}).attr("cx",o).attr("cy",s).attr("stroke",i.color).attr("r",function(t){return 1.4*i.pointSelectR(t)}).transition().duration(100).attr("r",c)},unselectPoint:function(t,e,n){var i=this;I(i.config.data_onunselected,i.api,e,t.node()),i.main.select(".".concat(h.selectedCircles).concat(i.getTargetSelectorSuffix(e.id))).selectAll(".".concat(h.selectedCircle,"-").concat(n)).transition().duration(100).attr("r",0).remove()},togglePoint:function(t,e,n,i){var a="".concat(t?"":"un","selectPoint");this[a](e,n,i)},selectPath:function(t,e){var n=this,i=n.config;I(i.data_onselected,n,e,t.node()),i.interaction_brighten&&t.transition().duration(100).style("fill",function(){return Object(_t["rgb"])(n.color(e)).brighter(.75)})},unselectPath:function(t,e){var n=this,i=n.config;I(i.data_onunselected,n,e,t.node()),i.interaction_brighten&&t.transition().duration(100).style("fill",function(){return n.color(e)})},togglePath:function(t,e,n,i){this["".concat(t?"":"un","selectPath")](e,n,i)},getToggle:function(t,e){var n=this;return"path"===t.nodeName?n.togglePath:n.isStepType(e)?function(){}:n.togglePoint},toggleShape:function(t,e,n){var i,a=this,r=a.config,o=Object(u["select"])(t),s=o.classed(h.SELECTED),c=a.getToggle(t,e).bind(a);if(r.data_selection_enabled&&r.data_selection_isselectable(e)){if(!r.data_selection_multiple){var l=".".concat(h.shapes);r.data_selection_grouped&&(l+=a.getTargetSelectorSuffix(e.id)),a.main.selectAll(l).selectAll(".".concat(h.shape)).each(function(t,e){var n=Object(u["select"])(this);n.classed(h.SELECTED)&&(i=n,c(!1,n.classed(h.SELECTED,!1),t,e))})}i&&i.node()===o.node()||(o.classed(h.SELECTED,!s),c(!s,o,e,n))}}}),N(rt.prototype,{initBrush:function(){var t=this,e=t.config,n=e.axis_rotated;t.brush=n?Object(m["brushY"])():Object(m["brushX"])();var i,a,r=function(){t.redrawForBrush()},o=function(){var e=t.svg.select(".".concat(h.brush," .overlay")),i={width:0,height:0};return e.size()&&(i.width=+e.attr("width"),i.height=+e.attr("height")),i[n?"width":"height"]};t.brush.on("start",function(){"touch"===t.inputType&&t.hideTooltip(),r()}).on("brush",r).on("end",function(){i=t.x.orgDomain()}),t.brush.updateResize=function(){var e=this;a&&clearTimeout(a),a=setTimeout(function(){var n=e.getSelection();i&&Object(m["brushSelection"])(n.node())&&e.move(n,i.map(t.subX.orgScale()))},0)},t.brush.update=function(){var e=this.extent()();return 0===e[1].filter(function(t){return isNaN(t)}).length&&t.context&&t.context.select(".".concat(h.brush)).call(this),this},t.brush.scale=function(i){var a=e.subchart_size_height||o(),r=t.getExtent();!r&&i.range?r=[[0,0],[i.range()[1],a]]:R(r)&&(r=r.map(function(t,e){return[t,e>0?a:e]})),n&&r[1].reverse(),this.extent(r),this.update()},t.brush.getSelection=function(){return t.context?t.context.select(".".concat(h.brush)):Object(u["select"])([])}},initSubchart:function(){var t=this,e=t.config,n=e.subchart_show?"visible":"hidden",i="".concat(t.clipId,"-subchart"),a=t.getClipPath(i);t.clipIdForSubchart=i,t.appendClip(t.defs,i),t.initBrush(),t.context=t.svg.append("g").attr("transform",t.getTranslate("context"));var r=t.context;r.style("visibility",n),r.append("g").attr("clip-path",a).attr("class",h.chart),t.hasType("bar")&&r.select(".".concat(h.chart)).append("g").attr("class",h.chartBars),r.select(".".concat(h.chart)).append("g").attr("class",h.chartLines),r.append("g").attr("clip-path",a).attr("class",h.brush).call(t.brush),t.axes.subx=r.append("g").attr("class",h.axisX).attr("transform",t.getTranslate("subx")).attr("clip-path",e.axis_rotated?"":t.clipPathForXAxis).style("visibility",e.subchart_axis_x_show?n:"hidden")},updateTargetsForSubchart:function(t){var e=this,n=e.context,i=e.config,a=e.classChartBar.bind(e),r=e.classBars.bind(e),o=e.classChartLine.bind(e),s=e.classLines.bind(e),c=e.classAreas.bind(e);if(i.subchart_show){var l=n.select(".".concat(h.chartBars)).selectAll(".".concat(h.chartBar)).data(t).attr("class",a),u=l.enter().append("g").style("opacity","0").attr("class",a).merge(l);u.append("g").attr("class",r);var d=n.select(".".concat(h.chartLines)).selectAll(".".concat(h.chartLine)).data(t).attr("class",o),g=d.enter().append("g").style("opacity","0").attr("class",o).merge(d);g.append("g").attr("class",s),e.hasType("area")&&g.append("g").attr("class",c),n.selectAll(".".concat(h.brush," rect")).attr(i.axis_rotated?"width":"height",i.axis_rotated?e.width2:e.height2)}},updateBarForSubchart:function(t){var e=this;e.contextBar=e.context.selectAll(".".concat(h.bars)).selectAll(".".concat(h.bar)).data(e.barData.bind(e)),e.contextBar.exit().transition().duration(t).style("opacity","0").remove(),e.contextBar=e.contextBar.enter().append("path").attr("class",e.classBar.bind(e)).style("stroke","none").style("fill",e.color).merge(e.contextBar).style("opacity",e.initialOpacity.bind(e))},redrawBarForSubchart:function(t,e,n){var i=e?this.contextBar.transition(j()).duration(n):this.contextBar;i.attr("d",t).style("opacity","1")},updateLineForSubchart:function(t){var e=this;e.contextLine=e.context.selectAll(".".concat(h.lines)).selectAll(".".concat(h.line)).data(e.lineData.bind(e)),e.contextLine.exit().transition().duration(t).style("opacity","0").remove(),e.contextLine=e.contextLine.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color).merge(e.contextLine).style("opacity",e.initialOpacity.bind(e))},redrawLineForSubchart:function(t,e,n){var i=e?this.contextLine.transition(j()).duration(n):this.contextLine;i.attr("d",t).style("opacity","1")},updateAreaForSubchart:function(t){var e=this;e.contextArea=e.context.selectAll(".".concat(h.areas)).selectAll(".".concat(h.area)).data(e.lineData.bind(e)),e.contextArea.exit().transition().duration(t).style("opacity","0").remove(),e.contextArea=e.contextArea.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",function(){return e.orgAreaOpacity=Object(u["select"])(this).style("opacity"),"0"}).merge(e.contextArea).style("opacity","0")},redrawAreaForSubchart:function(t,e,n){var i=e?this.contextArea.transition(j()).duration(n):this.contextArea;i.attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)},redrawSubchart:function(t,e,n){var i=this,a=i.config;i.context.style("visibility",a.subchart_show?"visible":"hidden"),a.subchart_show&&(u["event"]&&"zoom"===u["event"].type&&i.brush.update(),t&&(!V(i)&&i.brush.update(),Object.keys(n.type).forEach(function(t){var a=G(t),r=i["generateDraw".concat(a)](n.indices[t],!0);i["update".concat(a,"ForSubchart")](e),i["redraw".concat(a,"ForSubchart")](r,e,e)})))},redrawForBrush:function(){var t=this;t.redraw({withTransition:!1,withY:t.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),t.config.subchart_onbrush.call(t.api,t.x.orgDomain())},transformContext:function(t,e){var n,i=this;e&&e.axisSubX?n=e.axisSubX:(n=i.context.select(".".concat(h.axisX)),t&&(n=n.transition())),i.context.attr("transform",i.getTranslate("context")),n.attr("transform",i.getTranslate("subx"))},getExtent:function(){var t=this,e=t.config.axis_x_extent;return e&&(y(e)?e=e(t.getXDomain(t.data.targets),t.subX):t.isTimeSeries()&&e.every(isNaN)&&(e=e.map(function(e){return t.subX(t.parseDate(e))}))),e}});var yt=n(22);N(rt.prototype,{initZoom:function(){var t=this;t.zoomScale=null,t.generateZoom(),t.initZoomBehaviour()},bindZoomEvent:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this,n=e.config.zoom_enabled;e.redrawEventRect();var i=e.main.select(".".concat(h.eventRects));n&&t?e.bindZoomOnEventRect(i,n.type):!1===t&&(e.api.unzoom(),i.on(".zoom",null).on(".drag",null))},generateZoom:function(){var t=this,e=t.config,n=Object(yt["zoom"])().duration(0).on("start",t.onZoomStart.bind(t)).on("zoom",t.onZoom.bind(t)).on("end",t.onZoomEnd.bind(t));n.orgScaleExtent=function(){var n=e.zoom_extent||[1,10];return[n[0],Math.max(t.getMaxDataCount()/n[1],n[1])]},n.updateScaleExtent=function(){var e=C(t.x.orgDomain())/C(t.getZoomDomain()),n=this.orgScaleExtent();return this.scaleExtent([n[0]*e,n[1]*e]),this},n.updateTransformScale=function(n){var i=n.rescaleX(t.x),a=t.trimXDomain(i.domain()),r=e.zoom_rescale;i.domain(a,t.orgXDomain),t.zoomScale=t.getCustomizedScale(i),t.xAxis.scale(t.zoomScale),r&&t.x.domain(t.zoomScale.orgDomain())},t.zoom=n},onZoomStart:function(){var t=this,e=u["event"].sourceEvent;e&&(t.zoom.altDomain=e.altKey?t.x.orgDomain():null,t.zoom.startEvent=e,I(t.config.zoom_onzoomstart,t.api,e))},onZoom:function(){var t=this,e=t.config,n=u["event"];if(e.zoom_enabled&&n.sourceEvent){var i="mousemove"===n.sourceEvent.type,a=n.transform;return t.zoom.updateTransformScale(a),0===t.filterTargetsToShow(t.data.targets).length?void 0:i&&t.zoom.altDomain?(t.x.domain(t.zoom.altDomain),void a.scale(t.zoomScale).updateScaleExtent()):(t.isCategorized()&&t.x.orgDomain()[0]===t.orgXDomain[0]&&t.x.domain([t.orgXDomain[0]-1e-10,t.x.orgDomain()[1]]),t.redraw({withTransition:!1,withY:e.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),t.cancelClick=i,void I(e.zoom_onzoom,t.api,t.zoomScale.domain()))}},onZoomEnd:function(){var t=this,e=t.zoom.startEvent;!e||event&&e.clientX===event.clientX&&e.clientY===event.clientY||(t.redrawEventRect(),t.updateZoom(),I(t.config.zoom_onzoomend,t.api,t[t.zoomScale?"zoomScale":"subX"].domain()))},getZoomDomain:function(){var t=this,e=t.config,n=o()(t.orgXDomain,2),i=n[0],a=n[1];return A(e.zoom_x_min)&&(i=q("min",[i,e.zoom_x_min])),A(e.zoom_x_max)&&(a=q("max",[a,e.zoom_x_max])),[i,a]},updateZoom:function(t){var e=this;if(e.zoomScale){var n=e.zoomScale.domain(),i=e.subX.domain(),a=.015,r=(n[0]<=i[0]||n[0]-a<=i[0])&&(i[1]<=n[1]||i[1]<=n[1]-a);(t||r)&&(e.xAxis.scale(e.subX),e.x.domain(e.subX.orgDomain()),e.zoomScale=null)}},bindZoomOnEventRect:function(t,e){var n=this,i="drag"===e?n.zoomBehaviour:n.zoom;t.call(i).on("dblclick.zoom",null)},initZoomBehaviour:function(){var t=this,e=t.config,n=e.axis_rotated,i=0,a=0,r=null;t.zoomBehaviour=Object(lt["drag"])().clickDistance(4).on("start",function(){t.setDragStatus(!0),r||(r=t.main.append("rect").attr("clip-path",t.clipPath).attr("class",h.zoomBrush).attr("width",n?t.width:0).attr("height",n?0:t.height)),i=Object(u["mouse"])(this)[0],a=i,r.attr("x",i).attr("width",0),t.onZoomStart()}).on("drag",function(){a=Object(u["mouse"])(this)[0],r.attr("x",Math.min(i,a)).attr("width",Math.abs(a-i))}).on("end",function(){var e,n=t.zoomScale||t.x;if(t.setDragStatus(!1),r.attr("x",0).attr("width",0),i>a&&(e=[a,i],i=e[0],a=e[1]),i<0&&(a+=Math.abs(i),i=0),i!==a)t.api.zoom([i,a].map(function(t){return n.invert(t)})),t.onZoomEnd();else if(t.isMultipleX())t.clickHandlerForMultipleXS.bind(this)(t);else{var s=u["event"].sourceEvent||u["event"],c="clientX"in s?[s.clientX,s.clientY]:[s.x,s.y],l=o()(c,2),d=l[0],g=l[1],h=document.elementFromPoint(d,g);t.clickHandlerForSingleX.bind(h)(Object(u["select"])(h).datum(),t)}})},setZoomResetButton:function(){var t=this,e=t.config,n=e.zoom_resetButton;n&&"drag"===e.zoom_enabled.type&&(t.zoom.resetBtn?t.zoom.resetBtn.style("display",null):t.zoom.resetBtn=t.selectChart.append("div").classed(h.button,!0).append("span").on("click",t.api.unzoom.bind(t)).classed(h.buttonZoomReset,!0).text(n.text||"Reset Zoom"))}});var bt=function(t,e,n){var i=Object(u["select"])(t.cloneNode(!0));return i.attr("id",n).insert("rect",":first-child").attr("width",i.attr("width")).attr("height",i.attr("height")).style("fill",e),{id:n,node:i.node()}},Tt=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];N(rt.prototype,{getColorFromCss:function(){var t=document.body,e=t["__colorPattern__"];if(!e){var n=document.createElement("span");n.className=h.colorPattern,n.style.display="none",t.appendChild(n);var i=window.getComputedStyle(n).backgroundImage;n.parentNode.removeChild(n),i.indexOf(";")>-1&&(e=i.replace(/url[^#]*|["'()]|(\s|%20)/g,"").split(";").map(function(t){return t.trim().replace(/[\"'\s]/g,"")}).filter(Boolean),t["__colorPattern__"]=e)}return e},generateColor:function(){var t=this,e=t.config,n=e.data_colors,i=e.data_color,a=[],r=D(e.color_pattern)?e.color_pattern:Object(Q["scaleOrdinal"])(t.getColorFromCss()||Tt).range(),o=r;if(y(e.color_tiles)){var s=e.color_tiles(),c=r.map(function(e,n){var i=e.replace(/[#\(\)\s,]/g,""),a="".concat(t.datetimeId,"-pattern-").concat(i,"-").concat(n);return bt(s[n%s.length],e,a)});r=c.map(function(t){return"url(#".concat(t.id,")")}),t.patterns=c}return function(e){var s,c=e.id||e.data&&e.data.id||e,l=t.isTypeOf(c,["line","spline","step"])||!t.config.data_types[c];return y(n[c])?s=n[c](e):n[c]?s=n[c]:(a.indexOf(c)<0&&a.push(c),s=l?o[a.indexOf(c)%o.length]:r[a.indexOf(c)%r.length],n[c]=s),y(i)?i(s,e):s}},generateLevelColor:function(){var t=this,e=t.config,n=e.color_pattern,i=e.color_threshold,a="value"===i.unit,r=i.max||100,o=i.values&&i.values.length?i.values:[];return D(i)?function(t){for(var e,i,s=n[n.length-1],c=0;i=o[c];c++)if(e=a?t:100*t/r,e<i){s=n[c];break}return s}:null},setOverColor:function(t,e){var n=this,i=n.config,a=i.color_onover,r=t?a:n.color;F(r)?r=function(t){var e=t.id;return e in a?a[e]:n.color(e)}:b(r)&&(r=function(){return a}),F(e)?n.main.selectAll(".".concat(h.arc,"-").concat(e.id)).style("fill",r(e)):n.main.selectAll(".".concat(h.shape,"-").concat(e)).each(function(t){var e=r(t);this.style.stroke=e,this.style.fill=e})}});var wt=function(t,e,n){var i=t.config,a="axis_".concat(e,"_tick_format"),r=i[a]?i[a]:t.defaultValueFormat;return r(n)};N(rt.prototype,{getYFormat:function(t){var e=this,n=e.yFormat,i=e.y2Format;return t&&!e.hasType("gauge")&&(n=e.defaultArcValueFormat,i=e.defaultArcValueFormat),function(t,a,r){var o="y2"===e.axis.getId(r)?i:n;return o.call(e,t,a)}},yFormat:function(t){return wt(this,"y",t)},y2Format:function(t){return wt(this,"y2",t)},defaultValueFormat:function(t){return _(t)?+t:""},defaultArcValueFormat:function(t,e){return"".concat((100*e).toFixed(1),"%")},dataLabelFormat:function(t){var e=this,n=e.config.data_labels,i=function(t){return _(t)?+t:""},a=i;return y(n.format)?a=n.format:O(n.format)&&(a=n.format[t]?!0===n.format[t]?i:n.format[t]:function(){return""}),a}}),N(rt.prototype,{addCache:function(t,e){var n=!!(arguments.length>2&&void 0!==arguments[2])&&arguments[2];this.cache[t]=n?this.cloneTarget(e):e},removeCache:function(t){var e=this;H(t).forEach(function(t){return delete e.cache[t]})},getCache:function(t){var e=!!(arguments.length>1&&void 0!==arguments[1])&&arguments[1];if(e){for(var n,i=[],a=0;n=t[a];a++)n in this.cache&&i.push(this.cloneTarget(this.cache[n]));return i}return this.cache[t]||null},resetCache:function(t){var e=this;for(var n in e.cache)(t||/^\$/.test(n))&&(e.cache[n]=null)}}),N(rt.prototype,{generateClass:function(t,e){return" ".concat(t," ").concat(t+this.getTargetSelectorSuffix(e))},classText:function(t){return this.generateClass(h.text,t.index)},classTexts:function(t){return this.generateClass(h.texts,t.id)},classShape:function(t){return this.generateClass(h.shape,t.index)},classShapes:function(t){return this.generateClass(h.shapes,t.id)},generateExtraLineClass:function(){var t=this,e=t.config.line_classes||[],n=[];return function(t){var i=t.id||t.data&&t.data.id||t;return n.indexOf(i)<0&&n.push(i),e[n.indexOf(i)%e.length]}},classLine:function(t){return this.classShape(t)+this.generateClass(h.line,t.id)},classLines:function(t){return this.classShapes(t)+this.generateClass(h.lines,t.id)},classCircle:function(t){return this.classShape(t)+this.generateClass(h.circle,t.index)},classCircles:function(t){return this.classShapes(t)+this.generateClass(h.circles,t.id)},classBar:function(t){return this.classShape(t)+this.generateClass(h.bar,t.index)},classBars:function(t){return this.classShapes(t)+this.generateClass(h.bars,t.id)},classArc:function(t){return this.classShape(t.data)+this.generateClass(h.arc,t.data.id)},classArcs:function(t){return this.classShapes(t.data)+this.generateClass(h.arcs,t.data.id)},classArea:function(t){return this.classShape(t)+this.generateClass(h.area,t.id)},classAreas:function(t){return this.classShapes(t)+this.generateClass(h.areas,t.id)},classRegion:function(t,e){return"".concat(this.generateClass(h.region,e)," ").concat("class"in t?t.class:"")},classEvent:function(t){return this.generateClass(h.eventRect,t.index)},classTarget:function(t){var e=this.config.data_classes[t],n="";return e&&(n=" ".concat(h.target,"-").concat(e)),this.generateClass(h.target,t)+n},classFocus:function(t){return this.classFocused(t)+this.classDefocused(t)},classFocused:function(t){return" ".concat(this.focusedTargetIds.indexOf(t.id)>=0?h.focused:"")},classDefocused:function(t){return" ".concat(this.defocusedTargetIds.indexOf(t.id)>=0?h.defocused:"")},classChartText:function(t){return h.chartText+this.classTarget(t.id)},classChartLine:function(t){return h.chartLine+this.classTarget(t.id)},classChartBar:function(t){return h.chartBar+this.classTarget(t.id)},classChartArc:function(t){return h.chartArc+this.classTarget(t.data.id)},classChartRadar:function(t){return h.chartRadar+this.classTarget(t.id)},getTargetSelectorSuffix:function(t){return t||0===t?"-".concat(t).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},selectorTarget:function(t,e){return"".concat(e||"",".").concat(h.target+this.getTargetSelectorSuffix(t))},selectorTargets:function(t,e){var n=this,i=t||[];return i.length?i.map(function(t){return n.selectorTarget(t,e)}):null},selectorLegend:function(t){return".".concat(h.legendItem+this.getTargetSelectorSuffix(t))},selectorLegends:function(t){var e=this;return t&&t.length?t.map(function(t){return e.selectorLegend(t)}):null}}),N(ot.prototype,{focus:function(t){var e=this.internal,n=e.mapToTargetIds(t),i=e.svg.selectAll(e.selectorTargets(n.filter(e.isTargetToShow,e)));this.revert(),this.defocus(),i.classed(h.focused,!0).classed(h.defocused,!1),e.hasArcType()&&e.expandArc(n),e.toggleFocusLegend(n,!0),e.focusedTargetIds=n,e.defocusedTargetIds=e.defocusedTargetIds.filter(function(t){return n.indexOf(t)<0})},defocus:function(t){var e=this.internal,n=e.mapToTargetIds(t),i=e.svg.selectAll(e.selectorTargets(n.filter(e.isTargetToShow,e)));i.classed(h.focused,!1).classed(h.defocused,!0),e.hasArcType()&&e.unexpandArc(n),e.toggleFocusLegend(n,!1),e.focusedTargetIds=e.focusedTargetIds.filter(function(t){return n.indexOf(t)<0}),e.defocusedTargetIds=n},revert:function(t){var e=this.internal,n=e.mapToTargetIds(t),i=e.svg.selectAll(e.selectorTargets(n));i.classed(h.focused,!1).classed(h.defocused,!1),e.hasArcType()&&e.unexpandArc(n),e.config.legend_show&&(e.showLegend(n.filter(e.isLegendToShow.bind(e))),e.legend.selectAll(e.selectorLegends(n)).filter(function(){return Object(u["select"])(this).classed(h.legendItemFocused)}).classed(h.legendItemFocused,!1)),e.focusedTargetIds=[],e.defocusedTargetIds=[]}}),N(ot.prototype,{_showHide:function(t,e,n){var i=this.internal,a=i.mapToTargetIds(e);i["".concat(t?"remove":"add","HiddenTargetIds")](a);var r=i.svg.selectAll(i.selectorTargets(a)),o=t?"1":"0";r.transition().style("opacity",o,"important").call(i.endall,function(){r.style("opacity",null).style("opacity",o)}),n.withLegend&&i["".concat(t?"show":"hide","Legend")](a),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},show:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._showHide(!0,t,e)},hide:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._showHide(!1,t,e)},toggle:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.internal,a={show:[],hide:[]};i.mapToTargetIds(t).forEach(function(t){return a[i.isTargetToShow(t)?"hide":"show"].push(t)}),a.show.length&&this.show(a.show,n),a.hide.length&&setTimeout(function(){return e.hide(a.hide,n)},0)}});var At=function(t){var e,n=this.internal,i=t;if(n.config.zoom_enabled&&i){var a=n.isTimeSeries();if(a&&(i=i.map(function(t){return n.parseDate(t)})),n.config.subchart_show){var r=n.zoomScale||n.x;n.brush.getSelection().call(n.brush.move,[r(i[0]),r(i[1])]),e=i}else n.x.domain(i),n.zoomScale=n.x,n.xAxis.scale(n.zoomScale),e=n.zoomScale.orgDomain();n.redraw({withTransition:!0,withY:n.config.zoom_rescale,withDimension:!1}),n.setZoomResetButton(),I(n.config.zoom_onzoom,e)}else e=n.zoomScale?n.zoomScale.domain():n.x.orgDomain();return e};N(At,{enable:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"wheel",e=this.internal,n=e.config,i=t;t&&(i=b(t)&&/^(drag|wheel)$/.test(t)?{type:t}:t),n.zoom_enabled=i,e.zoom?!1===t&&e.bindZoomEvent(!1):(e.initZoom(),e.bindZoomEvent()),e.updateAndRedraw()},max:function(t){var e=this.internal,n=e.config;return(0===t||t)&&(n.zoom_x_max=q("max",[e.orgXDomain[1],t])),n.zoom_x_max},min:function(t){var e=this.internal,n=e.config;return(0===t||t)&&(n.zoom_x_min=q("min",[e.orgXDomain[0],t])),n.zoom_x_min},range:function(t){var e=this.zoom;if(F(t)){var n=t.min,i=t.max;A(n)&&e.min(n),A(i)&&e.max(i)}return{min:e.min(),max:e.max()}}}),N(ot.prototype,{zoom:At,unzoom:function(){var t=this.internal,e=t.config;if(t.zoomScale){e.subchart_show?t.brush.getSelection().call(t.brush.move,null):t.zoom.updateTransformScale(yt["zoomIdentity"]),t.updateZoom(!0),t.zoom.resetBtn&&t.zoom.resetBtn.style("display","none");var n=t.main.select(".".concat(h.eventRects));Object(yt["zoomTransform"])(n.node())!==yt["zoomIdentity"]&&t.zoom.transform(n,yt["zoomIdentity"]),t.redraw({withTransition:!0,withY:e.zoom_rescale})}}}),N(ot.prototype,{load:function(t){var e=this.internal,n=e.config;t.xs&&e.addXs(t.xs),"names"in t&&this.data.names(t.names),"classes"in t&&Object.keys(t.classes).forEach(function(e){n.data_classes[e]=t.classes[e]}),"categories"in t&&e.isCategorized()&&(n.axis_x_categories=t.categories),"axes"in t&&Object.keys(t.axes).forEach(function(e){n.data_axes[e]=t.axes[e]}),"colors"in t&&Object.keys(t.colors).forEach(function(e){n.data_colors[e]=t.colors[e]}),"unload"in t&&!1!==t.unload?e.unload(e.mapToTargetIds(!0===t.unload?null:t.unload),function(){return e.loadFromArgs(t)}):e.loadFromArgs(t)},unload:function(t){var e=this.internal,n=t||{};R(n)?n={ids:n}:b(n)&&(n={ids:[n]});var i=e.mapToTargetIds(n.ids);e.unload(i,function(){e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),e.removeCache(i),n.done&&n.done()})}});var kt=n(23);function St(t,e,n){var i=this,a=n||{withTransitionForAxis:!i.hasArcType()};a.withTransitionForTransform=!1,i.transiting=!1,i.setTargetType(t,e),i.updateTargets(i.data.targets),i.updateAndRedraw(a)}N(ot.prototype,{flow:function(t){var e,n,i,a,r=this.internal,o=[],s=r.getMaxDataCount(),c=0,l=0;if(t.json||t.rows||t.columns){e=r.convertData(t);var u=r.convertDataToTargets(e,!0);r.data.targets.forEach(function(t){for(var e=!1,n=0;n<u.length;n++)if(t.id===u[n].id){e=!0,t.values[t.values.length-1]&&(l=t.values[t.values.length-1].index+1),c=u[n].values.length;for(var i=0;i<c;i++)u[n].values[i].index=l+i,r.isTimeSeries()||(u[n].values[i].x=l+i);t.values=t.values.concat(u[n].values),u.splice(n,1);break}e||o.push(t.id)}),r.data.targets.forEach(function(t){for(var e=0;e<o.length;e++)if(t.id===o[e]){l=t.values[t.values.length-1].index+1;for(var n=0;n<c;n++)t.values.push({id:t.id,index:l+n,x:r.isTimeSeries()?r.getOtherTargetX(l+n):l+n,value:null})}}),r.data.targets.length&&u.forEach(function(t){for(var e=[],n=r.data.targets[0].values[0].index;n<l;n++)e.push({id:t.id,index:n,x:r.isTimeSeries()?r.getOtherTargetX(n):n,value:null});t.values.forEach(function(t){t.index+=l,r.isTimeSeries()||(t.x+=l)}),t.values=e.concat(t.values)}),r.data.targets=r.data.targets.concat(u);var d=r.data.targets[0],g=d.values[0];A(t.to)?(c=0,a=r.isTimeSeries()?r.parseDate(t.to):t.to,d.values.forEach(function(t){t.x<a&&c++})):A(t.length)&&(c=t.length),s?1===s&&r.isTimeSeries()&&(i=(d.values[d.values.length-1].x-g.x)/2,n=[new Date(+g.x-i),new Date(+g.x+i)]):(i=r.isTimeSeries()?d.values.length>1?d.values[d.values.length-1].x-g.x:g.x-r.getXDomain(r.data.targets)[0]:1,n=[g.x-i,g.x]),n&&r.updateXDomain(null,!0,!0,!1,n),r.updateTargets(r.data.targets),r.redraw({flow:{index:g.index,length:c,duration:_(t.duration)?t.duration:r.config.transition_duration,done:t.done,orgDataCount:s},withLegend:!0,withTransition:s>1,withTrimXDomain:!1,withUpdateXAxis:!0})}}}),N(rt.prototype,{generateFlow:function(t){var e=this,n=e.config;return function(){var i,a=t.targets,r=t.flow,o=t.shape.type,s=o.bar,c=o.line,l=o.area,g=t.shape.pos,f=g.cx,p=g.cy,x=g.xForText,v=g.yForText,m=t.xv,_=t.duration,y=1,b=r.index,T=r.length,w=e.getValueOnIndex(e.data.targets[0].values,b),A=e.getValueOnIndex(e.data.targets[0].values,b+T),k=e.x.domain(),S=r.duration||_,L=r.done||function(){},O=e.generateWait(),X=e.xgrid||Object(u["selectAll"])([]),D=e.xgridLines||Object(u["selectAll"])([]),R=e.mainRegion||Object(u["selectAll"])([]),F=e.mainText||Object(u["selectAll"])([]),z=e.mainBar||Object(u["selectAll"])([]),E=e.mainLine||Object(u["selectAll"])([]),I=e.mainArea||Object(u["selectAll"])([]),M=e.mainCircle||Object(u["selectAll"])([]);e.flowing=!0,e.data.targets.forEach(function(t){t.values.splice(0,T)});var B=e.updateXDomain(a,!0,!0);e.updateXGrid&&e.updateXGrid(!0),r.orgDataCount?i=1===r.orgDataCount||(w&&w.x)===(A&&A.x)?e.x(k[0])-e.x(B[0]):e.isTimeSeries()?e.x(k[0])-e.x(B[0]):e.x(w.x)-e.x(A.x):1===e.data.targets[0].values.length?e.isTimeSeries()?(w=e.getValueOnIndex(e.data.targets[0].values,0),A=e.getValueOnIndex(e.data.targets[0].values,e.data.targets[0].values.length-1),i=e.x(w.x)-e.x(A.x)):i=C(B)/2:i=e.x(k[0])-e.x(B[0]),y=C(k)/C(B);var P="translate(".concat(i,",0) scale(").concat(y,",1)");e.hideXGridFocus();var Y=Object(d["transition"])().ease(kt["easeLinear"]).duration(S);O.add([e.axes.x.transition(Y).call(function(t){return e.xAxis.setTransition(Y).create(t)}),z.transition(Y).attr("transform",P),E.transition(Y).attr("transform",P),I.transition(Y).attr("transform",P),M.transition(Y).attr("transform",P),F.transition(Y).attr("transform",P),R.filter(e.isRegionOnX).transition(Y).attr("transform",P),X.transition(Y).attr("transform",P),D.transition(Y).attr("transform",P)]),Y.call(O,function(){var t=[],i=[],a=[];if(T){for(var r,o=0;o<T;o++)r=b+o,t.push(".".concat(h.shape,"-").concat(r)),i.push(".".concat(h.text,"-").concat(r)),a.push(".".concat(h.eventRect,"-").concat(r));e.svg.selectAll(".".concat(h.shapes)).selectAll(t).remove(),e.svg.selectAll(".".concat(h.texts)).selectAll(i).remove(),e.svg.selectAll(".".concat(h.eventRects)).selectAll(a).remove(),e.svg.select(".".concat(h.xgrid)).remove()}if(X.size()&&X.attr("transform",null).attr(e.xgridAttr),D.attr("transform",null),D.select("line").attr("x1",n.axis_rotated?0:m).attr("x2",n.axis_rotated?e.width:m),D.select("text").attr("x",n.axis_rotated?e.width:0).attr("y",m),z.attr("transform",null).attr("d",s),E.attr("transform",null).attr("d",c),I.attr("transform",null).attr("d",l),M.attr("transform",null),e.isCirclePoint())M.attr("cx",f).attr("cy",p);else{var u=function(t){return f(t)-n.point_r},d=function(t){return p(t)-n.point_r};M.attr("x",u).attr("y",d).attr("cx",f).attr("cy",p)}F.attr("transform",null).attr("x",x).attr("y",v).style("fill-opacity",e.opacityForText.bind(e)),R.attr("transform",null),R.select("rect").filter(e.isRegionOnX).attr("x",e.regionX.bind(e)).attr("width",e.regionWidth.bind(e)),n.interaction_enabled&&e.redrawEventRect(),L(),e.flowing=!1})}}}),N(ot.prototype,{selected:function(t){var e=this.internal,n=[];return e.main.selectAll(".".concat(h.shapes+e.getTargetSelectorSuffix(t))).selectAll(".".concat(h.shape)).filter(function(){return Object(u["select"])(this).classed(h.SELECTED)}).each(function(t){return n.push(t)}),n},select:function(t,e,n){var i=this.internal,a=i.config;a.data_selection_enabled&&i.main.selectAll(".".concat(h.shapes)).selectAll(".".concat(h.shape)).each(function(r,o){var s=Object(u["select"])(this),c=r.data?r.data.id:r.id,l=i.getToggle(this,r).bind(i),d=a.data_selection_grouped||!t||t.indexOf(c)>=0,g=!e||e.indexOf(o)>=0,f=s.classed(h.SELECTED);s.classed(h.line)||s.classed(h.area)||(d&&g?a.data_selection_isselectable(r)&&!f&&l(!0,s.classed(h.SELECTED,!0),r,o):A(n)&&n&&f&&l(!1,s.classed(h.SELECTED,!1),r,o))})},unselect:function(t,e){var n=this.internal,i=n.config;i.data_selection_enabled&&n.main.selectAll(".".concat(h.shapes)).selectAll(".".concat(h.shape)).each(function(a,r){var o=Object(u["select"])(this),s=a.data?a.data.id:a.id,c=n.getToggle(this,a).bind(n),l=i.data_selection_grouped||!t||t.indexOf(s)>=0,d=!e||e.indexOf(r)>=0,g=o.classed(h.SELECTED);o.classed(h.line)||o.classed(h.area)||l&&d&&i.data_selection_isselectable(a)&&g&&c(!1,o.classed(h.SELECTED,!1),a,r)})}}),N(ot.prototype,{transform:function(t,e){var n=this.internal,i=["pie","donut"].indexOf(t)>=0?{withTransform:!0}:null;St.bind(n)(e,t,i)}}),N(ot.prototype,{groups:function(t){var e=this.internal,n=e.config;return w(t)?n.data_groups:(n.data_groups=t,e.redraw(),n.data_groups)}});var Lt=function(t){var e=this.internal,n=e.config;return t?(n.grid_x_lines=t,e.redrawWithoutRescale(),n.grid_x_lines):n.grid_x_lines};N(Lt,{add:function(t){return this.xgrids(this.internal.config.grid_x_lines.concat(t||[]))},remove:function(t){this.internal.removeGridLines(t,!0)}});var Ct=function(t){var e=this.internal,n=e.config;return t?(n.grid_y_lines=t,e.redrawWithoutRescale(),n.grid_y_lines):n.grid_y_lines};N(Ct,{add:function(t){return this.ygrids(this.internal.config.grid_y_lines.concat(t||[]))},remove:function(t){this.internal.removeGridLines(t,!1)}}),N(ot.prototype,{xgrids:Lt,ygrids:Ct});var Ot=function(t){var e=this.internal,n=e.config;return t?(n.regions=t,e.redrawWithoutRescale(),t):n.regions};N(Ot,{add:function(t){var e=this.internal,n=e.config;return t?(n.regions=n.regions.concat(t),e.redrawWithoutRescale(),n.regions):n.regions},remove:function(t){var e=this.internal,n=e.config,i=t||{},a=z(i,"duration",n.transition_duration),r=z(i,"classes",[h.region]),o=e.main.select(".".concat(h.regions)).selectAll(r.map(function(t){return".".concat(t)}));return(a?o.transition().duration(a):o).style("opacity","0").remove(),o=n.regions,Object.keys(i).length?(o=o.filter(function(t){var e=!1;return!t.class||(t.class.split(" ").forEach(function(t){r.indexOf(t)>=0&&(e=!0)}),!e)}),n.regions=o):n.regions=[],o}}),N(ot.prototype,{regions:Ot});var Xt=function(t){var e=this.internal.data.targets;return w(t)?e:e.filter(function(e){return t.indexOf(e.id)>=0})};N(Xt,{shown:function(t){return this.internal.filterTargetsToShow(this.data(t))},values:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=null;if(t){var i=this.data(t);i&&R(i)&&(n=[],i.forEach(function(t){var i=t.values.map(function(t){return t.value});e?n=n.concat(i):n.push(i)}))}return n},names:function(t){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",t)},colors:function(t){return this.internal.updateDataAttributes("colors",t)},axes:function(t){return this.internal.updateDataAttributes("axes",t)},min:function(){return this.internal.getMinMaxData().min},max:function(){return this.internal.getMinMaxData().max}}),N(ot.prototype,{data:Xt}),N(ot.prototype,{category:function(t,e){var n=this.internal,i=n.config;return arguments.length>1&&(i.axis_x_categories[t]=e,n.redraw()),i.axis_x_categories[t]},categories:function(t){var e=this.internal,n=e.config;return arguments.length?(n.axis_x_categories=t,e.redraw(),n.axis_x_categories):n.axis_x_categories}}),N(ot.prototype,{color:function(t){return this.internal.color(t)}}),N(ot.prototype,{x:function(t){var e=this.internal,n=e.isCustomX()&&e.isCategorized();return R(t)&&(n?e.api.categories(t):(e.updateTargetX(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))),n?e.api.categories():e.data.xs},xs:function(t){var e=this.internal;return F(t)&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs}});var Dt=function(t,e,n){var i=t.config,a="axis_x_".concat(e),r="axis_y_".concat(e),o="axis_y2_".concat(e);A(n)&&(O(n)?(_(n.x)&&(i[a]=n.x),_(n.y)&&(i[r]=n.y),_(n.y2)&&(i[o]=n.y2)):(i[r]=n,i[o]=n),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))},Rt=function(t,e){var n=t.config;return{x:n["axis_x_".concat(e)],y:n["axis_y_".concat(e)],y2:n["axis_y2_".concat(e)]}},Ft=N(function(){},{labels:function(t){var e=this.internal;arguments.length&&(Object.keys(t).forEach(function(n){e.axis.setLabelText(n,t[n])}),e.axis.updateLabels())},min:function(t){var e=this.internal;return arguments.length?Dt(e,"min",t):Rt(e,"min")},max:function(t){var e=this.internal;return arguments.length?Dt(e,"max",t):Rt(e,"max")},range:function(t){var e=this.axis;if(!arguments.length)return{max:e.max(),min:e.min()};A(t.max)&&e.max(t.max),A(t.min)&&e.min(t.min)}});N(ot.prototype,{axis:Ft});var zt=N(function(){},{show:function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},hide:function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})}});N(ot.prototype,{legend:zt});var Et=A(window)&&window.Math===Math?window:A(self)&&(self.Math===Math?self:Function("return this")());Et.document;N(ot.prototype,{resize:function(t){var e=this.internal.config;e.size_width=t?t.width:null,e.size_height=t?t.height:null,this.flush(!1,!0)},flush:function(t,e){var n=this.internal;e?n.brush&&n.brush.updateResize():n.axis&&n.axis.setOrient(),n.zoomScale=null,t?n.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withLegend:!0}):n.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},destroy:function(){var t=this,e=this.internal;return D(e)&&(e.charts.splice(e.charts.indexOf(this),1),e.svg.select("*").interrupt(),A(e.resizeTimeout)&&Et.clearTimeout(e.resizeTimeout),Et.removeEventListener("resize",e.resizeFunction),e.selectChart.classed("bb",!1).html(""),Object.keys(this).forEach(function(n){"internal"===n&&Object.keys(e).forEach(function(t){e[t]=null}),t[n]=null,delete t[n]})),null},config:function(t,e,n){var i,a=this.internal,r=t&&t.replace(/\./g,"_");return r in a.config&&(A(e)?(a.config[r]=e,i=e,n&&this.flush()):i=a.config[r]),i}});var It=N(function(){},{show:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this.internal;if(n.mouse&&(e=n.mouse),n.data){var a=i.getYScale(n.data.id)(n.data.value);i.isMultipleX()?e=[i.x(n.data.x),a]:(!i.config.tooltip_grouped&&(e=[0,a]),t=_(n.data.index)?n.data.index:i.getIndexByX(n.data.x))}else A(n.x)?t=i.getIndexByX(n.x):A(n.index)&&(t=n.index);("mouse"===i.inputType?["mouseover","mousemove"]:["touchstart"]).forEach(function(n){i.dispatchEvent(n,t,e)})},hide:function(){var t=this.internal;t.hideTooltip(),t.hideXGridFocus(),t.unexpandCircles(),t.unexpandBars()}});N(ot.prototype,{tooltip:It});var Mt=window.navigator.userAgent;N(rt.prototype,{isSafari:function(){return Mt.indexOf("Safari")>-1&&!this.isChrome()},isChrome:function(){return Mt.indexOf("Chrome")>-1},isMobile:function(){return Mt.indexOf("Mobi")>-1}});var Bt=function(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode("0x".concat(e))}))},Pt=function(t,e){var n=t.cloneNode(!0),i=H(document.styleSheets),a=W(i),r=a.filter(function(t){return t.cssText}).map(function(t){return t.cssText});n.setAttribute("xmlns",u["namespaces"].xhtml);var o=(new XMLSerializer).serializeToString(n),s='<svg xmlns="'.concat(u["namespaces"].svg,'" width="').concat(e.width,'" height="').concat(e.height,'">\n\t\t\t<foreignObject width="100%" height="100%">\n\t\t\t\t<style>').concat(r.join("\n"),"</style>\n\t\t\t\t").concat(o.replace(/(url\()[^#]+/g,"$1"),"\n\t\t\t</foreignObject></svg>").replace("/\n/g","%0A");return"data:image/svg+xml;base64,".concat(Bt(s))};N(ot.prototype,{export:function(t,e){var n=this.internal,i={width:n.currentWidth,height:n.currentHeight},a=Pt(this.element,i);if(y(e)){var r=new Image;r.crosssOrigin="Anonymous",r.onload=function(){var n=document.createElement("canvas"),a=n.getContext("2d");n.width=i.width,n.height=i.height,a.drawImage(r,0,0),e(n.toDataURL(t))},r.src=a}return a}});n(24);n.d(e,"bb",function(){return Yt});var Yt={version:"1.8.0",generate:function(t){var e=new ot(t);return e.internal.charts=this.instance,this.instance.push(e),e},instance:[],chart:{fn:ot.prototype,internal:{fn:rt.prototype,axis:{fn:at.prototype}}}};e["default"]=Yt}])})}}]);
//# sourceMappingURL=jfrog-ui-essentials.umd.min.vendors-chunks~efb91ade.js.map
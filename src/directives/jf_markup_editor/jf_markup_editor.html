<div class="jf-markup-editor"
     ng-class="{'has-editor-label':jfMarkup.editorLabel}"
     ng-if="jfMarkup.webworkerOk || jfMarkup.previewersCount === 2">
    <div class="controls">
        <div class="editor-label"
             ng-if="jfMarkup.editorLabel"
             ng-class="{'editor-label-position':jfMarkup.isInEditMode()}">
            {{jfMarkup.editorLabel}}
        </div>
        <div class="lang-select-wrapper"
             ng-if="jfMarkup.isInEditMode()">
            <jf-ui-select class="form-group-cell"
                          jf-select-model="jfMarkup.language"
                          jf-select-change="jfMarkup.onLanguageChange()"
                          jf-select-options="['Markdown','Asciidoc','Plain Text']">
            </jf-ui-select>
        </div>
        <div class="switch-wrapper"
             ng-if="jfMarkup.showControls">
            <jf-switch ng-model="jfMarkup.mode"
                       ng-change="jfMarkup.onChangeModeInternal()"
                       options="jfMarkup.modeOptions"
                       controller="jfMarkup.switchController"
                       class="no-margin-top">
            </jf-switch>
        </div>
        <button class="btn btn-default edit-button"
                type="button"
                ng-if="!jfMarkup.showControls && jfMarkup.editable"
                ng-click="jfMarkup.activateEditor()">
            <i class="icon icon-edit-pen"></i>
            <span>Edit</span>
        </button>
    </div>
    <div class="code-mirror-wrapper" ng-if="jfMarkup.isInEditMode()">
        <jf-code-mirror
                ng-if="jfMarkup.language === 'Markdown'"
                mime-type="text/x-markdown"
                mode="gfm"
                allow-edit="true"
                height="100%"
                autofocus="true"
                model="jfMarkup.markup">
        </jf-code-mirror>
        <jf-code-mirror
                ng-if="jfMarkup.language === 'Asciidoc'"
                mime-type="text/x-markdown"
                mode="asciidoc"
                allow-edit="true"
                height="100%"
                autofocus="true"
                model="jfMarkup.markup">
        </jf-code-mirror>
        <jf-code-mirror
                ng-if="jfMarkup.language === 'Plain Text'"
                allow-edit="true"
                height="100%"
                autofocus="true"
                model="jfMarkup.markup">
        </jf-code-mirror>
        <button ng-if="jfMarkup.onSave"
                ng-click="jfMarkup.onSaveClick()"
                class="btn btn-primary save-button pull-right">
            Save
        </button>
        <button ng-if="!jfMarkup.hideCancelButton"
                ng-click="jfMarkup.onCancel()"
                class="btn btn-secondary clancel-button pull-right">
            Cancel
        </button>
    </div>
    <div class="preview-wrapper" ng-if="!jfMarkup.isInEditMode()">
        <div class="preview"
             ng-bind-html="jfMarkup.preview"></div>
    </div>
</div>

